!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,o=function(e,t){for(var n,r=[],i=(a.test(t)?e+"/"+t:t).split("/"),o=0,s=i.length;o<s;o++)n=i[o],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(n){var r=o(s(t),n);return e.require(r,t)}},c=function(e,t){var r=_&&_.createHot(e),i={id:e,exports:{},hot:r};return n[e]=i,t(i.exports,u(e),i),i.exports},l=function(e){return r[e]?l(r[e]):e},f=function(e,t){return l(o(s(e),t))},h=function(e,r){null==r&&(r="/");var a=l(e);if(i.call(n,a))return n[a].exports;if(i.call(t,a))return c(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};h.alias=function(e,t){r[t]=e};var v=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,d=function(e){if(v.test(e)){var t=e.replace(v,"");i.call(r,t)&&r[t].replace(v,"")!==t+"/index"||(r[t]=e)}if(p.test(e)){var n=e.replace(p,"");i.call(r,n)||(r[n]=e)}};h.register=h.define=function(e,r){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&h.register(a,e[a]);else t[e]=r,delete n[e],d(e)},h.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var _=e._hmr&&new e._hmr(f,h,t,n);h._cache=n,h.hmr=_&&_.wrap,h.brunch=!0,e.require=h}}(),function(){var e=("undefined"==typeof window?this:window,function(e,t,n){var r={},i=function(t,n){var a;try{return a=e(n+"/node_modules/"+t)}catch(o){if(o.toString().indexOf("Cannot find module")===-1)throw o;if(n.indexOf("node_modules")!==-1){var s=n.split("/"),u=s.lastIndexOf("node_modules"),c=s.slice(0,u).join("/");return i(t,c)}}return r};return function(a){if(a in t&&(a=t[a]),a){if("."!==a[0]&&n){var o=i(a,n);if(o!==r)return o}return e(a)}}});require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Bindable=function(){function t(){e(this,t)}return r(t,null,[{key:"isBindable",value:function(e){return!!e.___binding___&&e.___binding___===t}},{key:"makeBindable",value:function(e){if(!e||e.___binding___||"object"!==("undefined"==typeof e?"undefined":n(e))||e instanceof Node)return e;Object.defineProperty(e,"___ref___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"bindTo",{enumerable:!1,writable:!0}),Object.defineProperty(e,"isBound",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___binding___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___bindingAll___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___isBindable___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___executing___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___stack___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___stackTime___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___before___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___after___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___setCount___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___wrapped___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___object___",{enumerable:!1,writable:!1,value:e}),e.___isBindable___=t,e.___wrapped___={},e.___binding___={},e.___bindingAll___=[],e.___stack___=[],e.___stackTime___=[],e.___before___=[],e.___after___=[],e.___setCount___={},e.bindTo=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!1;t instanceof Function&&(r=n||{},n=t,i=!0);var a=!1;r.delay>=0&&(n=function(e){return function(t,n,i,a){var o=i[n];setTimeout(function(){return e(t,n,i,a,o)},r.delay)}}(n)),r.throttle>=0&&(n=function(e){return function(t,n,i,o){a||(e(t,n,i,o),a=!0,setTimeout(function(){return a=!1},r.throttle))}}(n));var o=void 0;if(r.wait>=0&&(n=function(e){return function(t,n,i,a){o&&clearTimeout(o);var s=i[n];o=setTimeout(function(){return e(t,n,i,a,s)},r.wait)}}(n)),i){var s=e.___bindingAll___.length;e.___bindingAll___.push(n);for(var u in e)n(e[u],u,e,!1);return function(){e.___bindingAll___[s]=null}}e.___binding___[t]||(e.___binding___[t]=[]);var c=e.___binding___[t].length;return e.___binding___[t].push(n),n(e[t],t,e,!1),function(){e.___binding___[t]&&(e.___binding___[t][c]=null)}},e.isBound=function(){for(var t in e.___bindingAll___)if(e.___bindingAll___[t])return!0;for(var n in e.___binding___)for(var r in e.___binding___[n])if(e.___binding___[n][r])return!0;return!1};for(var r in e)e[r]&&"object"==n(e[r])&&!e[r]instanceof Node&&(e[r]=t.makeBindable(e[r]));var i=function(r,i,a){if(r[i]===a)return!0;if(a&&"object"==("undefined"==typeof a?"undefined":n(a))&&!(a instanceof Node)&&a.___isBindable___!==t){a=t.makeBindable(a);for(var o in a)a[o]&&"object"==n(a[o])&&(a[o]=t.makeBindable(a[o]))}for(var s in e.___bindingAll___)e.___bindingAll___[s]&&e.___bindingAll___[s](a,i,r,!1);var u=!1;if(i in e.___binding___)for(var c in e.___binding___[i])e.___binding___[i]&&e.___binding___[i][c]&&e.___binding___[i][c](a,i,r,!1)===!1&&(u=!0);if(!u){var l=Object.getOwnPropertyDescriptor(r,i),f=r instanceof File&&"lastModifiedDate"==i;f||l&&!l.writable||(r[i]=a)}r.___setCount___[i]||(r.___setCount___[i]=0),r.___setCount___[i]++;var h=10;return r.___setCount___[i]>h&&a instanceof Object,!0},a=function(t,n){if(!(n in t))return!0;for(var r in e.___bindingAll___)e.___bindingAll___[r](void 0,n,t,!0);if(n in e.___binding___)for(var i in e.___binding___[n])e.___binding___[n][i]&&e.___binding___[n][i](void 0,n,t,!0);return Array.isArray(t)?t.splice(n,1):delete t[n],!0},o=function(n,r){return n[r]instanceof Function?n.___wrapped___[r]?n.___wrapped___[r]:(n.___wrapped___[r]=function(){n.___executing___=r,n.___stack___.unshift(r);for(var t in n.___before___)n.___before___[t](n,r,e);var i=n[r].apply(e.___ref___,arguments);for(var a in n.___after___)n.___after___[a](n,r,e);return n.___executing___=null,n.___stack___.shift(),i},n.___wrapped___[r]):(n[r]instanceof Object&&t.makeBindable(n[r]),n[r])};return e.___ref___=new Proxy(e,{deleteProperty:a,get:o,set:i}),e.___ref___}},{key:"clearBindings",value:function(e){e.___wrapped___={},e.___bindingAll___=[],e.___binding___={},e.___before___=[],e.___after___=[],e.___ref___={}}},{key:"resolve",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0,i=t.split("."),a=i[0];i.length;){if(n&&1===i.length){var o=this.makeBindable(e);return[o,i.shift(),a]}r=i.shift(),!(!r in e)&&e[r]&&e[r]instanceof Object||(e[r]={}),e=this.makeBindable(e[r])}return[this.makeBindable(e),r,a]}}]),t}()}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Cache=function(){function t(){e(this,t)}return n(t,null,[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;n&&(i=1e3*n+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[r]||(this.bucket[r]={}),this.bucket[r][e]={expiration:i,value:t}}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[n]&&this.bucket[n][e]&&(0==this.bucket[n][e].expiration||this.bucket[n][e].expiration>(new Date).getTime())?this.bucket[n][e].value:t}}]),t}()}()}),require.register("curvature/base/Cookie.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Cookie=void 0;var r=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("./Bindable"),o=t.Cookie=function(){function t(){e(this,t)}return i(t,null,[{key:"set",value:function(e,n){t.jar[e]=n}},{key:"get",value:function(e){return t.jar[e]}},{key:"delete",value:function(e){delete t.jar[e]}}]),t}();o.jar=o.jar||a.Bindable.makeBindable({}),"data"!==window.location.href.substr(0,4)&&(document.cookie.split(";").map(function(e){var t=e.split("="),n=r(t,2),i=n[0],a=n[1];try{a=JSON.parse(a)}catch(s){a=a}i=i.trim(),o.jar[decodeURIComponent(i)]=a}),o.jar.bindTo(function(e,t,n,r){n[t]=e,r&&(n[t]=null);var i=encodeURIComponent(t)+"="+n[t];document.cookie=i}))}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Dom=function(){function t(){e(this,t)}return n(t,null,[{key:"mapTags",value:function(e,t,n,r,i){var a=[],o=!0;r&&(o=!1);for(var s=!1,u=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:function(e){if(!o){if(e!==r)return NodeFilter.FILTER_SKIP;o=!0}return i&&e===i&&(s=!0),s?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);u.nextNode();)a.push(n(u.currentNode));return a}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,function(e){e.dispatchEvent(n)})}}]),t}()}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("./View"),a=(n("./Cache"),n("Config"));t.Router=function(){function t(){e(this,t)}return r(t,null,[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;r.addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=[location.toString()],r=history.length,i=location.pathname+location.search;location.hash&&(i+=location.hash),window.addEventListener("popstate",function(i){i.preventDefault(),n.length&&r==history.length?location.toString()==n[n.length-2]?n.pop():n.push(location.toString()):(n.push(location.toString()),r=history.length),t.match(location.pathname,e)}),this.go(i)}},{key:"go",value:function(e,t){document.title=a.Config.title,setTimeout(function(){history.pushState(null,null,e),t||(window.dispatchEvent(new Event("popstate")),"#"===e.substring(0,1)&&window.dispatchEvent(new HashChangeEvent("hashchange")))},0)}},{key:"match",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!=e||r){var a=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{result:b,path:e,view:t}}),o=t.args.content,s=t.routes;this.path=e,this.query={};var u=new URLSearchParams(location.search);this.queryString=location.search;var c=!0,l=!1,f=void 0;try{for(var h,v=u[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var p=h.value;this.query[p[0]]=p[1]}}catch(d){l=!0,f=d}finally{try{!c&&v["return"]&&v["return"]()}finally{if(l)throw f}}var _={},g=!1,b="";e=e.substr(1).split("/");for(var y in this.query)_[y]=this.query[y];e:for(var m in s){var w=m.split("/");if(!(w.length<e.length)){for(var k in w)if("%"==w[k].substr(0,1)){var T=null,C=/^%(\w+)\??/.exec(w[k]);if(C&&C[1]&&(T=C[1]),!T)throw new Error(w[k]+' is not a valid argument segment in route "'+m+'"');if(e[k])_[T]=e[k];else{if("?"!=w[k].substr(w[k].length-1,1))continue e;_[T]=""}}else if(e[k]!==w[k])continue e;if(!r&&o&&s[m]instanceof Object&&o instanceof s[m]&&!(s[m]instanceof Promise)&&o.update(_))return t.args.content=o,!0;g=m,b=s[m];break}}if(document.dispatchEvent(a),g in s&&s[g]instanceof Object&&s[g].isView&&s[g].isView())b=new s[g](_),b.root=function(){return t};else if(s[g]instanceof Function){b="";var j=s[g](_);j instanceof Promise?(b=!1,j.then(function(r){n.update(t,e,r)})["catch"](function(r){n.update(t,e,r)})):b=j}else s[g]instanceof Promise?(b=!1,s[g].then(function(r){n.update(t,e,r)})["catch"](function(r){n.update(t,e,r)})):s[g]instanceof Object?b=new s[g](_):"string"==typeof s[g]&&(b=s[g]);return this.update(t,e,b),b instanceof i.View&&(b.pause(!1),b.update(_,r)),g!==!1}}},{key:"update",value:function(e,t,n){var r=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:n,path:t,view:e}}),a=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:n,path:t,view:e}});n!==!1&&(e.args.content instanceof i.View&&e.args.content.remove(),document.dispatchEvent(r)&&(e.args.content=n),document.dispatchEvent(a))}},{key:"clearCache",value:function(){}},{key:"queryOver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(location.search),n={},r=[],i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r[c[0]]=c[1]}}catch(l){a=!0,o=l}finally{try{!i&&u["return"]&&u["return"]()}finally{if(a)throw o}}for(var f in r)n[f]=r[f];for(var h in e)n[h]=e[h];return delete n.api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;t||(r=this.queryOver(e));for(var i in r)""!==r[i]&&n.push(i+"="+encodeURIComponent(r[i]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r={};r[e]=t,this.go(this.path+"?"+this.queryToString(r),n)}}]),t}()}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n("./Dom"),n("./Tag")),a=n("./View");t.RuleSet=function(){function t(){e(this,t)}return r(t,[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.apply(e,n);for(var r in this.rules)for(var i in this.rules[r]){var a=this.rules[r][i],o=t.wrap(e,a,n),s=e.querySelectorAll(r),u=!0,c=!1,l=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;o(v)}}catch(p){c=!0,l=p}finally{try{!u&&h["return"]&&h["return"]()}finally{if(c)throw l}}}}}],[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i=this.globalRules[n][r],a=this.wrap(e,i,t),o=e.querySelectorAll(n),s=!0,u=!1,c=void 0;try{for(var l,f=o[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;a(h)}}catch(v){u=!0,c=v}finally{try{!s&&f["return"]&&f["return"]()}finally{if(u)throw c}}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(t instanceof a.View||t&&t.prototype&&t.prototype instanceof a.View)&&(t=function(e){return function(){return e}}(t)),function(e){e.___cvApplied___||(Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!0}),e.___cvApplied___=[]);for(var r in e.___cvApplied___)if(t==e.___cvApplied___[r])return;var o=void 0,s=void 0;n&&(o=s=n,n.viewList&&(s=n.viewList.parent));var u=new i.Tag(e,s,null,(void 0),o),c=u.element.parentNode,l=u.element.nextSibling,f=t(u);if(f!==!1&&e.___cvApplied___.push(t),f instanceof HTMLElement&&(f=new i.Tag(f)),f instanceof i.Tag){if(!f.element.contains(u.element)){for(;u.element.firstChild;)f.element.appendChild(u.element.firstChild);u.remove()}l?c.insertBefore(f.element,l):c.appendChild(f.element)}f&&f.prototype&&f.prototype instanceof a.View&&(f=new f),f instanceof a.View&&(n&&(n.cleanup.push(function(e){return function(){e.remove()}}(f)),f.parent=n,n.cleanup.push(n.args.bindTo(function(e,t,n){n[t]=e,f.args[t]=e})),n.cleanup.push(f.args.bindTo(function(e,t,r,i){r[t]=e,n.args[t]=e}))),u.clear(),f.render(u.element))}}}]),t}()}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("./Bindable");t.Tag=function(){function t(n,r,a,o,s){e(this,t),this.element=i.Bindable.makeBindable(n),this.parent=r,this.direct=s,this.ref=a,this.index=o,this.cleanup=[],this.proxy=i.Bindable.makeBindable(this)}return r(t,[{key:"remove",value:function(){i.Bindable.clearBindings(this);for(var e=void 0;e=this.cleanup.shift();)e();if(this.clear(),this.element){var t=new Event("cvDomDetached");this.element.dispatchEvent(t),this.element.remove(),this.element=this.ref=this.parent=null}}},{key:"clear",value:function(){if(this.element)for(var e=new Event("cvDomDetached");this.element.firstChild;)this.element.firstChild.dispatchEvent(e),this.element.removeChild(this.element.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}]),t}()}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("./Bindable"),s=n("./ViewList"),u=n("./Router"),c=(n("./Cookie"),n("./Dom")),l=(n("./Tag"),n("./RuleSet"));t.View=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),Object.defineProperty(this,"___VIEW___",{enumerable:!1,writable:!0}),this.___VIEW___=t,this.args=o.Bindable.makeBindable(e),this._id=this.uuid(),this.args._id=this._id,this.template="",this.document="",this.firstNode=null,this.lastNode=null,this.nodes=null,this.cleanup=[],this.attach=[],this.detach=[],this.eventCleanup=[],this.parent=null,this.viewList=null,this.viewLists={},this.withViews={},this.tags={},this.intervals=[],this.timeouts=[],this.frames=[],this.ruleSet=new l.RuleSet,this.preRuleSet=new l.RuleSet,this.subBindings={},this.removed=!1,this.preserve=!1,this.interpolateRegex=/(\[\[((?:\$)?[\w\.]+)\]\])/g}return a(t,[{key:"onFrame",value:function(e){var t=function n(t){e(t),window.requestAnimationFrame(n)};t()}},{key:"onTimeout",value:function(e,t){var n=this,r=function(){n.timeouts[a].fired=!0,n.timeouts[a].callback=null,t()},i=setTimeout(r,e),a=this.timeouts.length;return this.timeouts.push({timeout:i,callback:r,time:e,fired:!1,created:(new Date).getTime(),paused:!1}),i}},{key:"clearTimeout",value:function(e){for(var t in this.timeouts)e===this.timeouts[t].timeout&&(clearInterval(this.timeouts[t].timeout),delete this.timeouts[t])}},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){for(var t in this.timeouts)this.timeouts[t].fired?delete this.timeouts[t]:clearTimeout(this.timeouts[t].timeout);for(var n in this.intervals)clearInterval(this.intervals[n].timeout)}else{for(var r in this.timeouts)this.timeouts[r].timeout.paused&&(this.timeouts[r].fired?delete this.timeouts[r]:this.timeouts[r].timeout=setTimeout(this.timeouts[r].callback,this.timeouts[r].time));for(var i in this.intervals)this.intervals[i].timeout.paused&&(this.intervals[i].timeout.paused=!1,this.intervals[i].timeout=setInterval(this.intervals[i].callback,this.intervals[i].time))}for(var a in this.viewLists){if(!this.viewLists[a])return;this.viewLists[a].pause(!!e)}for(var o in this.tags)if(Array.isArray(this.tags[o]))for(var s in this.tags[o])this.tags[o][s].pause(!!e);else this.tags[o].pause(!!e)}},{key:"render",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r instanceof t&&(r=r.firstNode),this.nodes){for(var i in this.detach)this.detach[i]();var a=function(t){var i=new Event("cvDomDetached",{bubbles:!0,target:e.nodes[t]}),a=new Event("cvDomAttached",{bubbles:!0,target:e.nodes[t]});e.nodes[t].dispatchEvent(i),c.Dom.mapTags(e.nodes[t],!1,function(e){e.dispatchEvent(i)}),n&&(r?n.insertBefore(e.nodes[t],r):n.appendChild(e.nodes[t])),c.Dom.mapTags(e.nodes[t],!1,function(e){e.dispatchEvent(a)}),e.nodes[t].dispatchEvent(a)};for(var o in this.nodes)a(o);for(var s in this.attach)this.attach[s]()}else{var u=void 0;this.template==document?u=this.template:this.document?u=this.document:(u=document.createRange().createContextualFragment(this.template),this.document=u),this.preRuleSet.apply(u,this),c.Dom.mapTags(u,!1,function(t){t.matches?(t.matches("[cv-each]")&&e.mapEachTags(t),t.matches("[cv-with]")&&e.mapWithTags(t),t.matches("[cv-prerender]")&&e.mapPrendererTags(t),t.matches("[cv-link]")&&e.mapLinkTags(t),t.matches("[cv-bind]")&&e.mapBindTags(t),t.matches("[cv-attr]")&&e.mapAttrTags(t),e.mapInterpolatableTags(t),t.matches("[cv-expand]")&&e.mapExpandableTags(t),t.matches("[cv-ref]")&&e.mapRefTags(t),t.matches("[cv-if]")&&e.mapIfTags(t),t.matches("[cv-on]")&&e.mapOnTags(t)):e.mapInterpolatableTags(t)}),this.ruleSet.apply(u,this),this.nodes=[],this.firstNode=document.createComment("Template "+this._id+" Start"),this.nodes.push(this.firstNode),n&&(r?n.insertBefore(this.firstNode,r):n.appendChild(this.firstNode));for(var l=function(){var t=u.firstChild,i=new Event("cvDomAttached",{bubbles:!0,target:t});e.nodes.push(t),n&&(r?n.insertBefore(t,r):n.appendChild(t)),c.Dom.mapTags(t,!1,function(e){e.dispatchEvent(i)}),t.dispatchEvent(i)};u.firstChild;)l();this.lastNode=document.createComment("Template "+this._id+" End"),this.nodes.push(this.lastNode),n&&(r?n.insertBefore(this.lastNode,r):n.appendChild(this.lastNode));for(var f in this.attach)this.attach[f]();this.postRender(n)}}},{key:"mapExpandableTags",value:function(e){var t=this,n=e.getAttribute("cv-expand"),r=o.Bindable.makeBindable(this.args[n]||{});e.removeAttribute("cv-expand");var i=function(n){if("name"==n||"type"==n)return"continue";var i=r.bindTo(n,function(e,t){return function(n){e.setAttribute(t,n)}}(e,n));t.cleanup.push(function(){i(),r.isBound()&&o.Bindable.clearBindings(r)})};for(var a in r){i(a)}}},{key:"mapAttrTags",value:function(e){var t=e.getAttribute("cv-attr");e.removeAttribute("cv-attr");var n=t.split(","),r=n.map(function(e){return e.split(":")});for(var i in r)this.args[r[i][1]]&&e.setAttribute(r[i][0],this.args[r[i][1]]),this.cleanup.push(this.args.bindTo(r[i][1],function(t){return function(n){return null==n?void e.setAttribute(t[0],""):void e.setAttribute(t[0],n)}}(r[i])))}},{key:"mapInterpolatableTags",value:function(e){var n=this,r=this.interpolateRegex;if(e.nodeType==Node.TEXT_NODE){var a=e.nodeValue;if(!this.interpolatable(a))return;for(var s=0,u=void 0,c=function(){var r=u[2],c=!1;if("$"===r.substr(0,1)&&(c=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var l=a.substring(s,u.index);s=u.index+u[1].length;var f=document.createTextNode(l);e.parentNode.insertBefore(f,e);var h=void 0;h=c?document.createElement("div"):document.createTextNode("");var v=n.args,p=r;if(r.match(/\./)){var d=o.Bindable.resolve(n.args,r,!0),_=i(d,2);v=_[0],p=_[1]}e.parentNode.insertBefore(h,e);var g=v.bindTo(p,function(r,i){return function(a,o,s){s[o]instanceof t&&s[o]!==a&&(s[o].preserve||s[o].remove()),r.nodeValue="",a instanceof t?(a.render(e.parentNode,r),n.cleanup.push(function(){a.preserve||a.remove()})):(a instanceof Object&&a.__toString instanceof Function&&(a=a.__toString()),i?r.innerHTML=a:r.nodeValue=a)}}(h,c));n.cleanup.push(function(){g(),v.isBound()||o.Bindable.clearBindings(v)})};u=r.exec(a);){c()}var l=a.substring(s),f=document.createTextNode(l);e.parentNode.insertBefore(f,e),e.nodeValue=""}if(e.nodeType==Node.ELEMENT_NODE)for(var h=function(t){if(!n.interpolatable(e.attributes[t].value))return"continue";for(var a=0,s=void 0,u=e.attributes[t].value,c=e.attributes[t],l={},f=[];s=r.exec(u);)f.push(u.substring(a,s.index)),l[s[2]]||(l[s[2]]=[]),l[s[2]].push(f.length),f.push(s[1]),a=s.index+s[1].length;f.push(u.substring(a));var h=function(t){var r=n.args,a=t;if(t.match(/\./)){var s=o.Bindable.resolve(n.args,t,!0),u=i(s,2);r=u[0],a=u[1]}var h=t,v=r.bindTo(a,function(t,n,r,i){for(var o in l)for(var s in l[h])f[l[h][s]]=r[o],n===a&&(f[l[h][s]]=t);e.setAttribute(c.name,f.join(""))});n.cleanup.push(function(){v(),r.isBound()||o.Bindable.clearBindings(r)})};for(var v in l)h(v)},v=0;v<e.attributes.length;v++){h(v)}}},{key:"mapRefTags",value:function(e){var t=e.getAttribute("cv-ref"),n=t.split(":"),r=i(n,3),a=r[0],o=r[1],s=r[2],u=this.stringToClass(o);e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.cleanup.push(function(){e.___tag___=null,e.remove()});var c=this,l=this;this.viewList&&(c=this.viewList.parent);var f=new u(e,this,a,(void 0),l);if(e.___tag___=f,c){var h=this.args[s];void 0!==h?(c.tags[a]||(c.tags[a]=[]),c.tags[a][h]=f):c.tags[a]=f,c=c.parent}}},{key:"mapBindTags",value:function(e){var n=this,r=e.getAttribute("cv-bind"),a=this.args,s=r,u=null;if(r.match(/\./)){var c=o.Bindable.resolve(this.args,r,!0),l=i(c,3);a=l[0],s=l[1],u=l[2]}a!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.cleanup.push(this.args.bindTo(u,function(){for(;n.subBindings.length;)console.log("HERE!"),n.subBindings.shift()()})));var f=a.bindTo(s,function(n,r,i,a,o){if(o instanceof t&&o!==n&&o.remove(),"INPUT"!=e.tagName&&"SELECT"!=e.tagName&&"TEXTAREA"!=e.tagName)n instanceof t?n.render(e):e.innerText=n;else{var s=e.getAttribute("type");if(s&&"checkbox"==s.toLowerCase())e.checked=!!n;else if(s&&"radio"==s.toLowerCase())e.checked=n==e.value;else if("file"!==s){if("SELECT"==e.tagName)for(var u in e.options){var c=e.options[u];c.value==n&&(e.selectedIndex=u)}e.value=null==n?"":n}}},{wait:0});a!==this.args&&this.subBindings[r].push(f),this.cleanup.push(f);var h=function(t){if(t.target===e){var n=e.getAttribute("type");n&&"checkbox"==n.toLowerCase()?e.checked?a[s]=t.target.value:a[s]=!1:a[s]=t.target.value}};e.addEventListener("input",h),e.addEventListener("change",h),e.addEventListener("value-changed",h),this.cleanup.push(function(e,t){return function(){e.removeEventListener("input",h),e.removeEventListener("change",h),e.removeEventListener("value-changed",h),e=void 0,t=void 0}}(e,h)),e.removeAttribute("cv-bind")}},{key:"mapOnTags",value:function(t){var n=this;String(t.getAttribute("cv-on")).split(/;/).map(function(e){return e.split(":")}).map(function(t,r){return function(i){var a=i[0].replace(/(^[\s\n]+|[\s\n]+$)/,""),o=i[1],s=[],u=/(\w+)(?:\(([$\w\s'",]+)\))?/.exec(o);u.length&&(o=u[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),u[2]&&(s=u[2].split(",").map(function(e){return e.trim()})));for(var c=void 0,l=n;l;){if("function"==typeof l[o]){var f=function(){var e=l,t=o;return c=function(){e[t].apply(e,arguments)},"break"}();if("break"===f)break}if(l.viewList&&l.viewList.parent)l=l.viewList.parent;else{if(!l.parent)break;l=l.parent}}var h=function(t,r,i,a){return function(t){var u=s.map(function(e){var i=void 0;return parseInt(e)==e?e:"event"===e||"$event"===e?t:"$view"===e?r:"$tag"===e?a:"$parent"===e?n.parent:"$subview"===e?n:e in n.args?n.args[e]:(i=/^['"](\w+?)["']$/.exec(e))?i[1]:void 0});if("function"!=typeof i)throw new Error(o+" is not defined on View object.\n\nTag:\n\n"+a.outerHTML);i.apply(void 0,e(u))}}(t,l,c,r);switch(a){case"_init":h();break;case"_attach":n.attach.push(h);break;case"_detach":n.detach.push(h);break;default:r.addEventListener(a,h),n.cleanup.push(function(){r.removeEventListener(a,h)})}return[a,o,s]}}(this,t));t.removeAttribute("cv-on")}},{key:"mapLinkTags",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){return n.preventDefault(),"http"==t.substring(0,4)||"//"==t.substring(0,2)?void window.open(e.getAttribute("href",t)):void u.Router.go(e.getAttribute("href"))};e.addEventListener("click",n),this.cleanup.push(function(e,t){
return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link")}},{key:"mapPrendererTags",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer;("never"==t&&n||"only"==t&&!n)&&e.parentNode.removeChild(e)}},{key:"mapWithTags",value:function(e){var n=this,r=e.getAttribute("cv-with"),i=e.getAttribute("cv-carry");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry");var a=e.innerHTML,s=[];i&&(s=i.split(",").map(function(e){return e.trim()}));var u=this.args.bindTo(r,function(r,i,u,c){for(n.withViews[i]&&n.withViews[i].remove();e.firstChild;)e.removeChild(e.firstChild);var l=new t;n.cleanup.push(function(e){return function(){e.remove()}}(l)),l.template=a,l.parent=n;var f=function(e){var t=n.args.bindTo(s[e],function(e,t){l.args[t]=e});l.cleanup.push(t),n.cleanup.push(function(){t(),l.remove()})};for(var h in s)f(h);var v=function(e){var t=r.bindTo(e,function(e,t){l.args[t]=e});n.cleanup.push(function(){t(),r.isBound()||o.Bindable.clearBindings(r),l.remove()}),l.cleanup.push(function(){t(),r.isBound()||o.Bindable.clearBindings(r)})};for(var h in r)v(h);l.render(e),n.withViews[i]=l});this.cleanup.push(u)}},{key:"mapEachTags",value:function(e){var t=this,n=e.getAttribute("cv-each"),r=e.getAttribute("cv-carry");e.removeAttribute("cv-each"),e.removeAttribute("cv-carry");for(var a=e.innerHTML;e.firstChild;)e.removeChild(e.firstChild);var u=[];r&&(u=r.split(","));var c=n.split(":"),l=i(c,3),f=l[0],h=l[1],v=l[2],p=this.args.bindTo(f,function(n,r,i,c,l){t.viewLists[f]&&t.viewLists[f].remove();var p=new s.ViewList(a,h,n,t,v);t.cleanup.push(function(){p.remove()});var d=function(e){var r=t.args.bindTo(u[e],function(e,t){p.args.subArgs[t]=e});p.cleanup.push(r),t.cleanup.push(function(){r(),n&&!n.isBound()&&o.Bindable.clearBindings(n)})};for(var _ in u)d(_);for(;e.firstChild;)e.removeChild(e.firstChild);t.viewLists[f]=p,p.render(e)},{wait:0});this.cleanup.push(function(){p()})}},{key:"mapIfTags",value:function(e){var n=this,r=e.getAttribute("cv-if");e.removeAttribute("cv-if");var a=e.innerHTML,s=!1;for("!"===r.substr(0,1)&&(s=!0,r=r.substr(1));e.firstChild;)e.removeChild(e.firstChild);var u=document.createRange().createContextualFragment(""),c=new t;c.template=a,c.parent=this,c.render(e);var l=this.args.bindTo(function(e,t,n,r){"_id"!=t&&c.args[t]!==e&&(c.args[t]=e)});for(var f in this.args)"_id"!=f&&(c.args[f]=this.args[f]);for(var h=c.args.bindTo(function(e,r,i,a){if("_id"!=r){var o=e,s=i[r];e instanceof t&&(o=e.___ref___),i[r]instanceof t&&(s=i[r].___ref___),o!==s&&i[r]instanceof t&&i[r].remove(),i[r]!==e&&(i[r]=e),n.args[r]!==e&&(n.args[r]=e)}}),v=this;v.parent;)v=v.parent;this.cleanup.push(function(){l(),h()});var p=this.args,d=r;if(r.match(/\./)){var _=o.Bindable.resolve(this.args,r,!0),g=i(_,2);p=g[0],d=g[1]}var b=p.bindTo(d,function(t,n){if(Array.isArray(t)&&(t=!!t.length),s&&(t=!t),t)c.render(e);else{for(;e.firstChild;)e.firstChild.remove();c.render(u)}});this.cleanup.push(function(){b(),p.isBound()||o.Bindable.clearBindings(p)})}},{key:"postRender",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"remove",value:function(){var e=new Event("cvDomDetached");for(var t in this.tags)if(Array.isArray(this.tags[t]))for(var n in this.tags[t])this.tags[t][n].remove();else this.tags[t].remove();for(var r in this.nodes)this.nodes[r].dispatchEvent(e),this.nodes[r].remove();for(var i=void 0;i=this.cleanup.shift();)i();for(var a in this.viewLists)this.viewLists[a]&&this.viewLists[a].remove();this.viewLists=[];for(var o in this.timeouts)clearInterval(this.timeouts[o].timeout),delete this.timeouts[o];for(var s in this.intervals)clearInterval(this.intervals[s].timeout),delete this.intervals[s];this.removed=!0}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringToClass",value:function(e){var t=e.split("/"),r=t[t.length-1],i=n(e);return i[r]}}],[{key:"isView",value:function(){return t}}]),t}()}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("./Bindable"),a=n("./View"),o=function(){function t(n,r,a,o){var s=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e(this,t),this.args=i.Bindable.makeBindable({}),this.args.value=i.Bindable.makeBindable(a||{}),this.args.subArgs=i.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.template=n,this.subProperty=r,this.keyProperty=u,this.tag=null,this.paused=!1,this.parent=o,this.args.value.___before___.push(function(e){"bindTo"!=e.___executing___&&(s.paused=!0)}),this.args.value.___after___.push(function(e){"bindTo"!=e.___executing___&&(s.paused=e.___stack___.length>1,s.reRender())});var c=this.args.value.bindTo(function(e,t,n,r){if(!s.paused)if(r){s.views[t]&&s.views[t].remove(),s.views.splice(t,1);for(var i in s.views)s.views[i].args[s.keyProperty]=i}else s.views[t]||s.reRender()},{wait:0});this.cleanup.push(c)}return r(t,[{key:"render",value:function(e){for(var t in this.views)this.views[t].render(e);this.tag=e}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[];for(var n in this.views)t[n]=this.views[n];var r=[];for(var i in this.args.value){var o=!1;for(var s in t)if(t[s]&&this.args.value[i]===t[s].args[this.subProperty]){o=!0,r[i]=t[s],r[i].args[this.keyProperty]=i,delete t[s];break}o||!function(){var t={};r[i]=new a.View(t);r[i].template=e.template,r[i].parent=e.parent,r[i].viewList=e,r[i].args[e.keyProperty]=i,r[i].args[e.subProperty]=e.args.value[i],e.cleanup.push(e.args.value.bindTo(i,function(e,t,n){})),e.cleanup.push(t.bindTo(e.subProperty,function(n,r){var i=t[e.keyProperty];e.args.value[i]=n})),e.cleanup.push(e.args.subArgs.bindTo(function(e,n,r,i){t[n]=e})),t[e.subProperty]=e.args.value[i]}()}for(var u in t){var c=!1;for(var l in r)if(t[u]===r[l]){c=!0;break}c||t[u].remove()}var f=!0;for(var h in this.views)this.views[h]!==r[h]&&(f=!1);for(var v in r)r[v]!==this.views[v]&&(t.splice(v+1,0,r[v]),r[v].render(this.tag));for(var p in r)r[p].args[this.keyProperty]=p;this.views=r}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"remove",value:function(){for(var e in this.views)this.views[e].remove();for(var t=void 0;this.cleanup.length;)(t=this.cleanup.pop())();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);i.Bindable.clearBindings(this.args.subArgs),i.Bindable.clearBindings(this.args),this.args.value.isBound()||i.Bindable.clearBindings(this.args.value)}}]),t}();t.ViewList=o}()}),require.register("curvature/input/Keyboard.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Keyboard=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("../base/Bindable");t.Keyboard=function(){function t(){var n=this;e(this,t),this.maxDecay=120,this.listening=!0,this.keys=i.Bindable.makeBindable({}),this.codes=i.Bindable.makeBindable({}),document.addEventListener("keyup",function(e){n.keys[e.key]=-1,n.codes[e.code]=-1}),document.addEventListener("keydown",function(e){n.keys[e.key]>0||(n.keys[e.key]=1,n.codes[e.code]=1)}),window.addEventListener("blur",function(e){for(var t in n.keys)n.keys[t]=-1;for(var r in n.codes)n.codes[r]=-1})}return r(t,[{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"update",value:function(){for(var e in this.keys)this.keys[e]>0?this.keys[e]++:(this.keys[e]--,this.keys[e]<-this.maxDecay&&delete this.keys[e]);for(var e in this.codes)this.codes[e]>0?this.codes[e]++:(this.codes[e]--,this.codes[e]<-this.maxDecay&&delete this.keys[e])}}]),t}()}()}),require.register("BinaryMessageView.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryMessageView=void 0;var o=t("curvature/base/View");e.BinaryMessageView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.template="<span>&gt;&gt;&nbsp;0x</span>[[header]]&nbsp;[[message]]",n}return a(t,e),t}(o.View)}),require.register("ByteView.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ByteView=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t("curvature/base/View");e.ByteView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.args.separator=n.args.separator||"",n.template='<span\n\t\t\tcv-each = "bytes:byte:b"\n\t\t\tcv-carry = "separator"\n\t\t\tstyle = "display: block;"\n\t\t\t"><span\n\t\t\t\tcv-on = "cvDomAttached:color(event, byte, $view)"\n\t\t\t\tcv-ref = "byte:curvature/base/Tag"\n\t\t\t\t\n\t\t\t>[[byte]][[separator]]</span></span>',n}return a(t,e),o(t,[{key:"color",value:function n(e,t,r){var i=parseInt(t,16);if(i){var n="hsl("+360*i/255+",70%,70%)";r.tags["byte"].element.style.color=n,r.tags["byte"].element.style["text-shadow"]="2px 0px 5px "+n+", -2px 0px 5px "+n}}}]),t}(s.View)}),require.register("Config.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=e.Config=function a(){r(this,a)};i.title="SubSpace 0.2.0a"}),require.register("Cornfield.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.Cornfield=function(){function e(t){var n=this;r(this,e),t.args.output.push(":: Welcome to Cornfield"),t.args.output.push(":: You are in a cornfield."),t.args.output.push(":: You see corn."),t.args.output.push(":: Move? [north south east west]"),t.args.output.push(":: Look?"),t.localEcho=!1,this.socket=t.socket,this.socket.subscribe("message:cornfield:game",function(e,t,n,r){}),this.socket.subscribe("message:cornfield:chat",function(e,n,r,i,a){t.args.output.push("!! <"+a+"> "+n)}),this.socket.subscribe("message:cornfield:users:ping",function(e,t,r,i){n.socket.publish("cornfield:users:pong","pong!")}),this.socket.subscribe("message:cornfield:users:pong",function(e,t,n,r){})}return i(e,[{key:"pass",value:function(e,t){var n=e.split(" "),r=n.shift();switch(console.log(r),r.toLowerCase()){case"ping":this.socket.publish("cornfield:users:ping","ping!");break;case"look":t.args.output.push(":: You found an ear of corn."),this.socket.publish("cornfield:game","l");break;case"n":case"north":t.args.output.push(":: You moved north."),this.socket.publish("cornfield:game","n");break;case"s":case"south":t.args.output.push(":: You moved south."),this.socket.publish("cornfield:game","s");break;case"e":case"east":t.args.output.push(":: You moved east."),this.socket.publish("cornfield:game","e");break;case"w":case"west":t.args.output.push(":: You moved west."),this.socket.publish("cornfield:game","w");break;case"t":case"talk":case"say":var i=n.join(" ");t.args.output.push("!! <you> "+i),this.socket.publish("cornfield:chat",i)}t.args.input=""}}]),e}()}),require.register("Login.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.Login=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e){e.args.output.push(":: Please type your username")}},{key:"pass",value:function(e,t){return t.args.passwordMode=!1,this.stack||(this.stack=[]),this.stack.push(e),1==this.stack.length?(t.args.passwordMode=!0,t.args.input="",void t.args.output.push(":: Please type your password [censored]")):void(2==this.stack.length&&(t.args.input="",t.localLock=!1,t.args.prompt="<<",t.args.output.push("<< login "+this.stack[0]+" [password censored]"),t.socket.send("login "+this.stack[0]+" "+this.stack[1]),t.args.output.push(":: Checking...")))}}]),e}()}),require.register("Register.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.Register=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e){e.args.output.push(":: Please type your username")}},{key:"pass",value:function(e,t){if(t.args.passwordMode=!1,this.stack||(this.stack=[]),this.stack.push(e),1==this.stack.length)return t.args.input="",void t.args.output.push(":: Please type your email address");if(2==this.stack.length)return t.args.passwordMode=!0,t.args.input="",void t.args.output.push(":: Please type your password");if(3==this.stack.length)return t.args.passwordMode=!0,t.args.input="",void t.args.output.push(":: Please type your password again.");if(4==this.stack.length){if(t.args.input="",this.stack[2]!==this.stack[3])return t.args.output.push(":: Password verification failed."),t.args.output.push(":: Please type your password"),t.args.passwordMode=!0,this.stack.pop(),void this.stack.pop();t.args.output.push(":: Trying to register "+this.stack[0]+" <"+this.stack[1]+">..."),t.args.output.push("<< register "+this.stack[0]+" [password censored] "+this.stack[1]),t.socket.send("register "+this.stack[0]+" "+this.stack[2]+" "+this.stack[1]),t.localLock=!1,t.args.prompt="<<"}}}]),e}()}),require.register("RootView.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.RootView=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("curvature/base/View"),c=t("curvature/input/Keyboard"),l=t("kalisti/Socket"),f=t("BinaryMessageView"),h=t("TextMessageView"),v=t("ByteView"),p=t("Login"),d=t("Register"),_=t("Cornfield");e.RootView=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));a.routes={},a.template=t("./root.tmp"),a.args.input="",a.args.output=[],a.args.inverted="",a.args.passwordMode=!1,a.localEcho=!0,a.localLock=null,a.args.prompt="<<",a.max=1024,a.history=[],a.historyCursor=-1,e.output.___after___.push(function(e,t,n,r){"push"===t&&(a.onTimeout(16,function(){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})}),a.onTimeout(48,function(){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})}))}),a.socket=l.Socket.get("ws://"+location.hostname+":9998"),a.auth().then(function(){a.onTimeout(10,function(){a.socket.send("motd"),a.args.output.push("<< motd")})}),a.socket.subscribe("message",function(e,t,n,r,i,s,u){if("string"==typeof e.data){var c=JSON.parse(e.data);"object"==("undefined"==typeof c?"undefined":o(c))&&(c=JSON.stringify(c,null,4)),a.localEcho&&a.args.output.push(new h.TextMessageView({message:c}))}else if(e.data instanceof ArrayBuffer){var l=new Uint8Array(e.data),p=i.toString(16).toUpperCase().padStart(4,"0"),d=n.toString(16).toUpperCase().padStart(4,"0"),_="0x"+p+d,g=[i.toString(16).toUpperCase().padStart(4,"0"),n.toString(16).toUpperCase().padStart(4,"0")].join("").match(/.{1,2}/g),b=6;if("server"==r){g=[n.toString(16).padStart(4,"0")],_="0x"+n.toString(16).padStart(4,"0")}var y=Array.from(l).map(function(e){return e.toString(16).toUpperCase().padStart(2,"0")});for(a.localEcho&&a.args.output.push(new f.BinaryMessageView({header:new v.ByteView({separator:"",bytes:g}),message:new v.ByteView({separator:" ",bytes:y.slice(b)})}));a.args.output.length>a.max;)a.args.output.shift()}});var s=new c.Keyboard;return s.keys.bindTo(function(e,t){},{wait:1}),s.keys.bindTo("Escape",function(e){1==e&&(a.localLock&&a.args.output.push(":: Killed."),a.localLock=!1,a.args.prompt="<<",a.args.passwordMode=!1)},{wait:1}),s.keys.bindTo("ArrowUp",function(e){if(1==e){if(a.historyCursor++,a.historyCursor>=a.history.length)return void a.historyCursor--;a.args.input=a.history[a.historyCursor]}},{wait:1}),s.keys.bindTo("ArrowDown",function(e){if(1==e){if(a.historyCursor--,a.historyCursor<=-1)return a.historyCursor++,void(a.args.input="");a.args.input=a.history[a.historyCursor]}},{wait:1}),a}return a(n,e),s(n,[{key:"postRender",value:function(){var e=this;this.args.bindTo("passwordMode",function(t){t?(e.tags.input.element.style.display="none",e.tags.password.element.style.display="unset"):(e.tags.input.element.style.display="unset",e.tags.password.element.style.display="none"),e.focus()},{wait:0})}},{key:"focus",value:function(){if(!window.getSelection().toString())return this.args.passwordMode?void this.tags.password.element.focus():void this.tags.input.element.focus()}},{key:"submit",value:function(e){this.interpret(this.args.input)}},{key:"interpret",value:function(e){if(this.localLock)return"/quit"==e?(this.localLock=!1,this.args.prompt="<<",this.args.output.push(":: Killed."),void(this.args.input="")):void this.localLock.pass(e,this);if(this.history.unshift(e),this.historyCursor=-1,"/"!==e.substring(0,1)){for(this.socket.send(e),this.args.output.push("<< "+e);this.args.output.length>this.max;)this.args.output.shift();return void(this.args.input="")}this.args.output.push(":: "+e),e=e.substring(1);var t=e.split(" ");switch(e=t.shift()){case"pub":for(var n=parseInt(t.shift(),16),r=[];t.length;)r.push(t.shift());var i=new Uint8Array(new Uint16Array([n]).buffer),a=[];for(var o in i)a[o]=i[o];for(var s=0;s<r.length;s++)a[s+2]=parseInt(r[s],16);this.socket.send(new Uint8Array(a));break;case"login":this.args.output.push(":: Escape to cancel"),this.localLock=new p.Login,this.args.prompt="::",this.localLock.init(this),this.args.prompt="::";break;case"register":this.args.output.push(":: Escape to cancel"),this.localLock=new d.Register,this.args.prompt="::",this.localLock.init(this);break;case"auth":this.auth();break;case"clear":for(;this.args.output.length;)this.args.output.pop();break;case"echo":t.length&&(this.localEcho=parseInt(t[0])),this.args.output.push("Echo is "+(this.localEcho?"on":"off"));break;case"cornfield":this.localLock=new _.Cornfield(this),this.args.prompt="::";break;case"light":this.args.inverted="inverted";break;case"dark":this.args.inverted="";break;case"commands":this.args.output.push(JSON.stringify({"/pub":"CHAN BYTES... Publish raw bytes to a channel (hexadecimal)","/auth":"Run the auth procedure.","/login":"Run the login procedure.","/register":"Run the registration procedure.","/clear":"Clear the terminal.","/echo":"[1|0] Enable/Disable/Check localEcho.","/light":"Light theme.","/dark":"Dark theme.","/cornfield":"Play Cornfield."},null,4))}this.args.input=""}},{key:"auth",value:function(){var e=this;return fetch("/auth?api").then(function(e){return e.text()}).then(function(t){return e.args.output.push(":: /auth"),e.args.output.push("<< auth [token censored]"),e.socket.send("auth "+t),!0})}},{key:"test",value:function(e){var t=this;if("Enter"==e.key){var n=this.args.input;this.args.input="",this.onTimeout(0,function(){t.interpret(n)})}}}]),n}(u.View)}),require.register("TextMessageView.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TextMessageView=void 0;var o=t("curvature/base/View");e.TextMessageView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.template='<span>&gt;&gt;&nbsp;</span><span class = "text">[[message]]</span>',n}return a(t,e),t}(o.View)}),require.register("initialize.js",function(e,t,n){"use strict";var r=(t("curvature/base/Tag"),t("curvature/base/RuleSet")),i=t("curvature/base/Router"),a=t("./RootView"),o=new a.RootView;r.RuleSet.add("body",o),r.RuleSet.wait(),i.Router.wait(o)}),require.register("kalisti/Channel.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.Channel=function(){function e(){r(this,e)}return i(e,null,[{key:"scalar",value:function(e,t){var n=new Uint8Array(e).buffer;return"float"==t?new Float64Array(n)[0]:"Int32"==t?new Int32Array(n)[0]:void 0}},{key:"namePart",value:function(e,t){return e.split(":")[t]||null}},{key:"isWildcard",value:function(e){return/\*/.exec(e)}},{key:"isRange",value:function(e){}},{key:"containsRange",value:function(e){}},{key:"compareNames",value:function(e,t){var n=/^(\d+)\-?(\d+)?$/,r=[],i=e.toString().split(":"),a=t.toString().split(":"),o=i.length,s=void 0,u=void 0;o<a.length&&(o=a.length);for(var c=0;c<o;c++){if(i.length>c)s=i[c];else{if("*"!=i[i.length-1])return!1;s=i[i.length-1]}if(a.length>c)u=a[c];else{if("*"!=a[a.length-1])return!1;u=a[a.length-1]}var l="*"!==s?s:u;if(s!==u&&"*"!==s&&"*"!==u){var f=n.exec(s),h=n.exec(u);if(!f||!h)return!1;var v=f[1],p=f[1],d=h[1],_=h[1];if(f[2]&&(p=f[2]),h[2]&&(_=h[2]),v>=d&&p<=_?l=v+"-"+p:v<=d&&p>_?l=d+"-"+_:p<=_&&p>=d?l=d+"-"+p:v<=_&&v>=d&&(l=v+"-"+_),_<=p&&_>=v)l=v+"-"+_;else{if(!(d<=p&&d>=v))return!1;l=d+"-"+p}}r.push(l)}return r.join(":")}}]),e}()}),require.register("kalisti/Socket.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t("./Channel");e.Socket=function(){function e(t){r(this,e),this.socket=t,t.binaryType="arraybuffer",this.data={},this.listenerCount={},this.openQueue=[],this._onSend=[]}return a(e,null,[{key:"get",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.sockets||(this.sockets={}),this.sockets[e]=new this(new WebSocket(e)),this.sockets[e]}}]),a(e,[{key:"subscribe",value:function(e,t,n){var r=e.split(":"),a=r.shift(),s=r.join(":");t instanceof Function&&(n=t,t=s),s&&(s in this.listenerCount||(this.listenerCount[s]=0),this.listenerCount[s]++,this.send("sub "+s));var u=function(e,t,n,r){return function(n){var a={};try{if("string"==typeof n.data)a=JSON.parse(n.data);else if(n.data instanceof ArrayBuffer){var s=new Uint16Array(n.data,4,1)[0];if(!t||o.Channel.compareNames(t,s))return void r(n,n.data.slice(6),s,new Uint16Array(n.data,0,1)[0]?"user":"server",new Uint16Array(n.data,2,1)[0],null,{})}else if("message"!==e)return void r(n)}catch(u){return void("message"!==e&&r(n))}return"object"!==("undefined"==typeof a?"undefined":i(a))?void r(n,n.data,null,"server",0,null,a):(t||r(n,a.message,null,a.origin,a.originId,null,a),void(t&&"channel"in a&&o.Channel.compareNames(t,a.channel)&&r(n,a.message,a.channel,a.origin,a.originId,a.originalChannel,a)))}}(a,t,s,n);return this.socket.addEventListener(a,u),u}},{key:"unsubscribe",value:function(e,t){var n=e.split(":"),r=n.shift(),i=n.join(":");i&&(this.listenerCount[i]--,i in this.listenerCount&&this.listenerCount[i]>0||(this.socket.removeEventListener(r,t),this.send("unsub "+i)))}},{key:"publish",value:function(e,t){if(e==parseInt(e)){t.byteLength?t=new Uint8Array(t.buffer):Array.isArray(t)||(t=[t]);var n=new Uint8Array(new Uint16Array([e]).buffer),r=[];for(var i in n)r[i]=n[i];for(var a=0;a<t.length;a++)r[a+2]=t[a];return void this.send(new Uint8Array(r))}this.send("pub "+e+" "+t)}},{key:"send",value:function(e){var t=this;if(this.socket.readyState!==this.socket.OPEN)return new Promise(function(n,r){var i=function(e){return function(r){for(;t.openQueue.length;){var i=t.openQueue.shift();t.send(i)}t.socket.removeEventListener("open",e),n()}}(i);t.socket.addEventListener("open",i),t.openQueue.unshift(e)});for(var n in this._onSend)this._onSend[n](e);return this.socket.send(e),Promise.resolve()}},{key:"onSend",value:function(e){this._onSend.push(e)}},{key:"close",value:function(e){this.socket.close()}},{key:"ping",value:function(){}},{key:"pong",value:function(){}}]),e}()}),require.register("root.tmp.html",function(e,t,n){n.exports='<div class = "main [[inverted]]" cv-on = "click:focus(event)">\n\t<div class = "top">\n\t\t<div class = "menu"></div>\n\t\t<div class = "terminal">\n\t\t\t<div class = "output" cv-each = "output:line:l" cv-ref = "output:curvature/base/Tag">\n\t\t\t\t<p>[[line]]</p>\n\t\t\t</div>\n\t\t\t<div class = "bottom">\n\t\t\t\t<div>[[prompt]]&nbsp;</div>\n\t\t\t\t<div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype = "text"\n\t\t\t\t\t\tcv-on = "keydown:test(event)"\n\t\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\t\tcv-ref = "input:curvature/base/Tag"/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tname = "pw-input"\n\t\t\t\t\t\ttype = "password"\n\t\t\t\t\t\tcv-on = "keydown:test(event)"\n\t\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\t\tcv-ref = "password:curvature/base/Tag"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class = "scanlines"></div>\n</div>\n'}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");