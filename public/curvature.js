!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,u=i.length;a<u;a++)".."===(n=i[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,r){var i,o={id:t,exports:{},hot:d&&d.createHot(t)};return n[t]=o,r(o.exports,(i=t,function(t){var n=a(u(i),t);return e.require(n,i)}),o),o.exports},l=function(e){var t=r[e];return t&&e!==t?l(t):e},c=function(e,r){null==r&&(r="/");var o=l(e);if(i.call(n,o))return n[o].exports;if(i.call(t,o))return s(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};c.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;c.register=c.define=function(e,o){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&c.register(a,e[a]);else t[e]=o,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(v.test(e)){var n=e.replace(v,"");i.call(r,n)||(r[n]=e)}}(e)},c.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var d=e._hmr&&new e._hmr((function(e,t){return l(a(u(e),t))}),c,t,n);c._cache=n,c.hmr=d&&d.wrap,c.brunch=!0,e.require=c}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},i=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var o=n.split("/"),a=o.lastIndexOf("node_modules"),u=o.slice(0,a).join("/");return i(t,u)}}return r};return function(o){if(o in t&&(o=t[o]),o){if("."!==o[0]&&n){var a=i(o,n);if(a!==r)return a}return e(o)}}};require.register("curvature/base/Bag.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var r=n("./Bindable"),i=n("./Mixin"),o=n("../mixin/EventTargetMixin");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,i,o=l(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return a(this,c),(e=o.call(this)).meta=Symbol("meta"),e.content=new Map,e.list=r.Bindable.makeBindable([]),e.current=0,e.type=void 0,e.length=0,e.changeCallback=t,e}return t=c,(n=[{key:"has",value:function(e){return this.content.has(e)}},{key:"add",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var n,r=(n=this.current++,Number(n));this.content.set(e,r),this.list[r]=e,this.changeCallback&&this.changeCallback(e,this.meta,c.ITEM_ADDED,r);var i=new CustomEvent("added",{detail:{item:e,id:r}});this.dispatchEvent(i),this.length=this.size}}}},{key:"remove",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var n=this.content.get(e);delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,c.ITEM_REMOVED,n);var r=new CustomEvent("removed",{detail:{item:e,id:n}});return this.dispatchEvent(r),this.length=this.size,e}}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map((function(e){return e[0]}))}}])&&u(t.prototype,n),i&&u(t,i),c}(i.Mixin.with(o.EventTargetMixin));t.Bag=v,Object.defineProperty(v,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(v,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()})),require.register("curvature/base/Bindable.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,i,o){return(e=n()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var f=Symbol("ref"),v=Symbol("original"),d=Symbol("deck"),h=Symbol("binding"),p=Symbol("subBinding"),b=Symbol("bindingAll"),y=Symbol("isBindable"),m=Symbol("wrapping"),g=Symbol("Names"),w=Symbol("executing"),_=Symbol("stack"),O=(Symbol("object"),Symbol("wrapped")),k=Symbol("unwrapped"),j=Symbol("getProto"),A=Symbol("onGet"),T=Symbol("onAllGet"),S=Symbol("bindChain"),P=Symbol("Descriptors"),E=Symbol("NoGetters"),R=Object.getPrototypeOf(Int8Array),C=Set.prototype[Symbol.iterator],B=Map.prototype[Symbol.iterator],N=globalThis,M=[N.Node,N.File,N.Map,N.Set,N.WeakMap,N.WeakSet,N.ArrayBuffer,N.ResizeObserver,N.MutationObserver,N.PerformanceObserver,N.IntersectionObserver].filter((function(e){return"function"==typeof e})),x=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,a;return n=t,a=[{key:"isBindable",value:function(e){return!(!e||!e[y])&&e[y]===t}},{key:"onDeck",value:function(e,t){return e[d][t]||!1}},{key:"ref",value:function(e){return e[f]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,n){n=n||new Map;var r={};if(e instanceof R||e instanceof ArrayBuffer){var i=e.slice(0);return n.set(e,i),i}var o=Object.keys(e);for(var a in o){var u=o[a];if("___"!==u.substring(0,3)){var l=n.get(e[u]);if(l)r[u]=l;else if(e[u]!==e){if(e[u]&&"object"===s(e[u])){var c=e[u];t.isBindable(e[u])&&(c=e[u][v]),r[u]=this.shuck(c,n)}else r[u]=e[u];n.set(e[u],r[u])}else n.set(e[u],r),r[u]=r}}return t.isBindable(e)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(n){var r=this;if(!n||!["function","object"].includes(s(n)))return n;if(M.filter((function(e){return n instanceof e})).length||Object.isSealed(n)||!Object.isExtensible(n))return n;if(n[f])return n[f];if(n[h])return n;if(Object.defineProperty(n,f,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(n,v,{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(n,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,h,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,p,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,b,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,y,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(n,w,{enumerable:!1,writable:!0}),Object.defineProperty(n,m,{enumerable:!1,writable:!0}),Object.defineProperty(n,_,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,O,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,k,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,P,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=!1;if(Array.isArray(i)){var l=i.map((function(t){return e(t,o,a)}));return function(){return l.map((function(e){return e()}))}}if(i instanceof Function&&(a=o||{},o=i,u=!0),a.delay>=0&&(o=r.wrapDelayCallback(o,a.delay)),a.throttle>=0&&(o=r.wrapThrottleCallback(o,a.throttle)),a.wait>=0&&(o=r.wrapWaitCallback(o,a.wait)),a.frame&&(o=r.wrapFrameCallback(o,a.frame)),a.idle&&(o=r.wrapIdleCallback(o)),u){var c=n[b].length;if(n[b].push(o),!("now"in a)||a.now)for(var f in n)o(n[f],f,n,!1);return function(){delete n[b][c]}}if(n[h][i]||(n[h][i]=new Set),a.children){var v=o;o=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r[0],u=n[p].get(v);if(u&&(n[p].delete(v),u()),"object"===s(o)){var l=t.make(o);t.isBindable(l)&&n[p].set(v,l.bindTo((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,r.concat(t))}),Object.assign({},a,{children:!1}))),v.apply(void 0,r)}else v.apply(void 0,r)}}n[h][i].add(o),"now"in a&&!a.now||o(n[i],i,n,!1);var d=function(){var e=n[p].get(o);e&&(n[p].delete(o),e()),n[h][i]&&n[h][i].has(o)&&n[h][i].delete(o)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove((function(){return d})),d}}),Object.defineProperty(n,S,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var i=e.split("."),o=i.shift(),a=i.slice(0),u=[];return u.push(n.bindTo(o,(function(e,n,i,o){var s=a.join(".");0!==a.length?(void 0===e&&(e=i[n]=r.makeBindable({})),u=u.concat(e[S](s,t))):t(e,n,i,o)}))),function(){return u.map((function(e){return e()}))}}}),Object.defineProperty(n,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n.___before___.length;n.___before___.push(e);var r=!1;return function(){r||(r=!0,delete n.___before___[t])}}}),Object.defineProperty(n,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n.___after___.length;n.___after___.push(e);var r=!1;return function(){r||(r=!0,delete n.___after___[t])}}}),Object.defineProperty(n,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in n[b])if(n[b][e])return!0;for(var t in n[h])for(var r in n[h][t])if(n[h][t][r])return!0;return!1}}),!n[E]){var a=function(e){n[e]&&n[e]instanceof Object&&!n[e]instanceof Promise&&(M.filter((function(t){return n[e]instanceof t})).length||!Object.isExtensible(n[e])||Object.isSealed(n[e])||(n[e]=t.make(n[e])))};for(var u in n)a(u)}var l=n[P],c=n[O],N=n[_],x={get:function(r,i){if(c.has(i))return c.get(i);if(i===f||i===v||"apply"===i||"isBound"===i||"bindTo"===i||"__proto__"===i||"constructor"===i)return n[i];var a;if(l.has(i)?a=l.get(i):(a=Object.getOwnPropertyDescriptor(n,i),l.set(i,a)),a&&!a.configurable&&!a.writable)return n[i];if(T in n)return n[T](i);if(A in n&&!(i in n))return n[A](i);if(a&&!a.configurable&&!a.writable)return c.set(i,n[i]),n[i];if("function"==typeof n[i]){if(g in n[i])return n[i];Object.defineProperty(n[k],i,{configurable:!1,enumerable:!1,writable:!1,value:n[i]});var u=Object.getPrototypeOf(n)[i]===n[i],s="function"==typeof Promise&&n instanceof Promise||"function"==typeof Map&&n instanceof Map||"function"==typeof Set&&n instanceof Set||"function"==typeof B&&n.prototype===B||"function"==typeof C&&n.prototype===C||"function"==typeof C&&n.prototype===C||"function"==typeof WeakMap&&n instanceof WeakMap||"function"==typeof WeakSet&&n instanceof WeakSet||"function"==typeof Date&&n instanceof Date||"function"==typeof R&&n instanceof R||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"function"==typeof EventTarget&&n instanceof EventTarget||"function"==typeof ResizeObserver&&n instanceof ResizeObserver||"function"==typeof MutationObserver&&n instanceof MutationObserver||"function"==typeof PerformanceObserver&&n instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&n instanceof IntersectionObserver||"function"==typeof n[Symbol.iterator]&&"next"===i?n:n[f],d=function(){n[w]=i,N.unshift(i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var l,c,f=o(n.___before___);try{for(f.s();!(l=f.n()).done;){var v=l.value;v(n,i,N,n,r)}}catch(e){f.e(e)}finally{f.f()}if(new.target)c=e(n[k][i],r);else{var d=n[k][i];c=u?d.apply(s||n,r):d.apply(void 0,r)}var h,p=o(n.___after___);try{for(p.s();!(h=p.n()).done;){var b=h.value;b(n,i,N,n,r)}}catch(e){p.e(e)}finally{p.f()}return n[w]=null,N.shift(),c};(d[g]=d[g]||new WeakMap).set(n,i),d[T]=function(e){var t=d[g].get(n);return n[t][e]};var h=t.make(d);return c.set(i,h),h}return n[i]},set:function(e,r,i){if(r===v)return!0;if(void 0!==n[d][r]&&n[d][r]===i)return!0;if("string"==typeof r&&"___"===r.substring(0,3)&&"___"===r.slice(-3))return!0;if(e[r]===i)return!0;for(var a in i&&i instanceof Object&&(M.filter((function(e){return n instanceof e})).length||!Object.isExtensible(n)||Object.isSealed(n)||n[E]||(i=t.makeBindable(i))),n[d][r]=i,n[b])n[b][a]&&n[b][a](i,r,e,!1);var u=!1;if(r in n[h]){var s,l=o(n[h][r]);try{for(l.s();!(s=l.n()).done;)!1===(0,s.value)(i,r,e,!1,e[r])&&(u=!0)}catch(e){l.e(e)}finally{l.f()}}if(delete n[d][r],!u){var c=Object.getOwnPropertyDescriptor(e,r);e instanceof File&&"lastModifiedDate"==r||c&&!c.writable||e[r]!==i||(e[r]=i)}var f=Reflect.set(e,r,i);if(Array.isArray(e)&&n[h].length)for(var p in n[h].length)(0,n[h].length[p])(e.length,"length",e,!1,e.length);return f},construct:function(r,o){var a="constructor";for(var u in r.___before___)r.___before___[u](r,a,n[_],void 0,o);var s=t.make(e(r[v],i(o)));for(var l in r.___after___)r.___after___[l](r,a,n[_],s,o);return s},getPrototypeOf:function(e){return j in n?n[j]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){if(!(t in e))return!0;if(l.has(t)){var r=l.get(t);if(r&&!r.configurable)return!1;l.delete(t)}for(var i in n[b])n[b][i](void 0,t,e,!0,e[t]);if(t in n[h])for(var o in n[h][t])n[h][t][o]&&n[h][t][o](void 0,t,e,!0,e[t]);return delete e[t],!0}};return n[E]&&delete x.get,Object.defineProperty(n,f,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(n,x)}),n[f]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map((function(t){return delete e[t]}))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)})(e[O],e[h],e[b],e.___after___,e.___before___)}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),o=i[0];i.length;){if(r&&1===i.length){var a=e.NoGetters?this.make(e):e;return[a,i.shift(),o]}!(!(n=i.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=e.NoGetters?this.make(e[n]):e[n]}return[this.make(e),n,o]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return setTimeout((function(){return e.apply(void 0,r)}),t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout((function(){n.throttles.set(e,!1)}),t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout((function(){return e.apply(void 0,i)}),t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame((function(){return e.apply(void 0,n)}))}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=window.requestIdleCallback||requestAnimationFrame;i((function(){return e.apply(void 0,n)}))}}}],(r=null)&&l(n.prototype,r),a&&l(n,a),t}();t.Bindable=x,c(x,"waiters",new WeakMap),c(x,"throttles",new WeakMap),Object.defineProperty(x,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.defineProperty(x,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:E}),Object.defineProperty(x,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:j}),Object.defineProperty(x,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:T})}()})),require.register("curvature/base/Cache.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;n&&(i=1e3*n+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(r)||this.buckets.set(r,new Map);var o=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:n,bucket:r}});document.dispatchEvent(o)&&this.buckets.get(r).set(e,{value:t,expiration:i})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",r=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:n}});if(!document.dispatchEvent(r))return t;if(this.buckets&&this.buckets.has(n)&&this.buckets.get(n).has(e)){var i=this.buckets.get(n).get(e);if(0===i.expiration||i.expiration>(new Date).getTime())return this.buckets.get(n).get(e).value}return t}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}();t.Cache=n}()})),require.register("curvature/base/Config.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r={};try{r=n("/Config").Config||{}}catch(e){!0===window.devMode&&console.error(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var i=t[r];for(var o in"string"==typeof i&&(i=JSON.parse(i)),i){var a=i[o];return this.configs[o]=a}}return this}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}();t.Config=i,Object.defineProperty(i,"configs",{configurable:!1,enumerable:!1,writable:!1,value:r})}()})),require.register("curvature/base/Dom.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"mapTags",value:function(e,t,n,r,i){var o=[],a=!0;r&&(a=!1);var u=!1,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return i&&e===i&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;s.nextNode();)o.push(n(s.currentNode,s));return o}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,(function(e){e.dispatchEvent(n)}))}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}();t.Dom=n}()})),require.register("curvature/base/Mixin.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=n("./Bindable");function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=Symbol("constructor"),y=(Symbol("mixinList"),function(){function t(){h(this,t)}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(t,null,[{key:"from",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var u=function(e){s(a,e);var n=c(a);function a(){var e;h(this,a);for(var u=arguments.length,s=new Array(u),l=0;l<u;l++)s[l]=arguments[l];var c,d=e=n.call.apply(n,[this].concat(s)),p=o(r);try{for(p.s();!(c=p.n()).done;){var b=c.value;switch(b[t.Constructor]&&b[t.Constructor].apply(v(e)),i(b)){case"object":t.mixObject(b,v(e))}}}catch(e){p.e(e)}finally{p.f()}return f(e,d)}return a}(e);return u}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.map((function(n){switch(i(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)}))}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[Object].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;"function"!=typeof e[i]?t[i]=e[i]:t[i]=e[i].bind(t)}}catch(e){r.e(e)}finally{r.f()}var a,u=o(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var i=n.value;t.prototype[i]=e.prototype[i].bind(t.prototype)}}catch(e){r.e(e)}finally{r.f()}var a,u=o(Object.getOwnPropertySymbols(e.prototype));try{for(u.s();!(a=u.n()).done;){var s=a.value;t.prototype[s]=e.prototype[s].bind(t.prototype)}}catch(e){u.e(e)}finally{u.f()}var l,c=o(Object.getOwnPropertyNames(e));try{var f=function(){var n=l.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,i=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),i.apply(void 0,arguments)}};for(c.s();!(l=c.n()).done;)f()}catch(e){c.e(e)}finally{c.f()}var v,d=o(Object.getOwnPropertySymbols(e));try{var h=function(){var n=v.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,i=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),i.apply(void 0,arguments)}};for(d.s();!(v=d.n()).done;)h()}catch(e){d.e(e)}finally{d.f()}}},{key:"mix",value:function(t){for(var n={},i={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),s=Object.getOwnPropertyNames(e),l=/^(before|after)__(.+)/,c=o(s);try{var f=function(){var i=t.value,o=i.match(l);if(o){switch(o[1]){case"before":a.___before((function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))}));break;case"after":a.___after((function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))}))}return"continue"}return n[i]||"function"!=typeof e[i]?"continue":void(n[i]=e[i])};for(c.s();!(t=c.n()).done;)f()}catch(e){c.e(e)}finally{c.f()}var v,d=o(u);try{var h=function(){var t=v.value,n=t.match(l);if(n){switch(n[1]){case"before":a.___before((function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))}));break;case"after":a.___after((function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))}))}return"continue"}return i[t]||"function"!=typeof e.prototype[t]?"continue":void(i[t]=e.prototype[t])};for(d.s();!(v=d.n()).done;)h()}catch(e){d.e(e)}finally{d.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var l in n)t[l]=n[l].bind(t);var c=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i[e].apply(this,n)}};for(var f in i)c(f);return a}}]),t}());t.Mixin=y,y.Constructor=b}()})),require.register("curvature/base/Router.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e=n("./View"),r=(n("./Cache"),n("./Config")),i=n("./Routes");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Symbol("NotFound"),l=Symbol("Internal"),c=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a,l;return n=t,l=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;r.addEventListener(n,(function(){t.listen(e)}))}},{key:"listen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){for(var r in n.preventDefault(),n.state&&"routedId"in n.state?n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e),t.query)delete t.query[r];Object.assign(t.query,t.queryOver({}))};window.addEventListener("popstate",r),window.addEventListener("cvUrlChanged",r);var i="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(i+=location.hash),this.go(!1!==i?i:"/")}},{key:"go",value:function(e,t){var n=r.Config.get("title");for(var i in n&&(document.title=n),"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState({routedId:this.routeCount,prev:this.prevPath,url:location.pathname},null,e):location.pathname!==e&&history.pushState({routedId:++this.routeCount,prev:this.prevPath,url:location.pathname},null,e),t||(!1===t&&(this.path=null),"#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged"))),this.query)delete this.query[i];Object.assign(this.query,this.queryOver({})),this.prevPath=e}},{key:"match",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==t||o){this.queryString=location.search,this.path=t;var a=this.prevPath,u=n.args.content,l=this.routes||n.routes||i.Routes.dump();for(var c in new URLSearchParams(location.search),this.query)delete this.query[c];Object.assign(this.query,this.queryOver({}));var f={},v=!1,d="";for(var h in t=t.substr(1).split("/"),this.query)f[h]=this.query[h];e:for(var p in l){var b=p.split("/");if(!(b.length<t.length&&"*"!==b[b.length-1])){for(var y in b)if("%"==b[y].substr(0,1)){var m=null,g=/^%(\w+)\??/.exec(b[y]);if(g&&g[1]&&(m=g[1]),!m)throw new Error("".concat(b[y],' is not a valid argument segment in route "').concat(p,'"'));if(t[y])f[m]=t[y];else{if("?"!=b[y].substr(b[y].length-1,1))continue e;f[m]=""}}else if("*"!==b[y]&&t[y]!==b[y])continue e;v=p,d=l[p],"*"===b[b.length-1]&&(f.pathparts=t.slice(b.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:a,root:n,selected:v,routes:l}});if(document.dispatchEvent(w)){if(!o&&n&&u&&d instanceof Object&&u instanceof d&&!(d instanceof Promise)&&u.update(f))return n.args.content=u,!0;try{v in l||(l[v]=l[s]);var _=function(t){return"function"==typeof l[t]?l[t].prototype instanceof e.View?new l[t](f):l[t](f):l[t]};return!1===(d=_(v))&&(d=_(s)),d instanceof Promise?d.then((function(e){r.update(n,t,e,l,v,f,o)})).catch((function(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:l,selected:v}})),r.update(n,t,window.devMode?String(e):"Error: 500",l,v,f,o),e})):this.update(n,t,d,l,v,f,o)}catch(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:l,selected:v}})),this.update(n,t,window.devMode?String(e):"Error: 500",l,v,f,o),e}}}}},{key:"update",value:function(t,n,r,i,o,a,u){if(t){var s=this.prevPath,l=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:i,selected:o}});!1!==r&&(t.args.content instanceof e.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(l)&&(t.args.content=r),r instanceof e.View&&(r.pause(!1),r.update(a,u)));var c=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:i,selected:o}});document.dispatchEvent(c)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new URLSearchParams(location.search),r={},i={},a=o(n);try{for(a.s();!(e=a.n()).done;){var u=e.value;i[u[0]]=u[1]}}catch(e){a.e(e)}finally{a.f()}return delete(r=Object.assign(r,i,t)).api,r}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var i in t||(r=this.queryOver(e)),r)""!==r[i]&&n.push(i+"="+encodeURIComponent(r[i]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var i=this.queryToString(r,!0);this.go(location.pathname+(i?"?"+i:""),n)}}],(a=null)&&u(n.prototype,a),l&&u(n,l),t}();t.Router=c,Object.defineProperty(c,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(c,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(c,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(c,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(c,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(c,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:l}),Object.defineProperty(c,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:s})}()})),require.register("curvature/base/Routes.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var r={};try{Object.assign(r,n("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"get",value:function(e){return this.routes[e]}},{key:"dump",value:function(){return this.routes}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}();t.Routes=i,Object.defineProperty(i,"routes",{configurable:!1,enumerable:!1,writable:!1,value:r})}()})),require.register("curvature/base/RuleSet.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;n("./Dom");var e=n("./Tag"),r=n("./View");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a,u;return n=t,u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i,a=this.globalRules[n][r],u=this.wrap(e,a,t),s=e.querySelectorAll(n),l=o(s);try{for(l.s();!(i=l.n()).done;){var c=i.value;u(c)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=n;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(o=function(){return n}),function(t){if(void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!t.___cvApplied___.has(n)){var a,u;i&&(a=u=i,i.viewList&&(u=i.viewList.parent));var s,l=new e.Tag(t,u,null,void 0,a),c=l.element.parentNode,f=l.element.nextSibling,v=o(l);if(!1!==v&&t.___cvApplied___.add(n),v instanceof HTMLElement&&(v=new e.Tag(v)),v instanceof e.Tag){if(!v.element.contains(l.element)){for(;l.element.firstChild;)v.element.appendChild(l.element.firstChild);l.remove()}f?c.insertBefore(v.element,f):c.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof r.View&&(v=new v({},i)),v instanceof r.View&&(i&&(i.cleanup.push((s=v,function(){s.remove()})),i.cleanup.push(i.args.bindTo((function(e,t,n){n[t]=e,v.args[t]=e}))),i.cleanup.push(v.args.bindTo((function(e,t,n,r){n[t]=e,i.args[t]=e})))),l.clear(),v.render(l.element))}}}}],(a=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var i in this.rules[r]){var a,u=this.rules[r][i],s=t.wrap(e,u,n),l=e.querySelectorAll(r),c=o(l);try{for(c.s();!(a=c.n()).done;){var f=a.value;s(f)}}catch(e){c.e(e)}finally{c.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var n=i(t[e],2),r=n[0];if(n[1],this.rules[r])for(var o in this.rules[r])delete this.rules[r][o]}}}])&&s(n.prototype,a),u&&s(n,u),t}();t.RuleSet=l}()})),require.register("curvature/base/SetMap.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,i,o){return(e=n()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=void 0;var s=function(){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n="_map",r=new Map,n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var n,r,a;return n=t,(r=[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}(this.get(e));try{for(n.s();!(t=n.n()).done;)return t.value}catch(e){n.e(e)}finally{n.f()}}},{key:"add",value:function(e,t){var n=this._map.get(e);return n||this._map.set(e,n=new Set),n.add(t)}},{key:"remove",value:function(e,t){var n=this._map.get(e);if(n){var r=n.delete(t);return n.size||this._map.delete(e),r}}},{key:"values",value:function(){return e(Set,i(i(this._map.values()).map((function(e){return i(e.values())}))))}}])&&u(n.prototype,r),a&&u(n,a),t}();t.SetMap=s}()})),require.register("curvature/base/Tag.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(n,r,i,o,a){var u,s=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n){var l=document.createRange().createContextualFragment(n);n=l.firstChild}return this.element=e.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=a,this.ref=i,this.index=o,this.cleanup=[],this[e.Bindable.OnAllGet]=function(e){return"function"==typeof s[e]?s[e]:s.node&&"function"==typeof s.node[e]?function(){var t;return(t=s.node)[e].apply(t,arguments)}:s.node&&e in s.node?s.node[e]:s[e]},this.style=(u=this,e.Bindable.make((function(e){if(u.node)for(var t in e)"-"===t[0]?u.node.style.setProperty(t,e[t]):u.node.style[t]=e[t]}))),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo((function(e,t){s.element.style[t]=e})),this.proxy.bindTo((function(e,t){return t in n&&(n[t]=e),!1})),this.proxy}var n,i,o;return n=t,(i=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t])}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var i=function(){r.removeEventListener(e,t,n)},o=function(){i(),i=function(){return console.warn("Already removed!")}};return this.parent.onRemove((function(){return o()})),o}}])&&r(n.prototype,i),o&&r(n,o),t}();t.Tag=i}()})),require.register("curvature/base/View.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var r=n("./Bindable"),i=n("./ViewList"),o=n("./Router"),a=n("./Dom"),u=n("./Tag"),s=n("./Bag"),l=n("./RuleSet"),c=n("./Mixin"),f=(n("../mixin/PromiseMixin"),n("../mixin/EventTargetMixin"));function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function p(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?O(t):n}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=Symbol("dontParse"),A=Symbol("expandBind"),T=Symbol("uuid"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(b,e);var t,c,f,p=w(b);function b(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(this,b),e=p.call(this,t,n),Object.defineProperty(O(e),"args",{value:r.Bindable.make(t)}),Object.defineProperty(O(e),T,{value:e.constructor.uuid()}),Object.defineProperty(O(e),"nodesAttached",{value:new s.Bag((function(e,t,n){}))}),Object.defineProperty(O(e),"nodesDetached",{value:new s.Bag((function(e,t,n){}))}),Object.defineProperty(O(e),"_onRemove",{value:new s.Bag((function(e,t,n){}))}),Object.defineProperty(O(e),"cleanup",{value:[]}),Object.defineProperty(O(e),"parent",{value:n}),Object.defineProperty(O(e),"views",{value:new Map}),Object.defineProperty(O(e),"viewLists",{value:new Map}),Object.defineProperty(O(e),"withViews",{value:new Map}),Object.defineProperty(O(e),"tags",{value:r.Bindable.make({})}),Object.defineProperty(O(e),"nodes",{value:r.Bindable.make([])}),Object.defineProperty(O(e),"timeouts",{value:new Map}),Object.defineProperty(O(e),"intervals",{value:[]}),Object.defineProperty(O(e),"frames",{value:[]}),Object.defineProperty(O(e),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(O(e),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(O(e),"subBindings",{value:{}}),Object.defineProperty(O(e),"templates",{value:{}}),Object.defineProperty(O(e),"eventCleanup",{value:[]}),Object.defineProperty(O(e),"unpauseCallbacks",{value:new Map}),Object.defineProperty(O(e),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(O(e),"rendered",{value:new Promise((function(t,n){return Object.defineProperty(O(e),"renderComplete",{value:t})}))}),e.template="",e.firstNode=null,e.lastNode=null,e.viewList=null,e.mainView=null,e.preserve=!1,e.removed=!1,e}return t=b,c=[{key:"_id",get:function(){return this[T]}},{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0};return requestAnimationFrame((function(){return function r(i){t.removed||n||(t.paused||e(Date.now()),requestAnimationFrame(r))}(Date.now())})),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame((function(){return e(Date.now())}))}},{key:"onIdle",value:function(e){return requestIdleCallback((function(){return e(Date.now())}))}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},i=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},o=setTimeout(i,e);return r.callback=i,r.timeout=o,this.timeouts.set(r.timeout,r),o}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,n=h(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=(r[0],r[1]);clearTimeout(i.timeout),this.timeouts.delete(i.timeout)}}catch(e){n.e(e)}finally{n.f()}}))},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])}))},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,n=h(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=(r[0],r[1]);i.fired?this.timeouts.delete(i.timeout):(clearTimeout(i.timeout),i.paused=!0,i.time=Math.max(0,i.time-(Date.now()-i.created)))}}catch(e){n.e(e)}finally{n.f()}for(var o in this.intervals)clearInterval(this.intervals[o].timeout)}else{var a,u=h(this.timeouts);try{for(u.s();!(a=u.n()).done;){var s=d(a.value,2),l=(s[0],s[1]);l.paused&&(l.fired?this.timeouts.delete(l.timeout):(l.timeout=setTimeout(l.callback,l.time),l.paused=!1))}}catch(e){u.e(e)}finally{u.f()}for(var c in this.intervals)this.intervals[c].timeout.paused&&(this.intervals[c].timeout.paused=!1,this.intervals[c].timeout=setInterval(this.intervals[c].callback,this.intervals[c].time));var f,v=h(this.unpauseCallbacks);try{for(v.s();!(f=v.n()).done;){var p=d(f.value,2),b=p[1];b()}}catch(e){v.e(e)}finally{v.f()}this.unpauseCallbacks.clear()}var y,m=h(this.viewLists);try{for(m.s();!(y=m.n()).done;){var g=d(y.value,2),w=(g[0],g[1]);w.pause(!!e)}}catch(e){m.e(e)}finally{m.f()}for(var _ in this.tags)if(Array.isArray(this.tags[_]))for(var O in this.tags[_])this.tags[_][O].pause(!!e);else this.tags[_].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof b&&(n=n.firstNode.parentNode),r instanceof b&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);this.dispatchEvent(new CustomEvent("render"));var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):b.templates.has(this.template),o=i?this.template instanceof DocumentFragment?i:b.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||b.templates.set(this.template,o.cloneNode(!0)),this.mainView||this.preRuleSet.apply(o,this),this.mapTags(o),this.mainView||this.ruleSet.apply(o,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(v(Array.from(o.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var a=n.getRootNode(),u=!1;if(a.isConnected&&(u=!0),r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(o,this.lastNode),u)this.attached(a,n),this.dispatchAttached(a,n);else{var s=function e(r){r.target.isConnected&&(t.attached(a,n),t.dispatchAttached(a,n),n.removeEventListener("cvDomAttached",e))};n.addEventListener("cvDomAttached",s)}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:n||this,node:t,root:e,mainView:this}}));var r=this.nodesAttached.items();for(var i in r)r[i](e,t);this.dispatchDomAttached(n)}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter((function(e){return e.nodeType!==Node.COMMENT_NODE})).map((function(n){n.matches&&(a.Dom.mapTags(n,!1,(function(n,r){n.matches&&n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}}))})),n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}})))}))}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.nodesDetached.items();for(var i in r)r[i]()}if(n.append.apply(n,v(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var o=e.getRootNode();o.isConnected&&(this.attached(o,e),this.dispatchAttached(o,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;a.Dom.mapTags(e,!1,(function(e,n){e[j]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)}))}},{key:"mapExpandableTag",value:function(e){var t=e[A];t&&(t(),e[A]=!1);var n=d(r.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),i=n[0],o=n[1];return e.removeAttribute("cv-expand"),i[o]||(i[o]={}),i[o]=r.Bindable.make(i[o]),this.onRemove(e[A]=i[o].bindTo((function(t,n,r,i,o){i||void 0===t?e.removeAttribute(n,t):null!==t?e.setAttribute(n,t):e.setAttribute(n,"")}))),e}},{key:"compileExpandableTag",value:function(e){return function(t){var n=e.cloneNode(!0),i=n.getAttribute("cv-expand"),o=r.Bindable.make(t.args[i]||{});n.removeAttribute("cv-expand");var a=function(e){if("name"===e||"type"===e)return"continue";var i=o.bindTo(e,function(e,t){return function(n){e.setAttribute(t,n)}}(n,e));t.onRemove((function(){i(),o.isBound()&&r.Bindable.clearBindings(o)}))};for(var u in o)a(u);return n}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(e){var t=e.getAttribute("cv-attr").split(",").map((function(e){return e.split(":")}));return e.removeAttribute("cv-attr"),function(n){var i=e.cloneNode(!0),o=function(e){var o=t[e][1]||t[e][0],a=d(r.Bindable.resolve(n.args,o,!0),2),u=a[0],s=a[1],l=t[e][0];n.onRemove(u.bindTo(s,(function(e,t,n,r){r||void 0===e?i.removeAttribute(l,e):null!==e?i.setAttribute(l,e):i.setAttribute(l,"")})))};for(var a in t)o(a);return i}}},{key:"mapInterpolatableTag",value:function(e){var t=this,n=this.interpolateRegex;if(e.nodeType===Node.TEXT_NODE){var i=e.nodeValue;if(!this.interpolatable(i))return e;for(var o,a=0,s=function(){var n=o[2],s=!1,l=!1,c=n.split("|"),f=!1;if(c.length>1&&(f=t.stringTransformer(c.slice(1)),n=c[0]),"$$"===n.substr(0,2)&&(s=!0,l=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(s=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var v=i.substring(a,o.index);a=o.index+o[1].length;var h=document.createTextNode(v);h[j]=!0,e.parentNode.insertBefore(h,e);var p=void 0;(p=s?document.createElement("div"):document.createTextNode(""))[j]=!0;var y=t.args,m=n;if(n.match(/\./)){var g=d(r.Bindable.resolve(t.args,n,!0),2);y=g[0],m=g[1]}e.parentNode.insertBefore(p,e);var w=y.bindTo(m,(function(n,r,i){if(i[r]!==n&&(i[r]instanceof b||i[r]instanceof Node||i[r]instanceof u.Tag)&&(i[r].preserve||i[r].remove()),p.nodeValue="",l&&!(n instanceof b)){var o=n;(n=new b(t.args,t)).template=o}if(f&&(n=f(n)),n instanceof b){var a=function(e,r){n.dispatchDomAttached(t)};t.nodesAttached.add(a),n.render(e.parentNode,p);var c=function(){n.preserve||n.remove()};t.onRemove(c),n.onRemove((function(){t.nodesAttached.remove(a),t._onRemove.remove(c)}))}else n instanceof Node?(e.parentNode.insertBefore(n,p),t.onRemove((function(){return n.remove()}))):n instanceof u.Tag?(e.parentNode.insertBefore(n.node,p),t.onRemove((function(){return n.remove()}))):(n instanceof Object&&n.__toString instanceof Function&&(n=n.__toString()),s?p.innerHTML=n:p.nodeValue=n);p[j]=!0}));t.onRemove(w)};o=n.exec(i);)s();var l=i.substring(a),c=document.createTextNode(l);c[j]=!0,e.parentNode.insertBefore(c,e),e.nodeValue=""}else if(e.nodeType===Node.ELEMENT_NODE)for(var f=function(i){if(!t.interpolatable(e.attributes[i].value))return"continue";for(var o=0,a=void 0,u=e.attributes[i].value,s=e.attributes[i],l={},c=[];a=n.exec(u);)c.push(u.substring(o,a.index)),l[a[2]]||(l[a[2]]=[]),l[a[2]].push(c.length),c.push(a[1]),o=a.index+a[1].length;c.push(u.substring(o));var f=function(n){var i=t.args,o=n,a=n.split("|"),u=!1,f=n;if(a.length>1&&(u=t.stringTransformer(a.slice(1)),o=a[0]),o.match(/\./)){var v=d(r.Bindable.resolve(t.args,o,!0),2);i=v[0],o=v[1]}l[f],t.onRemove(i.bindTo(o,(function(n,r,i,a){for(var v in u&&(n=u(n)),l)for(var d in l[f])c[l[f][d]]=i[v],r===o&&(c[l[f][d]]=n);t.paused?t.unpauseCallbacks.set(s,(function(){return e.setAttribute(s.name,c.join(""))})):e.setAttribute(s.name,c.join(""))}))),t.onRemove((function(){i.isBound()||r.Bindable.clearBindings(i)}))};for(var v in l)f(v)},v=0;v<e.attributes.length;v++)f(v);return e}},{key:"mapRefTag",value:function(e){var t=d(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],i=void 0===r?null:r,o=t[2],a=void 0===o?null:o,s=u.Tag;i&&(s=this.stringToClass(i)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove((function(){e.___tag___=null,e.remove()}));var l=this;this.viewList&&(l=this.viewList.parent);var c=new s(e,this,n,void 0,this);for(e.___tag___=c,this.tags[n]=c;l;){l.parent;var f=this.args[a];void 0!==f?(l.tags[n]||(l.tags[n]=[]),l.tags[n][f]=c):l.tags[n]=c,l=l.parent}return e}},{key:"mapBindTag",value:function(e){var t=this,n=e.getAttribute("cv-bind"),i=this.args,o=n,s=null;if(n.match(/\./)){var l=d(r.Bindable.resolve(this.args,n,!0),3);i=l[0],o=l[1],s=l[2]}i!==this.args&&(this.subBindings[n]=this.subBindings[n]||[],this.onRemove(this.args.bindTo(s,(function(){for(;t.subBindings.length;)t.subBindings.shift()()}))));var c=!1;"$"===o.substr(0,1)&&(o=o.substr(1),c=!0);var f=i.bindTo(o,(function(n,r,i,o,s){(s instanceof b||s instanceof Node||s instanceof u.Tag)&&s!==n&&s.remove();var l=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var f=e.getAttribute("type");if(f&&"checkbox"===f.toLowerCase())e.checked=!!n,e.dispatchEvent(l);else if(f&&"radio"===f.toLowerCase())e.checked=n==e.value,e.dispatchEvent(l);else if("file"!==f){if("SELECT"===e.tagName){var v=function(){for(var t=0;t<e.options.length;t++)e.options[t].value==n&&(e.selectedIndex=t)};v(),t.nodesAttached.add(v)}else e.value=null==n?"":n;e.dispatchEvent(l)}}else if(n instanceof b){var d,p=h(e.childNodes);try{for(p.s();!(d=p.n()).done;)d.value.remove()}catch(e){p.e(e)}finally{p.f()}var y=function(e){n.dispatchDomAttached(t)};t.nodesAttached.add(y),n.render(e),n.onRemove((function(){return t.nodesAttached.remove(y)}))}else if(n instanceof Node)e.insert(n);else if(n instanceof u.Tag)e.append(n.node);else if(c){if(e.innerHTML!==n){if(n=String(n),e.innerHTML===n.substring(0,e.innerHTML.length))e.innerHTML+=n.substring(e.innerHTML.length);else{var m,g=h(e.childNodes);try{for(g.s();!(m=g.n()).done;)m.value.remove()}catch(e){g.e(e)}finally{g.f()}e.innerHTML=n}a.Dom.mapTags(e,!1,(function(e){return e[j]=!0}))}}else if(e.textContent!==n){var w,_=h(e.childNodes);try{for(_.s();!(w=_.n()).done;)w.value.remove()}catch(e){_.e(e)}finally{_.f()}e.textContent=n}}));i!==this.args&&this.subBindings[n].push(f),this.onRemove(f);var v=e.getAttribute("type"),p=e.getAttribute("multiple"),y=function(t){if(t.target===e)if(v&&"checkbox"===v.toLowerCase())e.checked?i[o]=t.target.getAttribute("value"):i[o]=!1;else if(t.target.matches("[contenteditable=true]"))i[o]=t.target.innerHTML;else if("file"===v&&p){var n=Array.from(t.target.files),a=i[o]||r.Bindable.onDeck(i,o);if(a&&n.length){var u=function(e){if(n[e]!==a[e])return n[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},a[e]=n[e],"break"};for(var s in n)if("break"===u(s))break}else i[o]=n}else if("file"!==v||p)i[o]=t.target.value;else{var l=t.target.files.item(0);l.toJSON=function(){return{name:l.name,size:l.size,type:l.type,date:l.lastModified}},i[o]=l}};return"file"===v||"radio"===v?e.addEventListener("change",y):(e.addEventListener("input",y),e.addEventListener("change",y),e.addEventListener("value-changed",y)),this.onRemove((function(){"file"===v||"radio"===v?e.removeEventListener("change",y):(e.removeEventListener("input",y),e.removeEventListener("change",y),e.removeEventListener("value-changed",y))})),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map((function(e){return e.split(":")})).map((function(n){var r,i=(n=n.map((function(e){return e.trim()}))).length,o=String(n.shift()).trim(),a=String(n.shift()||o).trim(),u=String(n.shift()||"").trim(),s=[],l=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);l?(a=l[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),l[2]&&(s=l[2].split(",").map((function(e){return e.trim()}))),l.length):s.push("$event"),o&&1!==i||(o=a);for(var c=t;c&&("function"!=typeof c[a]||"break"!==function(){var e=c,t=a;return r=function(){e[t].apply(e,arguments)},"break"}())&&c.parent;)c=c.parent;var f=function(n){var i=s.map((function(r){var i;return Number(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?c:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(i=/^['"]([\w-]+?)["']$/.exec(r))?i[1]:void 0}));if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r.apply(void 0,v(i))},d={};switch(u.includes("p")?d.passive=!0:u.includes("P")&&(d.passive=!1),u.includes("c")?d.capture=!0:u.includes("C")&&(d.capture=!1),u.includes("o")?d.once=!0:u.includes("O")&&(d.once=!1),o){case"_init":f();break;case"_attach":t.nodesAttached.add(f);break;case"_detach":t.nodesDetached.add(f);break;default:e.addEventListener(o,f,d),t.onRemove((function(){e.removeEventListener(o,f,d)}))}return[o,a,s]})),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?o.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(n){var r=e.cloneNode(!0);return r.setAttribute("href",t),r}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(e){var t=this,n=e.getAttribute("cv-with"),i=e.getAttribute("cv-carry"),o=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var a=o?this.stringToClass(o):b,u=new DocumentFragment;v(e.childNodes).map((function(e){return u.appendChild(e)}));var s=[];i&&(s=i.split(",").map((function(e){return e.trim()})));var l=this.args.bindTo(n,(function(n,i,o,l){for(t.withViews.has(e)&&t.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var c=new a({},t);t.onRemove(function(e){return function(){e.remove()}}(c)),c.template=u;var f=function(e){var n=t.args.bindTo(s[e],(function(e,t){c.args[t]=e}));c.onRemove(n),t.onRemove((function(){n(),c.remove()}))};for(var v in s)f(v);var d=function(e){var i=n.bindTo(e,(function(e,t){c.args[t]=e}));c.args.bindTo(e,(function(e,t){n[t]=e})),t.onRemove((function(){i(),n.isBound()||r.Bindable.clearBindings(n),c.remove()})),c.onRemove((function(){i(),n.isBound()||r.Bindable.clearBindings(n)}))};for(var h in n)d(h);c.render(e),t.withViews.set(e,c)}));return this.onRemove((function(){t.withViews.delete(e),l()})),e}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var r=new DocumentFragment;v(e.childNodes).map((function(e){return r.appendChild(e)}));var i=n.split(":"),o=i.pop()?this.stringToClass(n):b,a=i.shift(),u=new o(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=r,u.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,n=e.getAttribute("cv-each"),r=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var o=r?this.stringToClass(r):b,a=new DocumentFragment;Array.from(e.childNodes).map((function(e){return a.appendChild(e)}));var u=d(n.split(":"),3),s=u[0],l=u[1],c=u[2],f=this.args.bindTo(s,(function(n,r,u,s,f){t.viewLists.has(e)&&t.viewLists.get(e).remove();var v=new i.ViewList(a,l,n,t,c,o),d=function(){return v.remove()};t.onRemove(d),v.onRemove((function(){return t._onRemove.remove(d)}));var h=t.args.bindTo((function(e,t,n,r){"_id"!==t&&(r&&delete v.subArgs[t],v.subArgs[t]=e)})),p=v.args.bindTo((function(e,n,r,i,o){"_id"!==n&&"value"!==n&&"___"!==n.substring(0,3)&&(i&&delete t.args[n],n in t.args&&(t.args[n]=e))}));for(v.onRemove(h),v.onRemove(p),t.onRemove(h),t.onRemove(p);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,v),v.render(e)}));return this.onRemove(f),e}},{key:"mapIfTag",value:function(e){var t=this,n=e,i=n.getAttribute("cv-view"),o=n.getAttribute("cv-if"),a=n.getAttribute("cv-is"),u=!1,s=!1;n.removeAttribute("cv-view"),n.removeAttribute("cv-if"),n.removeAttribute("cv-is");var l=i?this.stringToClass(i):b;"!"===o.substr(0,1)&&(o=o.substr(1),u=!0),"?"===o.substr(0,1)&&(o=o.substr(1),s=!0);var c=new DocumentFragment;Array.from(n.childNodes).map((function(e){return c.appendChild(e)}));var f=this,v=new DocumentFragment,h=new l(this.args,f);this.onRemove(h.tags.bindTo((function(e,n){t.tags[n]=e}))),h.template=c;var p=f.args,y=o;if(o.match(/\./)){var m=d(r.Bindable.resolve(f.args,o,!0),2);p=m[0],y=m[1]}h.render(v);var g=p.bindTo(y,(function(t,n){var r=t;s&&(t=null!=t),Array.isArray(t)&&(t=!!t.length),u&&(t=!t),t?(null!==a&&r==a||null===a)&&e.appendChild(v):h.nodes.map((function(e){return v.appendChild(e)}))}),{wait:0,children:Array.isArray(p[y])});f.onRemove(g);var w=function(){p.isBound()||r.Bindable.clearBindings(p)};return f.onRemove((function(){g(),w(),f._onRemove.remove(g),f._onRemove.remove(w)})),this.onRemove((function(){h.remove(),f!==t&&f.remove()})),e}},{key:"compileIfTag",value:function(e){var t=e.getAttribute("cv-if"),n=!1;e.removeAttribute("cv-if"),"!"===t.substr(0,1)&&(t=t.substr(1),n=!0);var i=new DocumentFragment;return Array.from(e.childNodes).map((function(e){return i.appendChild(e.cloneNode(!0))})),function(o){var a=e.cloneNode(),u=new DocumentFragment,s=new b({},o);s.template=i,o.syncBind(s);var l=o.args,c=t;if(t.match(/\./)){var f=d(r.Bindable.resolve(o.args,t,!0),2);l=f[0],c=f[1]}var v=!1,h=l.bindTo(c,(function(e,t){if(!v){var r=o.args[c]||n?a:u;return s.render(r),void(v=!0)}Array.isArray(e)&&(e=!!e.length),n&&(e=!e),e?a.appendChild(u):s.nodes.map((function(e){return u.appendChild(e)}))}));o.onRemove(h);var p=function(){l.isBound()||r.Bindable.clearBindings(l)};return s.onRemove((function(){h(),p(),o._onRemove.remove(h),o._onRemove.remove(p)})),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then((function(){return e.remove()})),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var i=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(i),e}},{key:"syncBind",value:function(e){var t=this,n=this.args.bindTo((function(t,n,r,i){"_id"!==n&&e.args[n]!==t&&(e.args[n]=t)})),r=e.args.bindTo((function(e,n,r,i,o){if("_id"!==n){var a=e,u=o;a instanceof b&&(a=a.___ref___),u instanceof b&&(u=u.___ref___),a!==u&&u instanceof b&&o.remove(),n in t.args&&(t.args[n]=e)}}));this.onRemove(n),this.onRemove(r),e.onRemove((function(){t._onRemove.remove(n),t._onRemove.remove(r)}))}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].map((function(e){return e.remove()})),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};t?n():requestAnimationFrame(n);var r,i,o=this._onRemove.items(),a=h(o);try{for(a.s();!(r=a.n()).done;){var u=r.value;this._onRemove.remove(u),u()}}catch(e){a.e(e)}finally{a.f()}for(;i=this.cleanup.shift();)i&&i();var s,l=h(this.viewLists);try{for(l.s();!(s=l.n()).done;){var c=d(s.value,2),f=(c[0],c[1]);f.remove()}}catch(e){l.e(e)}finally{l.f()}this.viewLists.clear();var v,p=h(this.timeouts);try{for(p.s();!(v=p.n()).done;){var b=d(v.value,2),y=(b[0],b[1]);clearTimeout(y.timeout),this.timeouts.delete(y.timeout)}}catch(e){p.e(e)}finally{p.f()}for(var m in this.intervals)clearInterval(this.intervals[m].timeout),delete this.intervals[m];for(var m in this.frames)this.frames[m](),delete this.frames[m];this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new u.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new u.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter((function(e){return e.querySelectorAll})).map((function(t){return v(t.querySelectorAll(e))})).flat().map((function(e){return new u.Tag(e,t,void 0,void 0,t)}))}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var i=t,o=e[r];i&&!i[o];)i=i.parent;if(!i)return;n=i[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(b.refClasses.has(e))return b.refClasses.get(e);var t=e.split("/"),r=t[t.length-1],i=n(e);return b.refClasses.set(e,i[r]),i[r]}},{key:"preventParsing",value:function(e){e[j]=!0}},{key:"toString",value:function(){return this.nodes.map((function(e){return e.outerHTML})).join(" ")}},{key:"listen",value:function(e,t,n,r){var i=this;if("string"==typeof e&&(r=n,n=t,t=e,e=this),e instanceof b)return this.listen(e.nodes,t,n,r);if(Array.isArray(e)){var o=e.map((function(e){return i.listen(e,t,n,r)}));return function(){return o.map((function(e){return e()}))}}if(e instanceof u.Tag)return this.listen(e.element,t,n,r);e.addEventListener(t,n,r);var a=function(){return e.removeEventListener(t,n,r)},s=function(){a(),a=function(){}};return this.onRemove((function(){return s()})),s}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],f=[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new this(t,n);return r.template=e,r}},{key:"isView",value:function(){return b}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}}],c&&m(t.prototype,c),f&&m(t,f),b}(c.Mixin.with(f.EventTargetMixin));t.View=S,Object.defineProperty(S,"templates",{value:new Map}),Object.defineProperty(S,"refClasses",{value:new Map})}()})),require.register("curvature/base/ViewList.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./SetMap"),i=n("./View"),o=n("./Bag");function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function t(n,r,a,u){var c=this,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;l(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(a||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=v||i.View,this._onRemove=new o.Bag,this.template=n,this.subProperty=r,this.keyProperty=f,this.tag=null,this.paused=!1,this.parent=u,this.rendered=new Promise((function(e,t){Object.defineProperty(c,"renderComplete",{configurable:!1,writable:!0,value:e})})),this.willReRender=!1,this.args.___before((function(e,t,n,r,i){"bindTo"!=t&&(c.paused=!0)})),this.args.___after((function(e,t,n,r,i){"bindTo"!=t&&(c.paused=n.length>1,c.reRender())}));var d=this.args.value.bindTo((function(e,t,n,r){if(!c.paused){var i=t;if("symbol"!==s(t))if(isNaN(t)&&(i="_"+t),r)for(var o in c.views[i]&&c.views[i].remove(),delete c.views[i],c.views)isNaN(o)?c.views[o].args[c.keyProperty]=o.substr(1):c.views[o].args[c.keyProperty]=o;else c.views[i]||c.willReRender?c.views[i]&&c.views[i].args&&(c.views[i].args[c.keyProperty]=t,c.views[i].args[c.subProperty]=e):(cancelAnimationFrame(c.willReRender),c.willReRender=requestAnimationFrame((function(){c.reRender()})))}}));this._onRemove.add(d)}var n,u,f;return n=t,(u=[{key:"render",value:function(e){var t,n=this,r=[],i=a(this.views);try{var o=function(){var n=t.value;n.render(e),r.push(n.rendered.then((function(){return n})))};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}this.tag=e,Promise.all(r).then((function(e){return n.renderComplete(e)})),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],n=new r.SetMap;for(var i in this.views){var o=this.views[i],a=o.args[this.subProperty];n.add(a,o),t[i]=o}var u=[],s=new Set;this.upDebind&&this.upDebind.map((function(e){return e&&e()})),this.downDebind&&this.downDebind.map((function(e){return e&&e()})),this.upDebind=[],this.downDebind=[];var l=1/0,c=1/0,f=function(t){var r=!1,i=t;if(isNaN(i)?i="_"+t:String(i).length&&(i=Number(i)),void 0!==e.args.value[t]&&n.has(e.args.value[t])){var o=n.getOne(e.args.value[t]);o&&(o.args[e.keyProperty]=t,u[i]=o,s.add(o),r=!0,isNaN(i)||(l=Math.min(l,i),i>0&&(c=Math.min(c,i))),n.remove(e.args.value[t],o))}if(!r){var a={},f=u[i]=new e.viewClass(a,e.parent);isNaN(i)||(l=Math.min(l,i),i>0&&(c=Math.min(c,i))),u[i].template=(e.template,e.template),u[i].viewList=e,u[i].args[e.keyProperty]=t,u[i].args[e.subProperty]=e.args.value[t],e.upDebind[i]=a.bindTo(e.subProperty,(function(t,n,r,i){var o=a[e.keyProperty];i?delete e.args.value[o]:e.args.value[o]=t})),e.downDebind[i]=e.subArgs.bindTo((function(e,t,n,r){r?delete a[t]:a[t]=e}));var v=function(){e.upDebind.filter((function(e){return e})).map((function(e){return e()})),e.upDebind.splice(0)},d=function(){e.downDebind.filter((function(e){return e})).map((function(e){return e()})),e.downDebind.splice(0)};f.onRemove((function(){e._onRemove.remove(v),e._onRemove.remove(d),e.upDebind[i]&&e.upDebind[i](),e.downDebind[i]&&e.downDebind[i](),delete e.upDebind[i],delete e.downDebind[i]})),e._onRemove.add(v),e._onRemove.add(d),a[e.subProperty]=e.args.value[t]}};for(var v in this.args.value)f(v);for(var d in t)s.has(t[d])||t[d].remove();if(Array.isArray(this.args.value)){var h=0===l&&void 0!==u[1]&&u.length>1||c===1/0?l:c;this.rendered=function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=u.length-n-1;r>h&&void 0===u[r];)r--;return r<h?Promise.resolve():u[r]===e.views[r]?u[r].firstNode?t(Number(n)+1):(u[r].render(e.tag,u[r+1]),u[r].rendered.then((function(){return t(Number(n)+1)}))):(u[r].render(e.tag,u[r+1]),e.views.splice(r,0,u[r]),u[r].rendered.then((function(){return t(Number(n)+1)})))}(),this.rendered.then((function(){return u.splice(0)}))}else{var p=[],b=Object.assign({},u),y=function(t){if(delete b[t],u[t].firstNode&&u[t]===e.views[t])return"continue";u[t].render(e.tag),p.push(u[t].rendered.then((function(){return u[t]})))};for(var m in u)y(m);for(var g in b)delete this.args.views[g],b.remove();this.rendered=Promise.all(p)}for(var w in u)isNaN(w)?u[w].args[this.keyProperty]=w.substr(1):u[w].args[this.keyProperty]=w;this.views=[].concat(u),s.clear(),this.willReRender=!1,this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&c(n.prototype,u),f&&c(n,f),t}();t.ViewList=f}()})),require.register("curvature/mixin/EventTargetMixin.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var e,r=n("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=Symbol("Target"),a=(i(e={},r.Mixin.Constructor,(function(){try{this[o]=new EventTarget}catch(e){this[o]=document.createDocumentFragment()}})),i(e,"dispatchEvent",(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];(e=this[o]).dispatchEvent.apply(e,n);var a="on".concat(i.type[0].toUpperCase()+i.type.slice(1));return"function"==typeof this[a]&&this[a](i),i.returnValue})),i(e,"addEventListener",(function(){var e;(e=this[o]).addEventListener.apply(e,arguments)})),i(e,"removeEventListener",(function(){var e;(e=this[o]).removeEventListener.apply(e,arguments)})),e);t.EventTargetMixin=a}()})),require.register("curvature/mixin/PromiseMixin.js",(function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,r=n("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=Symbol("Promise"),a=Symbol("Accept"),u=Symbol("Reject"),s=(i(e={},r.Mixin.Constructor,(function(){var e=this;this[o]=new Promise((function(t,n){e[a]=t,e[u]=n}))})),i(e,"then",(function(){var e;return(e=this[o]).then.apply(e,arguments)})),i(e,"catch",(function(){var e;return(e=this[o]).catch.apply(e,arguments)})),i(e,"finally",(function(){var e;return(e=this[o]).finally.apply(e,arguments)})),e);t.PromiseMixin=s,Object.defineProperty(s,"Reject",{value:u}),Object.defineProperty(s,"Accept",{value:a})}()})),require.register("___globals___",(function(e,t,n){}))}(),require("___globals___");
