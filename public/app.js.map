{"version":3,"sources":["node_modules/curvature/base/Bag.js","node_modules/curvature/base/Bindable.js","node_modules/curvature/base/Cache.js","node_modules/curvature/base/Config.js","node_modules/curvature/base/Dom.js","node_modules/curvature/base/Mixin.js","node_modules/curvature/base/Router.js","node_modules/curvature/base/Routes.js","node_modules/curvature/base/RuleSet.js","node_modules/curvature/base/Tag.js","node_modules/curvature/base/View.js","node_modules/curvature/base/ViewList.js","node_modules/subspace-client/Channel.js","node_modules/subspace-client/Socket.js","node_modules/subspace-console/Console.js","node_modules/subspace-console/Path.js","node_modules/subspace-console/Task.js","node_modules/subspace-console/mixin/Target.js","node_modules/subspace-console/mixin/TaskSignals.js","node_modules/subspace-console/view/MeltingText.js","app/Config.js","app/Path.js","app/chat/Chat.js","app/chat/View.js","app/chat/view.tmp.html","app/initialize.js","app/mixin/MixPromise.js","app/mixin/Target.js","app/mixin/TaskSignals.js","app/tasks/Auth.js","app/tasks/Connection.js","app/tasks/Cornfield.js","app/tasks/Countdown.js","app/tasks/Help.js","app/tasks/Login.js","app/tasks/Lower.js","app/tasks/Prefix.js","app/tasks/PublishAjax.js","app/tasks/PublishBytes.js","app/tasks/PublishFile.js","app/tasks/Register.js","app/tasks/RtcClient.js","app/tasks/RtcServer.js","app/tasks/SayAjax.js","app/tasks/SayText.js","app/tasks/Suffix.js","app/tasks/Theme.js","app/tasks/Upper.js","app/tasks/WatchImages.js","app/view/BinaryMessageView.js","app/view/ByteView.js","app/view/MeltingText.js","app/view/TextMessageView.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["socketProtocol","location","protocol","Config","title","socketHost","hostname","Path","countdown","Countdown","upper","Upper","lower","Lower","prefix","Prefix","suffix","Suffix","auth","Auth","pub","PublishBytes","pubajax","PublishAjax","pubfile","PublishFile","say","SayText","images","WatchImages","login","Login","register","Register","rtcc","RtcClient","rtcs","RtcServer","connect","Connection","theme","Theme","Chat","terminal","args","output","push","View","command","template","require","BaseView","console","log","view","Console","path","init","RuleSet","add","wait","Router","promise","Symbol","MixPromise","Mixin","_constructor","instance","Promise","callback","then","target","index","Target","constructor","EventTarget","error","document","createDocumentFragment","x","dispatchEvent","addEventListener","removeEventListener","TaskSignals","status","Reject","Accept","CustomEvent","detail","fetch","response","text","token","print","term","socket","send","Task","Socket","get","env","set","subscribe","event","reconnect","recon","clearTimeout","setTimeout","runScript","prompt","message","channel","origin","originId","originalChannel","packet","localEcho","data","received","JSON","parse","you","postToken","stringify","messageView","TextMessageView","preserve","remove","ArrayBuffer","bytesArray","Uint8Array","user","toString","toUpperCase","padStart","channelName","header","headerBytes","join","match","messageIndex","bytes","Array","from","map","BinaryMessageView","ByteView","separator","slice","accept","resolve","Cornfield","e","m","o","i","c","publish","input","split","shift","toLowerCase","chatMessage","max","interval","Number","count","printErr","reject","timer","setInterval","clearInterval","Help","passwordMode","stack","length","localLock","String","content","_formData","FormData","append","options","method","body","parseInt","channelBytes","Uint16Array","buffer","fileChannel","fileInput","createElement","setAttribute","fileLoaded","click","fileReader","FileReader","field","file","files","name","result","TextDecoder","decode","value","readAsArrayBuffer","pop","rtcConfig","iceServers","peerClient","RTCPeerConnection","candidate","localDescription","state","iceConnectionState","peerClientChannel","createDataChannel","connected","close","createOffer","offer","setLocalDescription","answerString","answer","session","RTCSessionDescription","setRemoteDescription","peerServer","peerServerChannel","offerString","createAnswer","SayAjax","formData","ccCount","ccList","splice","bccCount","bccList","cc","bcc","themeName","inverted","undefined","originalEcho","onMessage","blob","Blob","url","URL","createObjectURL","postRender","img","tags","element","imageLoad","revokeObjectURL","unsubscribe","byte","$view","hue","color","style","MeltingText","last","Date","now","charUp","charMid","charDown","corruptors","maxMaxCorrupt","maxCorrupt","type","onFrame","typewriter","onInterval","selection","window","getSelection","anchorOffset","focusOffset","anchorNode","focusNode","corrupt","bindTo","v","chars","random","Math","charSets","charSet","unshift","substr","onTimeout","scrollY","innerHeight","scrollHeight","scrollTo","top","left","behavior","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","date","round","replace","indexOf","browser","navigator","userAgent","forceRepaint","reloaders","page","reload","stylesheet","call","querySelectorAll","filter","link","val","getAttribute","href","forEach","offsetHeight","javascript","scripts","textScripts","script","srcScripts","src","loaded","all","onLoad","eval","newScript","async","onload","head","appendChild","port","host","server","connection","onmessage","reloader","onerror","readyState","onclose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACloBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACneA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"public/app.js","sourcesContent":["\nrequire.register(\"curvature/base/Bag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bag = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar toId = function toId(_int) {\n  return Number(_int).toString(36);\n};\n\nvar fromId = function fromId(id) {\n  return parseInt(id, 36);\n};\n\nvar Bag = /*#__PURE__*/function () {\n  function Bag() {\n    var changeCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n    _classCallCheck(this, Bag);\n\n    this.meta = Symbol('meta');\n    this.content = new Map();\n    this.list = _Bindable.Bindable.makeBindable({});\n    this.current = 0;\n    this.type = undefined;\n    this.changeCallback = changeCallback;\n  }\n\n  _createClass(Bag, [{\n    key: \"add\",\n    value: function add(item) {\n      if (item === undefined || !(item instanceof Object)) {\n        throw new Error('Only objects may be added to Bags.');\n      }\n\n      if (this.type && !(item instanceof this.type)) {\n        console.error(this.type, item);\n        throw new Error(\"Only objects of type \".concat(this.type, \" may be added to this Bag.\"));\n      }\n\n      if (this.content.has(item)) {\n        return;\n      }\n\n      var id = toId(this.current++);\n      this.content.set(item, id);\n      this.list[id] = item;\n\n      if (this.changeCallback) {\n        this.changeCallback(item, this.meta, Bag.ITEM_ADDED, id);\n      }\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      if (item === undefined || !(item instanceof Object)) {\n        throw new Error('Only objects may be removed from Bags.');\n      }\n\n      if (this.type && !(item instanceof this.type)) {\n        console.error(this.type, item);\n        throw new Error(\"Only objects of type \".concat(this.type, \" may be removed from this Bag.\"));\n      }\n\n      if (!this.content.has(item)) {\n        if (this.changeCallback) {\n          this.changeCallback(item, this.meta, 0, undefined);\n        }\n\n        return false;\n      }\n\n      var id = this.content.get(item);\n      delete this.list[id];\n      this.content[\"delete\"](item);\n\n      if (this.changeCallback) {\n        this.changeCallback(item, this.meta, Bag.ITEM_REMOVED, id);\n      }\n\n      return item;\n    }\n  }, {\n    key: \"items\",\n    value: function items() {\n      return Array.from(this.content.entries()).map(function (entry) {\n        return entry[0];\n      });\n    }\n  }]);\n\n  return Bag;\n}();\n\nexports.Bag = Bag;\nObject.defineProperty(Bag, 'ITEM_ADDED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: 1\n});\nObject.defineProperty(Bag, 'ITEM_REMOVED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: -1\n});\n  })();\n});","\nrequire.register(\"curvature/base/Bindable.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bindable = void 0;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Ref = Symbol('ref');\nvar Deck = Symbol('deck');\nvar Binding = Symbol('binding');\nvar BindingAll = Symbol('bindingAll');\nvar IsBindable = Symbol('isBindable');\nvar Executing = Symbol('executing');\nvar Stack = Symbol('stack');\nvar ObjSymbol = Symbol('object');\nvar Wrapped = Symbol('wrapped');\n\nvar Bindable = /*#__PURE__*/function () {\n  function Bindable() {\n    _classCallCheck(this, Bindable);\n  }\n\n  _createClass(Bindable, null, [{\n    key: \"isBindable\",\n    value: function isBindable(object) {\n      if (!object || !object[Binding]) {\n        return false;\n      }\n\n      return object[Binding] === Bindable;\n    }\n  }, {\n    key: \"onDeck\",\n    value: function onDeck(object, key) {\n      return object[Deck][key] || false;\n    }\n  }, {\n    key: \"ref\",\n    value: function ref(object) {\n      return object[Ref] || false;\n    }\n  }, {\n    key: \"makeBindable\",\n    value: function makeBindable(object) {\n      return this.make(object);\n    }\n  }, {\n    key: \"make\",\n    value: function make(object) {\n      var _this = this;\n\n      if (!object || !['function', 'object'].includes(_typeof(object))) {\n        return object;\n      }\n\n      var win = window || {};\n      var excludedClasses = [win.Node, win.Map, win.Set, win.ResizeObserver, win.MutationObserver, win.PerformanceObserver, win.IntersectionObserver].filter(function (x) {\n        return typeof x === 'function';\n      });\n\n      if (excludedClasses.filter(function (x) {\n        return object instanceof x;\n      }).length || Object.isSealed(object) || !Object.isExtensible(object)) {\n        return object;\n      }\n\n      if (object[Ref]) {\n        return object;\n      }\n\n      if (object[Binding]) {\n        return object;\n      }\n\n      Object.defineProperty(object, Ref, {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: object\n      });\n      Object.defineProperty(object, Deck, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n      Object.defineProperty(object, Binding, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n      Object.defineProperty(object, BindingAll, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, IsBindable, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: Bindable\n      });\n      Object.defineProperty(object, Executing, {\n        enumerable: false,\n        writable: true\n      });\n      Object.defineProperty(object, Stack, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, '___before___', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, '___after___', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, Wrapped, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n\n      var bindTo = function bindTo(property) {\n        var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        var bindToAll = false;\n\n        if (property instanceof Function) {\n          options = callback || {};\n          callback = property;\n          bindToAll = true;\n        }\n\n        if (options.delay >= 0) {\n          callback = _this.wrapDelayCallback(callback, options.delay);\n        }\n\n        if (options.throttle >= 0) {\n          callback = _this.wrapThrottleCallback(callback, options.throttle);\n        }\n\n        if (options.wait >= 0) {\n          callback = _this.wrapWaitCallback(callback, options.wait);\n        }\n\n        if (options.frame) {\n          callback = _this.wrapFrameCallback(callback, options.frame);\n        }\n\n        if (options.idle) {\n          callback = _this.wrapIdleCallback(callback);\n        }\n\n        if (bindToAll) {\n          var _bindIndex = object[BindingAll].length;\n          object[BindingAll].push(callback);\n\n          for (var i in object) {\n            callback(object[i], i, object, false);\n          }\n\n          return function () {\n            delete object[BindingAll][_bindIndex];\n          };\n        }\n\n        if (!object[Binding][property]) {\n          object[Binding][property] = [];\n        }\n\n        var bindIndex = object[Binding][property].length;\n        object[Binding][property].push(callback);\n        callback(object[property], property, object, false);\n        var cleaned = false;\n\n        var debinder = function debinder() {\n          if (cleaned) {\n            return;\n          }\n\n          cleaned = true;\n\n          if (!object[Binding][property]) {\n            return;\n          }\n\n          delete object[Binding][property][bindIndex];\n        };\n\n        if (options.removeWith && options.removeWith instanceof View) {\n          options.removeWith.onRemove(function () {\n            return debinder;\n          });\n        }\n\n        return debinder;\n      };\n\n      Object.defineProperty(object, 'bindTo', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: bindTo\n      });\n\n      var ___before = function ___before(callback) {\n        var beforeIndex = object.___before___.length;\n\n        object.___before___.push(callback);\n\n        var cleaned = false;\n        return function () {\n          if (cleaned) {\n            return;\n          }\n\n          cleaned = true;\n          delete object.___before___[beforeIndex];\n        };\n      };\n\n      var ___after = function ___after(callback) {\n        var afterIndex = object.___after___.length;\n\n        object.___after___.push(callback);\n\n        var cleaned = false;\n        return function () {\n          if (cleaned) {\n            return;\n          }\n\n          cleaned = true;\n          delete object.___after___[afterIndex];\n        };\n      };\n\n      Object.defineProperty(object, 'bindChain', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: function value(path, callback) {\n          var parts = path.split('.');\n          var node = parts.shift();\n          var subParts = parts.slice(0);\n          var debind = [];\n          debind.push(object.bindTo(node, function (v, k, t, d) {\n            var rest = subParts.join('.');\n\n            if (subParts.length === 0) {\n              callback(v, k, t, d);\n              return;\n            }\n\n            if (v === undefined) {\n              v = t[k] = _this.makeBindable({});\n            }\n\n            debind = debind.concat(v.bindChain(rest, callback));\n          })); // console.log(debind);\n\n          return function () {\n            return debind.map(function (x) {\n              return x();\n            });\n          };\n        }\n      });\n      Object.defineProperty(object, '___before', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: ___before\n      });\n      Object.defineProperty(object, '___after', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: ___after\n      });\n\n      var isBound = function isBound() {\n        for (var i in object[BindingAll]) {\n          if (object[BindingAll][i]) {\n            return true;\n          }\n        }\n\n        for (var _i in object[Binding]) {\n          for (var j in object[Binding][_i]) {\n            if (object[Binding][_i][j]) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      };\n\n      Object.defineProperty(object, 'isBound', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: isBound\n      });\n\n      for (var i in object) {\n        if (object[i] && object[i] instanceof Object && !object[i] instanceof Node && !object[i] instanceof Promise) {\n          object[i] = Bindable.make(object[i]);\n        }\n      }\n\n      var set = function set(target, key, value) {\n        if (object[Deck][key] !== undefined && object[Deck][key] === value) {\n          return true;\n        }\n\n        if (typeof key === 'string' && key.substring(0, 3) === '___' && key.slice(-3) === '___') {\n          return true;\n        }\n\n        if (target[key] === value) {\n          return true;\n        }\n\n        if (value && value instanceof Object && !(value instanceof Node)) {\n          if (value.___isBindable___ !== Bindable) {\n            value = Bindable.makeBindable(value);\n\n            if (_this.isBindable(value)) {\n              for (var _i2 in value) {\n                if (value[_i2] && value[_i2] instanceof Object) {\n                  value[_i2] = Bindable.makeBindable(value[_i2]);\n                }\n              }\n            }\n          }\n        }\n\n        object[Deck][key] = value;\n\n        for (var _i3 in object[BindingAll]) {\n          if (!object[BindingAll][_i3]) {\n            continue;\n          }\n\n          object[BindingAll][_i3](value, key, target, false);\n        }\n\n        var stop = false;\n\n        if (key in object[Binding]) {\n          for (var _i4 in object[Binding][key]) {\n            if (!object[Binding][key]) {\n              continue;\n            }\n\n            if (!object[Binding][key][_i4]) {\n              continue;\n            }\n\n            if (object[Binding][key][_i4](value, key, target, false, target[key]) === false) {\n              stop = true;\n            }\n          }\n        }\n\n        delete object[Deck][key];\n\n        if (!stop) {\n          var descriptor = Object.getOwnPropertyDescriptor(target, key);\n          var excluded = target instanceof File && key == 'lastModifiedDate';\n\n          if (!excluded && (!descriptor || descriptor.writable) && target[key] === value) {\n            target[key] = value;\n          }\n        }\n\n        return Reflect.set(target, key, value);\n      };\n\n      var deleteProperty = function deleteProperty(target, key) {\n        if (!(key in target)) {\n          return true;\n        }\n\n        for (var _i5 in object[BindingAll]) {\n          object[BindingAll][_i5](undefined, key, target, true, target[key]);\n        }\n\n        if (key in object[Binding]) {\n          for (var _i6 in object[Binding][key]) {\n            if (!object[Binding][key][_i6]) {\n              continue;\n            }\n\n            object[Binding][key][_i6](undefined, key, target, true, target[key]);\n          }\n        }\n\n        delete target[key];\n        return true;\n      };\n\n      var get = function get(target, key) {\n        if (key === Ref || key === 'isBound' || key === 'bindTo') {\n          return target[key];\n        }\n\n        if (target[key] instanceof Function) {\n          if (target[Wrapped][key]) {\n            return target[Wrapped][key];\n          }\n\n          var descriptor = Object.getOwnPropertyDescriptor(object, key);\n\n          if (descriptor && !descriptor.configurable && !descriptor.writable) {\n            target[Wrapped][key] = target[key];\n            return target[Wrapped][key];\n          }\n\n          target[Wrapped][key] = function () {\n            target[Executing] = key;\n            target[Stack].unshift(key);\n\n            for (var _len = arguments.length, providedArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n              providedArgs[_key] = arguments[_key];\n            }\n\n            for (var _i7 in target.___before___) {\n              target.___before___[_i7](target, key, target[Stack], object, providedArgs);\n            }\n\n            var objRef = object instanceof Promise || object instanceof EventTarget || object instanceof MutationObserver || object instanceof IntersectionObserver || object instanceof MutationObserver || object instanceof PerformanceObserver || typeof ResizeObserver === 'function' && object instanceof ResizeObserver || object instanceof Map || object instanceof Set ? object : object[Ref];\n            var ret = new.target ? _construct(target[key], providedArgs) : target[key].apply(objRef || object, providedArgs);\n\n            for (var _i8 in target.___after___) {\n              target.___after___[_i8](target, key, target[Stack], object, providedArgs);\n            }\n\n            target[Executing] = null;\n            target[Stack].shift();\n            return ret;\n          };\n\n          return target[Wrapped][key];\n        }\n\n        if (target[key] instanceof Object && !target[key][Ref]) {\n          Bindable.make(target[key]);\n        }\n\n        return target[key];\n      };\n\n      var construct = function construct(target, args) {\n        var key = 'constructor';\n\n        for (var _i9 in target.___before___) {\n          target.___before___[_i9](target, key, target[Stack], undefined, args);\n        }\n\n        var instance = Bindable.make(_construct(target, _toConsumableArray(args)));\n\n        for (var _i10 in target.___after___) {\n          target.___after___[_i10](target, key, target[Stack], instance, args);\n        }\n\n        return instance;\n      };\n\n      Object.defineProperty(object, Ref, {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: object[Ref]\n      });\n      object[Ref] = new Proxy(object, {\n        deleteProperty: deleteProperty,\n        construct: construct,\n        get: get,\n        set: set\n      });\n      return object[Ref];\n    }\n  }, {\n    key: \"clearBindings\",\n    value: function clearBindings(object) {\n      var clearObj = function clearObj(o) {\n        return Object.keys(o).map(function (k) {\n          return delete o[k];\n        });\n      };\n\n      var maps = function maps(func) {\n        return function () {\n          for (var _len2 = arguments.length, os = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            os[_key2] = arguments[_key2];\n          }\n\n          return os.map(func);\n        };\n      };\n\n      var clearObjs = maps(clearObj);\n      clearObjs(object[Wrapped], object[Binding], object[BindingAll], object.___after___, object.___before___);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(object, path) {\n      var owner = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var node;\n      var pathParts = path.split('.');\n      var top = pathParts[0];\n\n      while (pathParts.length) {\n        if (owner && pathParts.length === 1) {\n          var obj = this.makeBindable(object);\n          return [obj, pathParts.shift(), top];\n        }\n\n        node = pathParts.shift();\n\n        if (!node in object || !object[node] || !(object[node] instanceof Object)) {\n          object[node] = {};\n        }\n\n        object = this.makeBindable(object[node]);\n      }\n\n      return [this.makeBindable(object), node, top];\n    }\n  }, {\n    key: \"wrapDelayCallback\",\n    value: function wrapDelayCallback(callback, delay) {\n      return function (v, k, t, d) {\n        setTimeout(function () {\n          return callback(v, k, t, d, t[k]);\n        }, delay);\n      };\n    }\n  }, {\n    key: \"wrapThrottleCallback\",\n    value: function wrapThrottleCallback(callback, throttle) {\n      return function (callback) {\n        var throttle = false;\n        return function (v, k, t, d) {\n          if (throttle) {\n            return;\n          }\n\n          callback(v, k, t, d, t[k]);\n          throttle = true;\n          setTimeout(function () {\n            throttle = false;\n          }, throttle);\n        };\n      }(callback);\n    }\n  }, {\n    key: \"wrapWaitCallback\",\n    value: function wrapWaitCallback(callback, wait) {\n      var waiter = false;\n      return function (v, k, t, d) {\n        if (waiter) {\n          clearTimeout(waiter);\n          waiter = false;\n        }\n\n        waiter = setTimeout(function () {\n          return callback(v, k, t, d, t[k]);\n        }, wait);\n      };\n    }\n  }, {\n    key: \"wrapFrameCallback\",\n    value: function wrapFrameCallback(callback, frames) {\n      return function (v, k, t, d, p) {\n        requestAnimationFrame(function () {\n          return callback(v, k, t, d, p);\n        });\n      };\n    }\n  }, {\n    key: \"wrapIdleCallback\",\n    value: function wrapIdleCallback(callback) {\n      return function (v, k, t, d, p) {\n        // Compatibility for Safari 08/2020\n        var req = window.requestIdleCallback || requestAnimationFrame;\n        req(function () {\n          return callback(v, k, t, d, p);\n        });\n      };\n    }\n  }]);\n\n  return Bindable;\n}();\n\nexports.Bindable = Bindable;\n  })();\n});","\nrequire.register(\"curvature/base/Cache.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Cache = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Cache = /*#__PURE__*/function () {\n  function Cache() {\n    _classCallCheck(this, Cache);\n  }\n\n  _createClass(Cache, null, [{\n    key: \"store\",\n    value: function store(key, value, expiry) {\n      var bucket = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'standard';\n      var expiration = 0;\n\n      if (expiry) {\n        expiration = expiry * 1000 + new Date().getTime();\n      } // console.log(\n      // \t`Caching ${key} until ${expiration} in ${bucket}.`\n      // \t, value\n      // \t, this.bucket\n      // );\n\n\n      if (!this.bucket) {\n        this.bucket = {};\n      }\n\n      if (!this.bucket[bucket]) {\n        this.bucket[bucket] = {};\n      }\n\n      this.bucket[bucket][key] = {\n        expiration: expiration,\n        value: value\n      };\n    }\n  }, {\n    key: \"load\",\n    value: function load(key) {\n      var defaultvalue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var bucket = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'standard';\n\n      // console.log(\n      // \t`Checking cache for ${key} in ${bucket}.`\n      // \t, this.bucket\n      // );\n      if (this.bucket && this.bucket[bucket] && this.bucket[bucket][key]) {\n        // console.log(this.bucket[bucket][key].expiration, (new Date).getTime());\n        if (this.bucket[bucket][key].expiration == 0 || this.bucket[bucket][key].expiration > new Date().getTime()) {\n          return this.bucket[bucket][key].value;\n        }\n      }\n\n      return defaultvalue;\n    }\n  }]);\n\n  return Cache;\n}();\n\nexports.Cache = Cache;\n  })();\n});","\nrequire.register(\"curvature/base/Config.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Config = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar AppConfig = {};\n\ntry {\n  Object.assign(AppConfig, require('Config').Config || {});\n} catch (error) {\n  console.error(error);\n}\n\nvar Config = /*#__PURE__*/function () {\n  function Config() {\n    _classCallCheck(this, Config);\n  }\n\n  _createClass(Config, null, [{\n    key: \"get\",\n    value: function get(name) {\n      return this.configs[name];\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.configs[name] = value;\n      return this;\n    }\n  }, {\n    key: \"dump\",\n    value: function dump() {\n      return this.configs;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      for (var _len = arguments.length, configs = new Array(_len), _key = 0; _key < _len; _key++) {\n        configs[_key] = arguments[_key];\n      }\n\n      for (var i in configs) {\n        var config = configs[i];\n\n        if (typeof config === 'string') {\n          config = JSON.parse(config);\n        }\n\n        for (var name in config) {\n          var value = config[name];\n          return this.configs[name] = value;\n        }\n      }\n\n      return this;\n    }\n  }]);\n\n  return Config;\n}();\n\nexports.Config = Config;\nObject.defineProperty(Config, 'configs', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: AppConfig\n});\n  })();\n});","\nrequire.register(\"curvature/base/Dom.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dom = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar traversals = 0;\n\nvar Dom = /*#__PURE__*/function () {\n  function Dom() {\n    _classCallCheck(this, Dom);\n  }\n\n  _createClass(Dom, null, [{\n    key: \"mapTags\",\n    value: function mapTags(doc, selector, callback, startNode, endNode) {\n      var result = [];\n      var started = true;\n\n      if (startNode) {\n        started = false;\n      }\n\n      var ended = false;\n      var treeWalker = document.createTreeWalker(doc, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, {\n        acceptNode: function acceptNode(node, walker) {\n          if (!started) {\n            if (node === startNode) {\n              started = true;\n            } else {\n              return NodeFilter.FILTER_SKIP;\n            }\n          }\n\n          if (endNode && node === endNode) {\n            ended = true;\n          }\n\n          if (ended) {\n            return NodeFilter.FILTER_SKIP;\n          }\n\n          if (selector) {\n            if (node instanceof Element) {\n              if (node.matches(selector)) {\n                return NodeFilter.FILTER_ACCEPT;\n              }\n            }\n\n            return NodeFilter.FILTER_SKIP;\n          }\n\n          return NodeFilter.FILTER_ACCEPT;\n        }\n      }, false);\n      var traversal = traversals++;\n\n      while (treeWalker.nextNode()) {\n        result.push(callback(treeWalker.currentNode, treeWalker));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(doc, event) {\n      doc.dispatchEvent(event);\n      Dom.mapTags(doc, false, function (node) {\n        node.dispatchEvent(event);\n      });\n    }\n  }]);\n\n  return Dom;\n}();\n\nexports.Dom = Dom;\n  })();\n});","\nrequire.register(\"curvature/base/Mixin.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mixin = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Constructor = Symbol('constructor');\nvar MixinList = Symbol('mixinList');\n\nvar Mixin = /*#__PURE__*/function () {\n  function Mixin() {\n    _classCallCheck(this, Mixin);\n  }\n\n  _createClass(Mixin, null, [{\n    key: \"from\",\n    value: function from(baseClass) {\n      for (var _len = arguments.length, mixins = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        mixins[_key - 1] = arguments[_key];\n      }\n\n      var constructors = [];\n\n      var newClass = /*#__PURE__*/function (_baseClass) {\n        _inherits(newClass, _baseClass);\n\n        var _super = _createSuper(newClass);\n\n        function newClass() {\n          var _this;\n\n          _classCallCheck(this, newClass);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          _this = _super.call.apply(_super, [this].concat(args));\n\n          var _iterator = _createForOfIteratorHelper(mixins),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var mixin = _step.value;\n\n              if (mixin[Mixin.constructor]) {\n                mixin[Mixin.constructor].apply(_assertThisInitialized(_this));\n              }\n\n              switch (_typeof(mixin)) {\n                // case 'function':\n                // \tthis.mixClass(mixin, newClass);\n                // \tbreak;\n                case 'object':\n                  Mixin.mixObject(mixin, _assertThisInitialized(_this));\n                  break;\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          return _this;\n        }\n\n        return newClass;\n      }(baseClass);\n\n      return newClass;\n    }\n  }, {\n    key: \"with\",\n    value: function _with() {\n      for (var _len3 = arguments.length, mixins = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        mixins[_key3] = arguments[_key3];\n      }\n\n      return this.from.apply(this, [Object].concat(mixins));\n    }\n  }, {\n    key: \"mixObject\",\n    value: function mixObject(mixin, instance) {\n      var _iterator2 = _createForOfIteratorHelper(Object.getOwnPropertyNames(mixin)),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var func = _step2.value;\n\n          if (typeof mixin[func] === 'function') {\n            instance[func] = mixin[func].bind(instance);\n            continue;\n          }\n\n          instance[func] = mixin[func];\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(Object.getOwnPropertySymbols(mixin)),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _func = _step3.value;\n\n          if (typeof mixin[_func] === 'function') {\n            instance[_func] = mixin[_func].bind(instance);\n            continue;\n          }\n\n          instance[_func] = mixin[_func];\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"mixClass\",\n    value: function mixClass(cls, newClass) {\n      var _iterator4 = _createForOfIteratorHelper(Object.getOwnPropertyNames(cls.prototype)),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var func = _step4.value;\n          newClass.prototype[func] = cls.prototype[func].bind(newClass.prototype);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      var _iterator5 = _createForOfIteratorHelper(Object.getOwnPropertySymbols(cls.prototype)),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _func2 = _step5.value;\n          newClass.prototype[_func2] = cls.prototype[_func2].bind(newClass.prototype);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      var _iterator6 = _createForOfIteratorHelper(Object.getOwnPropertyNames(cls)),\n          _step6;\n\n      try {\n        var _loop = function _loop() {\n          var func = _step6.value;\n\n          if (typeof cls[func] !== 'function') {\n            return \"continue\";\n          }\n\n          var prev = newClass[func] || false;\n          var meth = cls[func].bind(newClass);\n\n          newClass[func] = function () {\n            prev && prev.apply(void 0, arguments);\n            return meth.apply(void 0, arguments);\n          };\n        };\n\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _ret = _loop();\n\n          if (_ret === \"continue\") continue;\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      var _iterator7 = _createForOfIteratorHelper(Object.getOwnPropertySymbols(cls)),\n          _step7;\n\n      try {\n        var _loop2 = function _loop2() {\n          var func = _step7.value;\n\n          if (typeof cls[func] !== 'function') {\n            return \"continue\";\n          }\n\n          var prev = newClass[func] || false;\n          var meth = cls[func].bind(newClass);\n\n          newClass[func] = function () {\n            prev && prev.apply(void 0, arguments);\n            return meth.apply(void 0, arguments);\n          };\n        };\n\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var _ret2 = _loop2();\n\n          if (_ret2 === \"continue\") continue;\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    }\n  }, {\n    key: \"mix\",\n    value: function mix(mixinTo) {\n      var constructors = [];\n      var allStatic = {};\n      var allInstance = {};\n\n      var mixable = _Bindable.Bindable.makeBindable(mixinTo);\n\n      var _loop3 = function _loop3(base) {\n        var instanceNames = Object.getOwnPropertyNames(base.prototype);\n        var staticNames = Object.getOwnPropertyNames(base);\n        var prefix = /^(before|after)__(.+)/;\n\n        var _iterator8 = _createForOfIteratorHelper(staticNames),\n            _step8;\n\n        try {\n          var _loop5 = function _loop5() {\n            var methodName = _step8.value;\n            var match = methodName.match(prefix);\n\n            if (match) {\n              switch (match[1]) {\n                case 'before':\n                  mixable.___before(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n\n                case 'after':\n                  mixable.___after(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n              }\n\n              return \"continue\";\n            }\n\n            if (allStatic[methodName]) {\n              return \"continue\";\n            }\n\n            if (typeof base[methodName] !== 'function') {\n              return \"continue\";\n            }\n\n            allStatic[methodName] = base[methodName];\n          };\n\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var _ret3 = _loop5();\n\n            if (_ret3 === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n\n        var _iterator9 = _createForOfIteratorHelper(instanceNames),\n            _step9;\n\n        try {\n          var _loop6 = function _loop6() {\n            var methodName = _step9.value;\n            var match = methodName.match(prefix);\n\n            if (match) {\n              switch (match[1]) {\n                case 'before':\n                  mixable.___before(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base.prototype[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n\n                case 'after':\n                  mixable.___after(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base.prototype[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n              }\n\n              return \"continue\";\n            }\n\n            if (allInstance[methodName]) {\n              return \"continue\";\n            }\n\n            if (typeof base.prototype[methodName] !== 'function') {\n              return \"continue\";\n            }\n\n            allInstance[methodName] = base.prototype[methodName];\n          };\n\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var _ret4 = _loop6();\n\n            if (_ret4 === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n      };\n\n      for (var base = this; base && base.prototype; base = Object.getPrototypeOf(base)) {\n        _loop3(base);\n      }\n\n      for (var methodName in allStatic) {\n        mixinTo[methodName] = allStatic[methodName].bind(mixinTo);\n      }\n\n      var _loop4 = function _loop4(_methodName) {\n        mixinTo.prototype[_methodName] = function () {\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          return allInstance[_methodName].apply(this, args);\n        };\n      };\n\n      for (var _methodName in allInstance) {\n        _loop4(_methodName);\n      }\n\n      return mixable;\n    }\n  }]);\n\n  return Mixin;\n}();\n\nexports.Mixin = Mixin;\nMixin.constructor = Constructor;\n  })();\n});","\nrequire.register(\"curvature/base/Router.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Router = void 0;\n\nvar _View = require(\"./View\");\n\nvar _Cache = require(\"./Cache\");\n\nvar _Config = require(\"./Config\");\n\nvar _Routes = require(\"./Routes\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Router = /*#__PURE__*/function () {\n  function Router() {\n    _classCallCheck(this, Router);\n  }\n\n  _createClass(Router, null, [{\n    key: \"wait\",\n    value: function wait(view) {\n      var _this = this;\n\n      var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'DOMContentLoaded';\n      var node = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document;\n      node.addEventListener(event, function () {\n        _this.listen(view);\n      });\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(listener) {\n      var _this2 = this;\n\n      var routes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this.routes = routes;\n      var route = location.pathname + location.search;\n\n      if (location.hash) {\n        route += location.hash;\n      }\n\n      Object.assign(this.query, this.queryOver({}));\n\n      var listen = function listen(event) {\n        event.preventDefault();\n\n        if (event.state && 'routedId' in event.state) {\n          if (event.state.routedId <= _this2.routeCount) {\n            _this2.history.splice(event.state.routedId);\n\n            _this2.routeCount = event.state.routedId;\n          } else if (event.state.routedId > _this2.routeCount) {\n            _this2.history.push(event.state.prev);\n\n            _this2.routeCount = event.state.routedId;\n          }\n        } else {\n          if (_this2.prevPath !== null && _this2.prevPath !== location.pathname) {\n            _this2.history.push(_this2.prevPath);\n          }\n        }\n\n        _this2.match(location.pathname, listener);\n\n        for (var i in _this2.query) {\n          delete _this2.query[i];\n        }\n\n        Object.assign(_this2.query, _this2.queryOver({}));\n      };\n\n      window.addEventListener('popstate', listen);\n      window.addEventListener('cvUrlChanged', listen);\n      this.go(route);\n    }\n  }, {\n    key: \"go\",\n    value: function go(path, silent) {\n      var configTitle = _Config.Config.get('title');\n\n      if (configTitle) {\n        document.title = configTitle;\n      }\n\n      if (silent === 2 && location.pathname !== path) {\n        history.replaceState({\n          routedId: this.routeCount,\n          prev: this.prevPath,\n          url: location.pathname\n        }, null, path);\n      } else if (location.pathname !== path) {\n        history.pushState({\n          routedId: ++this.routeCount,\n          prev: this.prevPath,\n          url: location.pathname\n        }, null, path);\n      }\n\n      if (!silent) {\n        if (silent === false) {\n          this.path = null;\n        }\n\n        if (path.substring(0, 1) === '#') {\n          window.dispatchEvent(new HashChangeEvent('hashchange'));\n        } else {\n          window.dispatchEvent(new CustomEvent('cvUrlChanged'));\n        }\n      }\n\n      for (var i in this.query) {\n        delete this.query[i];\n      }\n\n      Object.assign(this.query, this.queryOver({}));\n      this.prevPath = path;\n    }\n  }, {\n    key: \"match\",\n    value: function match(path, listener) {\n      var _this3 = this;\n\n      var forceRefresh = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (this.path === path && !forceRefresh) {\n        return;\n      }\n\n      this.queryString = location.search;\n      this.path = path;\n      var prev = this.prevPath;\n      var current = listener.args.content;\n\n      var routes = this.routes || listener.routes || _Routes.Routes.dump();\n\n      var query = new URLSearchParams(location.search);\n\n      for (var i in this.query) {\n        delete this.query[i];\n      }\n\n      Object.assign(this.query, this.queryOver({}));\n      var args = {},\n          selected = false,\n          result = '';\n      path = path.substr(1).split('/');\n\n      for (var _i in this.query) {\n        args[_i] = this.query[_i];\n      }\n\n      L1: for (var _i2 in routes) {\n        var route = _i2.split('/');\n\n        if (route.length < path.length && route[route.length - 1] !== '*') {\n          continue;\n        }\n\n        L2: for (var j in route) {\n          if (route[j].substr(0, 1) == '%') {\n            var argName = null;\n            var groups = /^%(\\w+)\\??/.exec(route[j]);\n\n            if (groups && groups[1]) {\n              argName = groups[1];\n            }\n\n            if (!argName) {\n              throw new Error(\"\".concat(route[j], \" is not a valid argument segment in route \\\"\").concat(_i2, \"\\\"\"));\n            }\n\n            if (!path[j]) {\n              if (route[j].substr(route[j].length - 1, 1) == '?') {\n                args[argName] = '';\n              } else {\n                continue L1;\n              }\n            } else {\n              args[argName] = path[j];\n            }\n          } else if (route[j] !== '*' && path[j] !== route[j]) {\n            continue L1;\n          }\n        }\n\n        selected = _i2;\n        result = routes[_i2];\n\n        if (route[route.length - 1] === '*') {\n          args.pathparts = path.slice(route.length - 1);\n        }\n\n        break;\n      }\n\n      if (!forceRefresh && listener && current && result instanceof Object && current instanceof result && !(result instanceof Promise) && current.update(args)) {\n        listener.args.content = current;\n        return true;\n      }\n\n      var eventStart = new CustomEvent('cvRouteStart', {\n        cancelable: true,\n        detail: {\n          path: path,\n          prev: prev,\n          root: listener,\n          selected: selected,\n          routes: routes\n        }\n      });\n\n      if (!document.dispatchEvent(eventStart)) {\n        return;\n      }\n\n      if (selected in routes && routes[selected] instanceof Object && routes[selected].isView && routes[selected].isView()) {\n        result = new routes[selected](args);\n\n        if (listener) {\n          result.root = function () {\n            return listener;\n          };\n        }\n      } else if (routes[selected] instanceof Function) {\n        result = '';\n        var r = routes[selected](args);\n        result = r;\n      } else if (routes[selected] instanceof Object) {\n        result = new routes[selected](args);\n      } else if (typeof routes[selected] == 'string') {\n        result = routes[selected];\n      }\n\n      if (!(result instanceof Promise)) {\n        result = Promise.resolve(result);\n      }\n\n      return result.then(function (result) {\n        return _this3.update(listener, path, result, routes, selected, args, forceRefresh);\n      })[\"catch\"](function (error) {\n        return _this3.update(listener, path, error, routes, selected, args, forceRefresh);\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update(listener, path, result, routes, selected, args, forceRefresh) {\n      if (!listener) {\n        return;\n      }\n\n      var prev = this.prevPath;\n      var event = new CustomEvent('cvRoute', {\n        cancelable: true,\n        detail: {\n          result: result,\n          path: path,\n          prev: prev,\n          view: listener,\n          routes: routes,\n          selected: selected\n        }\n      });\n\n      if (result !== false) {\n        if (listener.args.content instanceof _View.View) {\n          listener.args.content.pause(true);\n          listener.args.content.remove();\n        }\n\n        if (document.dispatchEvent(event)) {\n          listener.args.content = result;\n        }\n\n        if (result instanceof _View.View) {\n          result.pause(false);\n          result.update(args, forceRefresh);\n        }\n      }\n\n      var eventEnd = new CustomEvent('cvRouteEnd', {\n        cancelable: true,\n        detail: {\n          result: result,\n          path: path,\n          prev: prev,\n          view: listener,\n          routes: routes,\n          selected: selected\n        }\n      });\n      document.dispatchEvent(eventEnd);\n    }\n  }, {\n    key: \"queryOver\",\n    value: function queryOver() {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var params = new URLSearchParams(location.search);\n      var finalArgs = {};\n      var query = {};\n\n      var _iterator = _createForOfIteratorHelper(params),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var pair = _step.value;\n          query[pair[0]] = pair[1];\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      finalArgs = Object.assign(finalArgs, query, args);\n      delete finalArgs['api'];\n      return finalArgs; // for(let i in query)\n      // {\n      // \tfinalArgs[i] = query[i];\n      // }\n      // for(let i in args)\n      // {\n      // \tfinalArgs[i] = args[i];\n      // }\n    }\n  }, {\n    key: \"queryToString\",\n    value: function queryToString() {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var fresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var parts = [],\n          finalArgs = args;\n\n      if (!fresh) {\n        finalArgs = this.queryOver(args);\n      }\n\n      for (var i in finalArgs) {\n        if (finalArgs[i] === '') {\n          continue;\n        }\n\n        parts.push(i + '=' + encodeURIComponent(finalArgs[i]));\n      }\n\n      return parts.join('&');\n    }\n  }, {\n    key: \"setQuery\",\n    value: function setQuery(name, value, silent) {\n      var args = this.queryOver();\n      args[name] = value;\n\n      if (value === undefined) {\n        delete args[name];\n      }\n\n      var queryString = this.queryToString(args, true);\n      this.go(location.pathname + (queryString ? '?' + queryString : ''), silent);\n    }\n  }]);\n\n  return Router;\n}();\n\nexports.Router = Router;\nObject.defineProperty(Router, 'query', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: {}\n});\nObject.defineProperty(Router, 'history', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: []\n});\nObject.defineProperty(Router, 'routeCount', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: 0\n});\nObject.defineProperty(Router, 'prevPath', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: null\n});\nObject.defineProperty(Router, 'queryString', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: null\n});\n  })();\n});","\nrequire.register(\"curvature/base/Routes.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Routes = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar AppRoutes = {};\n\ntry {\n  Object.assign(AppRoutes, require('Routes').Routes || {});\n} catch (error) {\n  window.devmode && console.warn(error);\n}\n\nvar Routes = /*#__PURE__*/function () {\n  function Routes() {\n    _classCallCheck(this, Routes);\n  }\n\n  _createClass(Routes, null, [{\n    key: \"get\",\n    value: function get(name) {\n      return this.routes[name];\n    }\n  }, {\n    key: \"dump\",\n    value: function dump() {\n      return this.routes;\n    }\n  }]);\n\n  return Routes;\n}();\n\nexports.Routes = Routes;\nObject.defineProperty(Routes, 'routes', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: AppRoutes\n});\n  })();\n});","\nrequire.register(\"curvature/base/RuleSet.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RuleSet = void 0;\n\nvar _Dom = require(\"./Dom\");\n\nvar _Tag = require(\"./Tag\");\n\nvar _View = require(\"./View\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar RuleSet = /*#__PURE__*/function () {\n  function RuleSet() {\n    _classCallCheck(this, RuleSet);\n  }\n\n  _createClass(RuleSet, [{\n    key: \"add\",\n    value: function add(selector, callback) {\n      this.rules = this.rules || {};\n      this.rules[selector] = this.rules[selector] || [];\n      this.rules[selector].push(callback);\n      return this;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply() {\n      var doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      var view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      RuleSet.apply(doc, view);\n\n      for (var selector in this.rules) {\n        for (var i in this.rules[selector]) {\n          var callback = this.rules[selector][i];\n          var wrapped = RuleSet.wrap(doc, callback, view);\n          var nodes = doc.querySelectorAll(selector);\n\n          var _iterator = _createForOfIteratorHelper(nodes),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var node = _step.value;\n              wrapped(node);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n      }\n    }\n  }], [{\n    key: \"add\",\n    value: function add(selector, callback) {\n      this.globalRules = this.globalRules || {};\n      this.globalRules[selector] = this.globalRules[selector] || [];\n      this.globalRules[selector].push(callback);\n      return this;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply() {\n      var doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      var view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      for (var selector in this.globalRules) {\n        for (var i in this.globalRules[selector]) {\n          var callback = this.globalRules[selector][i];\n          var wrapped = this.wrap(doc, callback, view);\n          var nodes = doc.querySelectorAll(selector);\n\n          var _iterator2 = _createForOfIteratorHelper(nodes),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var node = _step2.value;\n              wrapped(node);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"wait\",\n    value: function wait() {\n      var _this = this;\n\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'DOMContentLoaded';\n      var node = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n      var listener = function (event, node) {\n        return function () {\n          node.removeEventListener(event, listener);\n          return _this.apply();\n        };\n      }(event, node);\n\n      node.addEventListener(event, listener);\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(doc, callback) {\n      var view = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      if (callback instanceof _View.View || callback && callback.prototype && callback.prototype instanceof _View.View) {\n        callback = function (callback) {\n          return function () {\n            return callback;\n          };\n        }(callback);\n      }\n\n      return function (element) {\n        if (typeof element.___cvApplied___ === 'undefined') {\n          Object.defineProperty(element, '___cvApplied___', {\n            enumerable: false,\n            writable: false,\n            value: []\n          });\n        }\n\n        for (var i in element.___cvApplied___) {\n          if (callback == element.___cvApplied___[i]) {\n            return;\n          }\n        }\n\n        var direct, parentView;\n\n        if (view) {\n          direct = parentView = view;\n\n          if (view.viewList) {\n            parentView = view.viewList.parent;\n          }\n        }\n\n        var tag = new _Tag.Tag(element, parentView, null, undefined, direct);\n        var parent = tag.element.parentNode;\n        var sibling = tag.element.nextSibling;\n        var result = callback(tag);\n\n        if (result !== false) {\n          element.___cvApplied___.push(callback);\n        }\n\n        if (result instanceof HTMLElement) {\n          result = new _Tag.Tag(result);\n        }\n\n        if (result instanceof _Tag.Tag) {\n          if (!result.element.contains(tag.element)) {\n            while (tag.element.firstChild) {\n              result.element.appendChild(tag.element.firstChild);\n            }\n\n            tag.remove();\n          }\n\n          if (sibling) {\n            parent.insertBefore(result.element, sibling);\n          } else {\n            parent.appendChild(result.element);\n          }\n        }\n\n        if (result && result.prototype && result.prototype instanceof _View.View) {\n          result = new result();\n        }\n\n        if (result instanceof _View.View) {\n          if (view) {\n            view.cleanup.push(function (r) {\n              return function () {\n                r.remove();\n              };\n            }(result));\n            result.parent = view;\n            view.cleanup.push(view.args.bindTo(function (v, k, t) {\n              t[k] = v;\n              result.args[k] = v;\n            }));\n            view.cleanup.push(result.args.bindTo(function (v, k, t, d) {\n              t[k] = v;\n              view.args[k] = v;\n            }));\n          }\n\n          tag.clear();\n          result.render(tag.element);\n        }\n      };\n    }\n  }]);\n\n  return RuleSet;\n}();\n\nexports.RuleSet = RuleSet;\n  })();\n});","\nrequire.register(\"curvature/base/Tag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tag = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Tag = /*#__PURE__*/function () {\n  function Tag(element, parent, ref, index, direct) {\n    _classCallCheck(this, Tag);\n\n    this.element = _Bindable.Bindable.makeBindable(element);\n    this.parent = parent;\n    this.direct = direct;\n    this.ref = ref;\n    this.index = index;\n    this.cleanup = [];\n    this.proxy = _Bindable.Bindable.makeBindable(this); // this.detachListener = (event) => {\n    // \treturn;\n    // \tif(event.target != this.element)\n    // \t{\n    // \t\treturn;\n    // \t}\n    // \tif(event.path[event.path.length -1] !== window)\n    // \t{\n    // \t\treturn;\n    // \t}\n    // \tthis.element.removeEventListener('cvDomDetached', this.detachListener);\n    // \tthis.remove();\n    // };\n    // this.element.addEventListener('cvDomDetached', this.detachListener);\n    // return this.proxy;\n  }\n\n  _createClass(Tag, [{\n    key: \"remove\",\n    value: function remove() {\n      _Bindable.Bindable.clearBindings(this);\n\n      var cleanup;\n\n      while (cleanup = this.cleanup.shift()) {\n        cleanup();\n      }\n\n      this.clear();\n\n      if (!this.element) {\n        return;\n      }\n\n      var detachEvent = new Event('cvDomDetached');\n      this.element.dispatchEvent(detachEvent);\n      this.element.remove();\n      this.element = this.ref = this.parent = null;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.element) {\n        return;\n      }\n\n      var detachEvent = new Event('cvDomDetached');\n\n      while (this.element.firstChild) {\n        this.element.firstChild.dispatchEvent(detachEvent);\n        this.element.removeChild(this.element.firstChild);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    }\n  }]);\n\n  return Tag;\n}();\n\nexports.Tag = Tag;\n  })();\n});","\nrequire.register(\"curvature/base/View.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.View = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nvar _ViewList = require(\"./ViewList\");\n\nvar _Router = require(\"./Router\");\n\nvar _Dom = require(\"./Dom\");\n\nvar _Tag = require(\"./Tag\");\n\nvar _Bag = require(\"./Bag\");\n\nvar _RuleSet = require(\"./RuleSet\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar dontParse = Symbol('dontParse');\nvar expandBind = Symbol('expandBind');\nvar moveIndex = 0;\n\nvar View = /*#__PURE__*/function () {\n  _createClass(View, [{\n    key: \"_id\",\n    get: function get() {\n      if (!this.__id) {\n        Object.defineProperty(this, '__id', {\n          configurable: false,\n          writable: false,\n          value: this.uuid()\n        });\n      }\n\n      return this.__id;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(template) {\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var view = new this(args, parent);\n      view.template = template;\n      return view;\n    }\n  }]);\n\n  function View() {\n    var _this2 = this;\n\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var mainView = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, View);\n\n    Object.defineProperty(this, '___VIEW___', {\n      enumerable: false,\n      writable: true\n    });\n    this.___VIEW___ = View;\n    Object.defineProperty(this, 'args', {\n      configurable: false,\n      writable: false,\n      value: _Bindable.Bindable.make(args)\n    });\n\n    var _this = this;\n\n    if (!this.args._id) {\n      Object.defineProperty(this.args, '_id', {\n        configurable: false,\n        get: function get() {\n          return _this._id;\n        }\n      });\n    }\n\n    this.template = \"\";\n    this.document = \"\";\n    this.firstNode = null;\n    this.lastNode = null;\n    this.nodes = null;\n    this.cleanup = [];\n    this._onRemove = new _Bag.Bag(function (i, s, a) {// console.log('View _onRemove', i, s, a);\n    });\n    this.attach = new _Bag.Bag(function (i, s, a) {});\n    this.detach = new _Bag.Bag(function (i, s, a) {});\n    this.eventCleanup = [];\n    this.mainView = null;\n    this.parent = mainView;\n    this.viewList = null;\n    this.viewLists = {};\n    this.withViews = {};\n    this.tags = _Bindable.Bindable.make({});\n    this.intervals = [];\n    this.timeouts = [];\n    this.frames = [];\n    this.ruleSet = new _RuleSet.RuleSet();\n    this.preRuleSet = new _RuleSet.RuleSet();\n    this.subBindings = {};\n    this.subTemplates = {};\n    this.removed = false;\n    this.preserve = false;\n    this.interpolateRegex = /(\\[\\[((?:\\$+)?[\\w\\.\\|-]+)\\]\\])/g;\n    this.rendered = new Promise(function (accept, reject) {\n      Object.defineProperty(_this2, 'renderComplete', {\n        configurable: false,\n        writable: false,\n        value: accept\n      });\n    });\n    return _Bindable.Bindable.make(this);\n  }\n\n  _createClass(View, [{\n    key: \"onFrame\",\n    value: function onFrame(callback) {\n      var _this3 = this;\n\n      var stopped = false;\n\n      var cancel = function cancel() {\n        stopped = true;\n      };\n\n      var c = function c(timestamp) {\n        if (_this3.removed || stopped) {\n          return;\n        }\n\n        if (!_this3.paused) {\n          callback(Date.now());\n        }\n\n        requestAnimationFrame(c);\n      };\n\n      requestAnimationFrame(function () {\n        return c(Date.now());\n      });\n      this.frames.push(cancel);\n      return cancel;\n    }\n  }, {\n    key: \"onNextFrame\",\n    value: function onNextFrame(callback) {\n      return requestAnimationFrame(function () {\n        return callback(Date.now());\n      });\n    }\n  }, {\n    key: \"onIdle\",\n    value: function onIdle(callback) {\n      return requestIdleCallback(function () {\n        return callback(Date.now());\n      });\n    }\n  }, {\n    key: \"onTimeout\",\n    value: function onTimeout(time, callback) {\n      var _this4 = this;\n\n      var wrappedCallback = function wrappedCallback() {\n        _this4.timeouts[index].fired = true;\n        _this4.timeouts[index].callback = null;\n        callback();\n      };\n\n      var timeout = setTimeout(wrappedCallback, time);\n      var index = this.timeouts.length;\n      this.timeouts.push({\n        timeout: timeout,\n        callback: wrappedCallback,\n        time: time,\n        fired: false,\n        created: new Date().getTime(),\n        paused: false\n      });\n      return timeout;\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (timeout) {\n      for (var i in this.timeouts) {\n        if (timeout === this.timeouts[i].timeout) {\n          clearTimeout(this.timeouts[i].timeout);\n          delete this.timeouts[i];\n        }\n      }\n    })\n  }, {\n    key: \"onInterval\",\n    value: function onInterval(time, callback) {\n      var timeout = setInterval(callback, time);\n      this.intervals.push({\n        timeout: timeout,\n        callback: callback,\n        time: time,\n        paused: false\n      });\n      return timeout;\n    }\n  }, {\n    key: \"clearInterval\",\n    value: function (_clearInterval) {\n      function clearInterval(_x2) {\n        return _clearInterval.apply(this, arguments);\n      }\n\n      clearInterval.toString = function () {\n        return _clearInterval.toString();\n      };\n\n      return clearInterval;\n    }(function (timeout) {\n      for (var i in this.intervals) {\n        if (timeout === this.intervals[i].timeout) {\n          clearInterval(this.intervals[i].timeout);\n          delete this.intervals[i];\n        }\n      }\n    })\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n      if (paused === undefined) {\n        this.paused = !this.paused;\n      }\n\n      this.paused = paused;\n\n      if (this.paused) {\n        for (var i in this.timeouts) {\n          if (this.timeouts[i].fired) {\n            delete this.timeouts[i];\n            continue;\n          }\n\n          clearTimeout(this.timeouts[i].timeout);\n        }\n\n        for (var _i in this.intervals) {\n          clearInterval(this.intervals[_i].timeout);\n        }\n      } else {\n        for (var _i2 in this.timeouts) {\n          if (!this.timeouts[_i2].timeout.paused) {\n            continue;\n          }\n\n          if (this.timeouts[_i2].fired) {\n            delete this.timeouts[_i2];\n            continue;\n          }\n\n          this.timeouts[_i2].timeout = setTimeout(this.timeouts[_i2].callback, this.timeouts[_i2].time);\n        }\n\n        for (var _i3 in this.intervals) {\n          if (!this.intervals[_i3].timeout.paused) {\n            continue;\n          }\n\n          this.intervals[_i3].timeout.paused = false;\n          this.intervals[_i3].timeout = setInterval(this.intervals[_i3].callback, this.intervals[_i3].time);\n        }\n      }\n\n      for (var _i4 in this.viewLists) {\n        if (!this.viewLists[_i4]) {\n          return;\n        }\n\n        this.viewLists[_i4].pause(!!paused);\n      }\n\n      for (var _i5 in this.tags) {\n        if (Array.isArray(this.tags[_i5])) {\n          for (var j in this.tags[_i5]) {\n            this.tags[_i5][j].pause(!!paused);\n          }\n\n          continue;\n        }\n\n        this.tags[_i5].pause(!!paused);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$nodes;\n\n      var parentNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var insertPoint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (parentNode instanceof View) {\n        parentNode = parentNode.firstNode.parentNode;\n      }\n\n      if (insertPoint instanceof View) {\n        insertPoint = insertPoint.firstNode;\n      }\n\n      if (this.firstNode) {\n        return this.reRender(parentNode, insertPoint);\n      }\n\n      var templateParsed = this.template instanceof DocumentFragment ? this.template.cloneNode(true) : View.templates.has(this.template);\n      var subDoc = templateParsed ? this.template instanceof DocumentFragment ? templateParsed : View.templates.get(this.template).cloneNode(true) : document.createRange().createContextualFragment(this.template);\n\n      if (!templateParsed && !(this.template instanceof DocumentFragment)) {\n        View.templates.set(this.template, subDoc.cloneNode(true));\n      }\n\n      this.mainView || this.preRuleSet.apply(subDoc, this);\n      this.mapTags(subDoc);\n      this.mainView || this.ruleSet.apply(subDoc, this);\n      this.nodes = [];\n\n      if (window['devmode'] === true) {\n        this.firstNode = document.createComment(\"Template \".concat(this._id, \" Start\"));\n        this.lastNode = document.createComment(\"Template \".concat(this._id, \" End\"));\n      } else {\n        this.firstNode = document.createTextNode('');\n        this.lastNode = document.createTextNode('');\n      }\n\n      (_this$nodes = this.nodes).push.apply(_this$nodes, [this.firstNode].concat(_toConsumableArray(Array.from(subDoc.childNodes)), [this.lastNode]));\n\n      if (parentNode) {\n        var rootNode = parentNode.getRootNode();\n        var moveType = 'internal';\n        var toRoot = false;\n\n        if (rootNode.isConnected) {\n          toRoot = true;\n          moveType = 'external';\n        }\n\n        if (insertPoint) {\n          parentNode.insertBefore(this.firstNode, insertPoint);\n          parentNode.insertBefore(this.lastNode, insertPoint);\n        } else {\n          parentNode.appendChild(this.firstNode);\n          parentNode.appendChild(this.lastNode);\n        }\n\n        parentNode.insertBefore(subDoc, this.lastNode);\n        moveIndex++;\n\n        if (toRoot) {\n          this.attached(rootNode, parentNode);\n          var attach = this.attach.items();\n\n          for (var i in attach) {\n            attach[i](rootNode, parentNode);\n          }\n\n          this.nodes.filter(function (n) {\n            return n.nodeType !== Node.COMMENT_NODE;\n          }).map(function (child) {\n            child.dispatchEvent(new Event('cvDomAttached', {\n              bubbles: true,\n              target: child\n            }));\n          });\n        }\n      }\n\n      this.renderComplete(this.nodes);\n      this.postRender(parentNode);\n      return this.nodes;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender(parentNode, insertPoint) {\n      var subDoc = new DocumentFragment();\n\n      if (this.firstNode.isConnected) {\n        var detach = this.detach.items();\n\n        for (var i in detach) {\n          detach[i]();\n        }\n\n        this.nodes.filter(function (n) {\n          return n.nodeType === Node.ELEMENT_NODE;\n        }).map(function (child) {\n          child.dispatchEvent(new Event('cvDomDetached', {\n            bubbles: true,\n            target: child\n          }));\n        });\n      }\n\n      subDoc.append.apply(subDoc, _toConsumableArray(this.nodes)); // subDoc.appendChild(this.firstNode);\n      // subDoc.appendChild(this.lastNode);\n\n      if (parentNode) {\n        if (insertPoint) {\n          parentNode.insertBefore(this.firstNode, insertPoint);\n          parentNode.insertBefore(this.lastNode, insertPoint);\n        } else {\n          parentNode.appendChild(this.firstNode);\n          parentNode.appendChild(this.lastNode);\n        }\n\n        parentNode.insertBefore(subDoc, this.lastNode);\n        var rootNode = parentNode.getRootNode();\n\n        if (rootNode.isConnected) {\n          this.nodes.filter(function (n) {\n            return n.nodeType === Node.ELEMENT_NODE;\n          }).map(function (child) {\n            child.dispatchEvent(new Event('cvDomAttached', {\n              bubbles: true,\n              target: child\n            }));\n          });\n          var attach = this.attach.items();\n\n          for (var _i6 in attach) {\n            attach[_i6](rootNode, parentNode);\n          }\n        }\n      }\n\n      return this.nodes;\n    }\n  }, {\n    key: \"mapTags\",\n    value: function mapTags(subDoc) {\n      var _this5 = this;\n\n      _Dom.Dom.mapTags(subDoc, false, function (tag, walker) {\n        if (tag[dontParse]) {\n          return;\n        }\n\n        if (tag.matches) {\n          tag = _this5.mapInterpolatableTag(tag);\n          tag = tag.matches('[cv-template]') && _this5.mapTemplateTag(tag) || tag;\n          tag = tag.matches('[cv-slot]') && _this5.mapSlotTag(tag) || tag;\n          tag = tag.matches('[cv-prerender]') && _this5.mapPrendererTag(tag) || tag;\n          tag = tag.matches('[cv-link]') && _this5.mapLinkTag(tag) || tag;\n          tag = tag.matches('[cv-attr]') && _this5.mapAttrTag(tag) || tag;\n          tag = tag.matches('[cv-expand]') && _this5.mapExpandableTag(tag) || tag;\n          tag = tag.matches('[cv-ref]') && _this5.mapRefTag(tag) || tag;\n          tag = tag.matches('[cv-on]') && _this5.mapOnTag(tag) || tag;\n          tag = tag.matches('[cv-each]') && _this5.mapEachTag(tag) || tag;\n          tag = tag.matches('[cv-bind]') && _this5.mapBindTag(tag) || tag;\n          tag = tag.matches('[cv-if]') && _this5.mapIfTag(tag) || tag;\n          tag = tag.matches('[cv-with]') && _this5.mapWithTag(tag) || tag;\n        } else {\n          tag = _this5.mapInterpolatableTag(tag);\n        }\n\n        if (tag !== walker.currentNode) {\n          walker.currentNode = tag;\n        }\n      });\n    }\n  }, {\n    key: \"mapExpandableTag\",\n    value: function mapExpandableTag(tag) {\n      /*/\n      const tagCompiler = this.compileExpandableTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      /*/\n      var existing = tag[expandBind];\n\n      if (existing) {\n        existing();\n        tag[expandBind] = false;\n      }\n\n      var _Bindable$resolve = _Bindable.Bindable.resolve(this.args, tag.getAttribute('cv-expand'), true),\n          _Bindable$resolve2 = _slicedToArray(_Bindable$resolve, 2),\n          proxy = _Bindable$resolve2[0],\n          expandProperty = _Bindable$resolve2[1];\n\n      tag.removeAttribute('cv-expand');\n\n      if (!proxy[expandProperty]) {\n        proxy[expandProperty] = {};\n      }\n\n      this.onRemove(tag[expandBind] = proxy[expandProperty].bindTo(function (v, k, t, d, p) {\n        if (d || v === undefined) {\n          tag.removeAttribute(k, v);\n          return;\n        }\n\n        if (v === null) {\n          tag.setAttribute(k, '');\n          return;\n        }\n\n        tag.setAttribute(k, v);\n      })); // let expandProperty = tag.getAttribute('cv-expand');\n      // let expandArg = Bindable.makeBindable(\n      // \tthis.args[expandProperty] || {}\n      // );\n      // tag.removeAttribute('cv-expand');\n      // for(let i in expandArg)\n      // {\n      // \tif(i === 'name' || i === 'type')\n      // \t{\n      // \t\tcontinue;\n      // \t}\n      // \tlet debind = expandArg.bindTo(i, ((tag,i)=>(v)=>{\n      // \t\ttag.setAttribute(i, v);\n      // \t})(tag,i));\n      // \tthis.onRemove(()=>{\n      // \t\tdebind();\n      // \t\tif(expandArg.isBound())\n      // \t\t{\n      // \t\t\tBindable.clearBindings(expandArg);\n      // \t\t}\n      // \t});\n      // }\n\n      return tag; //*/\n    }\n  }, {\n    key: \"compileExpandableTag\",\n    value: function compileExpandableTag(sourceTag) {\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n        var expandProperty = tag.getAttribute('cv-expand');\n\n        var expandArg = _Bindable.Bindable.make(bindingView.args[expandProperty] || {});\n\n        tag.removeAttribute('cv-expand');\n\n        var _loop = function _loop(i) {\n          if (i === 'name' || i === 'type') {\n            return \"continue\";\n          }\n\n          var debind = expandArg.bindTo(i, function (tag, i) {\n            return function (v) {\n              tag.setAttribute(i, v);\n            };\n          }(tag, i));\n          bindingView.onRemove(function () {\n            debind();\n\n            if (expandArg.isBound()) {\n              _Bindable.Bindable.clearBindings(expandArg);\n            }\n          });\n        };\n\n        for (var i in expandArg) {\n          var _ret = _loop(i);\n\n          if (_ret === \"continue\") continue;\n        }\n\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapAttrTag\",\n    value: function mapAttrTag(tag) {\n      //*/\n      var tagCompiler = this.compileAttrTag(tag);\n      var newTag = tagCompiler(this);\n      tag.replaceWith(newTag);\n      return newTag;\n      /*/\n      \tlet attrProperty = tag.getAttribute('cv-attr');\n      \ttag.removeAttribute('cv-attr');\n      \tlet pairs = attrProperty.split(',');\n      let attrs = pairs.map((p) => p.split(':'));\n      \tfor (let i in attrs)\n      {\n      \tlet proxy        = this.args;\n      \tlet bindProperty = attrs[i][1];\n      \tlet property     = bindProperty;\n      \t\tif(bindProperty.match(/\\./))\n      \t{\n      \t\t[proxy, property] = Bindable.resolve(\n      \t\t\tthis.args\n      \t\t\t, bindProperty\n      \t\t\t, true\n      \t\t);\n      \t}\n      \t\tlet attrib = attrs[i][0];\n      \t\tthis.onRemove(proxy.bindTo(\n      \t\tproperty\n      \t\t, (v)=>{\n      \t\t\tif(v == null)\n      \t\t\t{\n      \t\t\t\ttag.setAttribute(attrib, '');\n      \t\t\t\treturn;\n      \t\t\t}\n      \t\t\ttag.setAttribute(attrib, v);\n      \t\t}\n      \t));\n      }\n      \treturn tag;\n      \t//*/\n    }\n  }, {\n    key: \"compileAttrTag\",\n    value: function compileAttrTag(sourceTag) {\n      var attrProperty = sourceTag.getAttribute('cv-attr');\n      var pairs = attrProperty.split(',');\n      var attrs = pairs.map(function (p) {\n        return p.split(':');\n      });\n      sourceTag.removeAttribute('cv-attr');\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n\n        var _loop2 = function _loop2(i) {\n          var bindProperty = attrs[i][1] || attrs[i][0];\n\n          var _Bindable$resolve3 = _Bindable.Bindable.resolve(bindingView.args, bindProperty, true),\n              _Bindable$resolve4 = _slicedToArray(_Bindable$resolve3, 2),\n              proxy = _Bindable$resolve4[0],\n              property = _Bindable$resolve4[1];\n\n          var attrib = attrs[i][0];\n          bindingView.onRemove(proxy.bindTo(property, function (v, k, t, d) {\n            if (d || v === undefined) {\n              tag.removeAttribute(attrib, v);\n              return;\n            }\n\n            if (v === null) {\n              tag.setAttribute(attrib, '');\n              return;\n            }\n\n            tag.setAttribute(attrib, v);\n          }));\n        };\n\n        for (var i in attrs) {\n          _loop2(i);\n        }\n\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapInterpolatableTag\",\n    value: function mapInterpolatableTag(tag) {\n      var _this6 = this;\n\n      var regex = this.interpolateRegex;\n\n      if (tag.nodeType === Node.TEXT_NODE) {\n        var original = tag.nodeValue;\n\n        if (!this.interpolatable(original)) {\n          return tag;\n        }\n\n        var header = 0;\n        var match;\n\n        var _loop3 = function _loop3() {\n          var bindProperty = match[2];\n          var unsafeHtml = false;\n          var unsafeView = false;\n          var propertySplit = bindProperty.split('|');\n          var transformer = false;\n\n          if (propertySplit.length > 1) {\n            transformer = _this6.stringTransformer(propertySplit.slice(1));\n            bindProperty = propertySplit[0];\n          }\n\n          if (bindProperty.substr(0, 2) === '$$') {\n            unsafeHtml = true;\n            unsafeView = true;\n            bindProperty = bindProperty.substr(2);\n          }\n\n          if (bindProperty.substr(0, 1) === '$') {\n            unsafeHtml = true;\n            bindProperty = bindProperty.substr(1);\n          }\n\n          if (bindProperty.substr(0, 3) === '000') {\n            expand = true;\n            bindProperty = bindProperty.substr(3);\n            return \"continue\";\n          }\n\n          var staticPrefix = original.substring(header, match.index);\n          header = match.index + match[1].length;\n          var staticNode = document.createTextNode(staticPrefix);\n          staticNode[dontParse] = true;\n          tag.parentNode.insertBefore(staticNode, tag);\n          var dynamicNode = void 0;\n\n          if (unsafeHtml) {\n            dynamicNode = document.createElement('div');\n          } else {\n            dynamicNode = document.createTextNode('');\n          }\n\n          dynamicNode[dontParse] = true;\n          var proxy = _this6.args;\n          var property = bindProperty;\n\n          if (bindProperty.match(/\\./)) {\n            var _Bindable$resolve5 = _Bindable.Bindable.resolve(_this6.args, bindProperty, true);\n\n            var _Bindable$resolve6 = _slicedToArray(_Bindable$resolve5, 2);\n\n            proxy = _Bindable$resolve6[0];\n            property = _Bindable$resolve6[1];\n          }\n\n          tag.parentNode.insertBefore(dynamicNode, tag);\n          var debind = proxy.bindTo(property, function (v, k, t) {\n            if (t[k] instanceof View && t[k] !== v) {\n              if (!t[k].preserve) {\n                t[k].remove();\n              }\n            }\n\n            dynamicNode.nodeValue = '';\n\n            if (unsafeView && !(v instanceof View)) {\n              var unsafeTemplate = v;\n              v = new View(_this6.args, _this6);\n              v.template = unsafeTemplate;\n            }\n\n            if (v instanceof View) {\n              var onAttach = function onAttach(parentNode) {\n                v.attached(parentNode);\n              };\n\n              _this6.attach.add(onAttach);\n\n              v.render(tag.parentNode, dynamicNode);\n\n              var cleanup = function cleanup() {\n                if (!v.preserve) {\n                  v.remove();\n                }\n              };\n\n              _this6.onRemove(cleanup);\n\n              v.onRemove(function () {\n                _this6.attach.remove(onAttach);\n\n                _this6._onRemove.remove(cleanup);\n              });\n            } else {\n              if (transformer) {\n                v = transformer(v);\n              }\n\n              if (v instanceof Object && v.__toString instanceof Function) {\n                v = v.__toString();\n              }\n\n              if (unsafeHtml) {\n                dynamicNode.innerHTML = v;\n              } else {\n                dynamicNode.nodeValue = v;\n              }\n\n              dynamicNode[dontParse] = true;\n            }\n          });\n\n          _this6.onRemove(function () {\n            debind();\n\n            if (!proxy.isBound()) {\n              _Bindable.Bindable.clearBindings(proxy);\n            }\n          });\n        };\n\n        while (match = regex.exec(original)) {\n          var _ret2 = _loop3();\n\n          if (_ret2 === \"continue\") continue;\n        }\n\n        var staticSuffix = original.substring(header);\n        var staticNode = document.createTextNode(staticSuffix);\n        staticNode[dontParse] = true;\n        tag.parentNode.insertBefore(staticNode, tag);\n        tag.nodeValue = '';\n      }\n\n      if (tag.nodeType === Node.ELEMENT_NODE) {\n        var _loop4 = function _loop4(i) {\n          if (!_this6.interpolatable(tag.attributes[i].value)) {\n            // console.log('!!', tag.attributes[i].value);\n            return \"continue\";\n          } // console.log(tag.attributes[i].value);\n\n\n          var header = 0;\n          var match = void 0;\n          var original = tag.attributes[i].value;\n          var attribute = tag.attributes[i];\n          var bindProperties = {};\n          var segments = [];\n\n          while (match = regex.exec(original)) {\n            segments.push(original.substring(header, match.index));\n\n            if (!bindProperties[match[2]]) {\n              bindProperties[match[2]] = [];\n            }\n\n            bindProperties[match[2]].push(segments.length);\n            segments.push(match[1]);\n            header = match.index + match[1].length;\n          }\n\n          segments.push(original.substring(header));\n\n          var _loop5 = function _loop5(j) {\n            var proxy = _this6.args;\n            var property = j;\n            var propertySplit = j.split('|');\n            var transformer = false;\n            var longProperty = j;\n\n            if (propertySplit.length > 1) {\n              transformer = _this6.stringTransformer(propertySplit.slice(1));\n              property = propertySplit[0];\n            }\n\n            if (property.match(/\\./)) {\n              var _Bindable$resolve7 = _Bindable.Bindable.resolve(_this6.args, property, true);\n\n              var _Bindable$resolve8 = _slicedToArray(_Bindable$resolve7, 2);\n\n              proxy = _Bindable$resolve8[0];\n              property = _Bindable$resolve8[1];\n            } // if(property.match(/\\./))\n            // {\n            // \t[proxy, property] = Bindable.resolve(\n            // \t\tthis.args\n            // \t\t, property\n            // \t\t, true\n            // \t);\n            // }\n            // console.log(this.args, property);\n\n\n            var matching = [];\n            var bindProperty = j;\n            var matchingSegments = bindProperties[longProperty];\n\n            _this6.onRemove(proxy.bindTo(property, function (v, k, t, d) {\n              if (transformer) {\n                v = transformer(v);\n              }\n\n              for (var _i7 in bindProperties) {\n                for (var _j in bindProperties[longProperty]) {\n                  segments[bindProperties[longProperty][_j]] = t[_i7];\n\n                  if (k === property) {\n                    segments[bindProperties[longProperty][_j]] = v;\n                  }\n                }\n              }\n\n              tag.setAttribute(attribute.name, segments.join(''));\n            }));\n\n            _this6.onRemove(function () {\n              if (!proxy.isBound()) {\n                _Bindable.Bindable.clearBindings(proxy);\n              }\n            });\n          };\n\n          for (var j in bindProperties) {\n            _loop5(j);\n          }\n        };\n\n        for (var i = 0; i < tag.attributes.length; i++) {\n          var _ret3 = _loop4(i);\n\n          if (_ret3 === \"continue\") continue;\n        }\n      }\n\n      return tag;\n    }\n  }, {\n    key: \"mapRefTag\",\n    value: function mapRefTag(tag) {\n      var refAttr = tag.getAttribute('cv-ref');\n\n      var _refAttr$split = refAttr.split(':'),\n          _refAttr$split2 = _slicedToArray(_refAttr$split, 3),\n          refProp = _refAttr$split2[0],\n          _refAttr$split2$ = _refAttr$split2[1],\n          refClassname = _refAttr$split2$ === void 0 ? null : _refAttr$split2$,\n          _refAttr$split2$2 = _refAttr$split2[2],\n          refKey = _refAttr$split2$2 === void 0 ? null : _refAttr$split2$2;\n\n      if (!refClassname) {\n        refClassname = 'curvature/base/Tag';\n      }\n\n      var refClass = this.stringToClass(refClassname);\n      tag.removeAttribute('cv-ref');\n      Object.defineProperty(tag, '___tag___', {\n        enumerable: false,\n        writable: true\n      });\n      this.onRemove(function () {\n        tag.___tag___ = null;\n        tag.remove();\n      });\n      var parent = this;\n      var direct = this;\n\n      if (this.viewList) {\n        parent = this.viewList.parent; // if(!this.viewList.parent.tags[refProp])\n        // {\n        // \tthis.viewList.parent.tags[refProp] = [];\n        // }\n        // let refKeyVal = this.args[refKey];\n        // this.viewList.parent.tags[refProp][refKeyVal] = new refClass(\n        // \ttag, this, refProp, refKeyVal\n        // );\n      } else {// this.tags[refProp] = new refClass(\n          // \ttag, this, refProp\n          // );\n        }\n\n      var tagObject = new refClass(tag, this, refProp, undefined, direct);\n      tag.___tag___ = tagObject;\n      this.tags[refProp] = tag;\n\n      while (parent) {\n        if (!parent.parent) {}\n\n        var refKeyVal = this.args[refKey];\n\n        if (refKeyVal !== undefined) {\n          if (!parent.tags[refProp]) {\n            parent.tags[refProp] = [];\n          }\n\n          parent.tags[refProp][refKeyVal] = tagObject;\n        } else {\n          parent.tags[refProp] = tagObject;\n        }\n\n        parent = parent.parent;\n      }\n\n      return tag;\n    }\n  }, {\n    key: \"mapBindTag\",\n    value: function mapBindTag(tag) {\n      var _this7 = this;\n\n      var bindArg = tag.getAttribute('cv-bind');\n      var proxy = this.args;\n      var property = bindArg;\n      var top = null;\n\n      if (bindArg.match(/\\./)) {\n        var _Bindable$resolve9 = _Bindable.Bindable.resolve(this.args, bindArg, true);\n\n        var _Bindable$resolve10 = _slicedToArray(_Bindable$resolve9, 3);\n\n        proxy = _Bindable$resolve10[0];\n        property = _Bindable$resolve10[1];\n        top = _Bindable$resolve10[2];\n      }\n\n      if (proxy !== this.args) {\n        this.subBindings[bindArg] = this.subBindings[bindArg] || [];\n        this.onRemove(this.args.bindTo(top, function () {\n          while (_this7.subBindings.length) {\n            _this7.subBindings.shift()();\n          }\n        }));\n      }\n\n      var unsafeHtml = false;\n\n      if (property.substr(0, 1) === '$') {\n        property = property.substr(1);\n        unsafeHtml = true;\n      }\n\n      var debind = proxy.bindTo(property, function (v, k, t, d, p) {\n        if (p instanceof View && p !== v) {\n          p.remove();\n        }\n\n        var autoChangedEvent = new CustomEvent('cvAutoChanged', {\n          bubbles: true\n        });\n\n        if (['INPUT', 'SELECT', 'TEXTAREA'].includes(tag.tagName)) {\n          var _type = tag.getAttribute('type');\n\n          if (_type && _type.toLowerCase() === 'checkbox') {\n            tag.checked = !!v;\n            tag.dispatchEvent(autoChangedEvent);\n          } else if (_type && _type.toLowerCase() === 'radio') {\n            tag.checked = v == tag.value;\n            tag.dispatchEvent(autoChangedEvent);\n          } else if (_type !== 'file') {\n            if (tag.tagName === 'SELECT') {\n              for (var i in tag.options) {\n                var option = tag.options[i];\n\n                if (option.value == v) {\n                  tag.selectedIndex = i;\n                }\n              }\n            }\n\n            tag.value = v == null ? '' : v;\n            tag.dispatchEvent(autoChangedEvent);\n          }\n        } else {\n          if (v instanceof View) {\n            var _iterator = _createForOfIteratorHelper(tag.childNodes),\n                _step;\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var node = _step.value;\n                node.remove();\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n            var onAttach = function onAttach(parentNode) {\n              v.attached(parentNode);\n            };\n\n            _this7.attach.add(onAttach);\n\n            v.render(tag);\n            v.onRemove(function () {\n              return _this7.attach.remove(onAttach);\n            });\n          } else if (unsafeHtml) {\n            if (tag.innerHTML !== v) {\n              if (tag.innerHTML === v.substring(0, tag.innerHTML.length)) {\n                tag.innerHTML += v.substring(tag.innerHTML.length);\n              } else {\n                var _iterator2 = _createForOfIteratorHelper(tag.childNodes),\n                    _step2;\n\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    var _node = _step2.value;\n\n                    _node.remove();\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n\n                tag.innerHTML = v;\n              }\n            }\n          } else {\n            if (tag.textContent !== v) {\n              var _iterator3 = _createForOfIteratorHelper(tag.childNodes),\n                  _step3;\n\n              try {\n                for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                  var _node2 = _step3.value;\n\n                  _node2.remove();\n                }\n              } catch (err) {\n                _iterator3.e(err);\n              } finally {\n                _iterator3.f();\n              }\n\n              tag.textContent = v;\n            }\n          }\n        }\n      });\n\n      if (proxy !== this.args) {\n        this.subBindings[bindArg].push(debind);\n      }\n\n      this.onRemove(debind);\n      var type = tag.getAttribute('type');\n      var multi = tag.getAttribute('multiple');\n\n      var inputListener = function inputListener(event) {\n        if (event.target !== tag) {\n          return;\n        }\n\n        if (type && type.toLowerCase() === 'checkbox') {\n          if (tag.checked) {\n            proxy[property] = event.target.getAttribute('value');\n          } else {\n            proxy[property] = false;\n          }\n        } else if (event.target.matches('[contenteditable=true]')) {\n          proxy[property] = event.target.innerHTML;\n        } else if (type === 'file' && multi) {\n          var files = Array.from(event.target.files);\n\n          var current = proxy[property] || _Bindable.Bindable.onDeck(proxy, property);\n\n          if (!current || !files.length) {\n            proxy[property] = files;\n          } else {\n            var _loop6 = function _loop6(i) {\n              if (files[i] !== current[i]) {\n                files[i].toJSON = function () {\n                  return {\n                    name: file[i].name,\n                    size: file[i].size,\n                    type: file[i].type,\n                    date: file[i].lastModified\n                  };\n                };\n\n                current[i] = files[i];\n                return \"break\";\n              }\n            };\n\n            for (var i in files) {\n              var _ret4 = _loop6(i);\n\n              if (_ret4 === \"break\") break;\n            }\n          }\n        } else if (type === 'file' && !multi) {\n          var _file = event.target.files.item(0);\n\n          _file.toJSON = function () {\n            return {\n              name: _file.name,\n              size: _file.size,\n              type: _file.type,\n              date: _file.lastModified\n            };\n          };\n\n          proxy[property] = _file;\n        } else {\n          proxy[property] = event.target.value;\n        }\n      };\n\n      if (type === 'file' || type === 'radio') {\n        tag.addEventListener('change', inputListener);\n      } else {\n        tag.addEventListener('input', inputListener);\n        tag.addEventListener('change', inputListener);\n        tag.addEventListener('value-changed', inputListener);\n      }\n\n      this.onRemove(function (tag, eventListener) {\n        return function () {\n          if (type === 'file' || type === 'radio') {\n            tag.removeEventListener('change', inputListener);\n          } else {\n            tag.removeEventListener('input', inputListener);\n            tag.removeEventListener('change', inputListener);\n            tag.removeEventListener('value-changed', inputListener);\n          }\n\n          tag = undefined;\n          eventListener = undefined;\n        };\n      }(tag, inputListener));\n      tag.removeAttribute('cv-bind');\n      return tag;\n    }\n  }, {\n    key: \"mapOnTag\",\n    value: function mapOnTag(tag) {\n      var _this8 = this;\n\n      var referents = String(tag.getAttribute('cv-on'));\n      referents.split(';').map(function (a) {\n        return a.split(':');\n      }).map(function (a) {\n        a = a.map(function (a) {\n          return a.trim();\n        });\n        var argLen = a.length;\n        var eventName = String(a.shift()).trim();\n        var callbackName = String(a.shift() || eventName).trim();\n        var eventFlags = String(a.shift() || '').trim();\n        var argList = [];\n        var groups = /(\\w+)(?:\\(([$\\w\\s-'\",]+)\\))?/.exec(callbackName); // if(!groups)\n        // {\n        // \tthrow new Error(\n        // \t\t'Invalid event method referent: '\n        // \t\t+ tag.getAttribute('cv-on')\n        // \t);\n        // }\n\n        if (groups) {\n          callbackName = groups[1].replace(/(^[\\s\\n]+|[\\s\\n]+$)/, '');\n\n          if (groups[2]) {\n            argList = groups[2].split(',').map(function (s) {\n              return s.trim();\n            });\n          }\n\n          if (groups.length) {}\n        } else {\n          argList.push('$event');\n        }\n\n        if (!eventName || argLen === 1) {\n          eventName = callbackName;\n        }\n\n        var eventMethod;\n        var parent = _this8;\n\n        while (parent) {\n          if (typeof parent[callbackName] === 'function') {\n            var _ret5 = function () {\n              var _parent = parent;\n              var _callBackName = callbackName;\n\n              eventMethod = function eventMethod() {\n                _parent[_callBackName].apply(_parent, arguments);\n              };\n\n              return \"break\";\n            }();\n\n            if (_ret5 === \"break\") break;\n          }\n\n          if (parent.parent) {\n            parent = parent.parent;\n          } else {\n            break;\n          }\n        }\n\n        var eventListener = function eventListener(event) {\n          var argRefs = argList.map(function (arg) {\n            var match;\n\n            if (parseInt(arg) == arg) {\n              return arg;\n            } else if (arg === 'event' || arg === '$event') {\n              return event;\n            } else if (arg === '$view') {\n              return parent;\n            } else if (arg === '$tag') {\n              return tag;\n            } else if (arg === '$parent') {\n              return _this8.parent;\n            } else if (arg === '$subview') {\n              return _this8;\n            } else if (arg in _this8.args) {\n              return _this8.args[arg];\n            } else if (match = /^['\"]([\\w-]+?)[\"']$/.exec(arg)) {\n              return match[1];\n            }\n          });\n\n          if (!(typeof eventMethod === 'function')) {\n            throw new Error(\"\".concat(callbackName, \" is not defined on View object.\") + \"\\n\" + \"Tag:\" + \"\\n\" + \"\".concat(tag.outerHTML));\n          }\n\n          eventMethod.apply(void 0, _toConsumableArray(argRefs));\n        };\n\n        var eventOptions = {};\n\n        if (eventFlags.includes('p')) {\n          eventOptions.passive = true;\n        } else if (eventFlags.includes('P')) {\n          eventOptions.passive = false;\n        }\n\n        if (eventFlags.includes('c')) {\n          eventOptions.capture = true;\n        } else if (eventFlags.includes('C')) {\n          eventOptions.capture = false;\n        }\n\n        if (eventFlags.includes('o')) {\n          eventOptions.once = true;\n        } else if (eventFlags.includes('O')) {\n          eventOptions.once = false;\n        }\n\n        switch (eventName) {\n          case '_init':\n            eventListener();\n            break;\n\n          case '_attach':\n            _this8.attach.add(eventListener);\n\n            break;\n\n          case '_detach':\n            _this8.detach.add(eventListener);\n\n            break;\n\n          default:\n            tag.addEventListener(eventName, eventListener, eventOptions);\n\n            _this8.onRemove(function () {\n              tag.removeEventListener(eventName, eventListener, eventOptions);\n            });\n\n            break;\n        }\n\n        return [eventName, callbackName, argList];\n      });\n      tag.removeAttribute('cv-on');\n      return tag;\n    }\n  }, {\n    key: \"mapLinkTag\",\n    value: function mapLinkTag(tag) {\n      /*/\n      const tagCompiler = this.compileLinkTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      /*/\n      var linkAttr = tag.getAttribute('cv-link');\n      tag.setAttribute('href', linkAttr);\n\n      var linkClick = function linkClick(event) {\n        event.preventDefault();\n\n        if (linkAttr.substring(0, 4) === 'http' || linkAttr.substring(0, 2) === '//') {\n          window.open(tag.getAttribute('href', linkAttr));\n          return;\n        }\n\n        _Router.Router.go(tag.getAttribute('href'));\n      };\n\n      tag.addEventListener('click', linkClick);\n      this.onRemove(function (tag, eventListener) {\n        return function () {\n          tag.removeEventListener('click', eventListener);\n          tag = undefined;\n          eventListener = undefined;\n        };\n      }(tag, linkClick));\n      tag.removeAttribute('cv-link');\n      return tag; //*/\n    }\n  }, {\n    key: \"compileLinkTag\",\n    value: function compileLinkTag(sourceTag) {\n      var linkAttr = sourceTag.getAttribute('cv-link');\n      sourceTag.removeAttribute('cv-link');\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n        tag.setAttribute('href', linkAttr);\n        tag.addEventListener('click', View.linkClicked);\n        bindingView.onRemove(function () {\n          return tag.removeEventListener(View.linkClicked);\n        });\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapPrendererTag\",\n    value: function mapPrendererTag(tag) {\n      var prerenderAttr = tag.getAttribute('cv-prerender');\n      var prerendering = window.prerenderer || navigator.userAgent.match(/prerender/i);\n\n      if (prerendering) {\n        window.prerenderer = window.prerenderer || true;\n      }\n\n      if (prerenderAttr === 'never' && prerendering || prerenderAttr === 'only' && !prerendering) {\n        tag.parentNode.removeChild(tag);\n      }\n\n      return tag;\n    }\n  }, {\n    key: \"mapWithTag\",\n    value: function mapWithTag(tag) {\n      var _this9 = this;\n\n      var withAttr = tag.getAttribute('cv-with');\n      var carryAttr = tag.getAttribute('cv-carry');\n      var viewAttr = tag.getAttribute('cv-view');\n      tag.removeAttribute('cv-with');\n      tag.removeAttribute('cv-carry');\n      tag.removeAttribute('cv-view');\n      var viewClass = viewAttr ? this.stringToClass(viewAttr) : View;\n      var subTemplate = new DocumentFragment();\n      Array.from(tag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n);\n      });\n      var carryProps = [];\n\n      if (carryAttr) {\n        carryProps = carryAttr.split(',').map(function (s) {\n          return s.trim();\n        });\n      }\n\n      var debind = this.args.bindTo(withAttr, function (v, k, t, d) {\n        if (_this9.withViews[k]) {\n          _this9.withViews[k].remove();\n        }\n\n        while (tag.firstChild) {\n          tag.removeChild(tag.firstChild);\n        }\n\n        var view = new viewClass({}, _this9);\n\n        _this9.onRemove(function (view) {\n          return function () {\n            view.remove();\n          };\n        }(view));\n\n        view.template = subTemplate;\n\n        var _loop7 = function _loop7(i) {\n          var debind = _this9.args.bindTo(carryProps[i], function (v, k) {\n            view.args[k] = v;\n          });\n\n          view.onRemove(debind);\n\n          _this9.onRemove(function () {\n            debind();\n            view.remove();\n          });\n        };\n\n        for (var i in carryProps) {\n          _loop7(i);\n        }\n\n        var _loop8 = function _loop8(_i8) {\n          var debind = v.bindTo(_i8, function (vv, kk) {\n            view.args[kk] = vv;\n          });\n          var debindUp = view.args.bindTo(_i8, function (vv, kk) {\n            v[kk] = vv;\n          });\n\n          _this9.onRemove(function () {\n            debind();\n\n            if (!v.isBound()) {\n              _Bindable.Bindable.clearBindings(v);\n            }\n\n            view.remove();\n          });\n\n          view.onRemove(function () {\n            debind();\n\n            if (!v.isBound()) {\n              _Bindable.Bindable.clearBindings(v);\n            }\n          });\n        };\n\n        for (var _i8 in v) {\n          _loop8(_i8);\n        }\n\n        view.render(tag);\n        _this9.withViews[k] = view;\n      });\n      this.onRemove(debind);\n      return tag;\n    }\n  }, {\n    key: \"mapEachTag\",\n    value: function mapEachTag(tag) {\n      var _this10 = this;\n\n      var eachAttr = tag.getAttribute('cv-each');\n      var viewAttr = tag.getAttribute('cv-view');\n      tag.removeAttribute('cv-each');\n      tag.removeAttribute('cv-view');\n      var viewClass = viewAttr ? this.stringToClass(viewAttr) : View;\n      var subTemplate = new DocumentFragment();\n      Array.from(tag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n);\n      });\n\n      var _eachAttr$split = eachAttr.split(':'),\n          _eachAttr$split2 = _slicedToArray(_eachAttr$split, 3),\n          eachProp = _eachAttr$split2[0],\n          asProp = _eachAttr$split2[1],\n          keyProp = _eachAttr$split2[2];\n\n      var debind = this.args.bindTo(eachProp, function (v, k, t, d, p) {\n        if (_this10.viewLists[eachProp]) {\n          _this10.viewLists[eachProp].remove();\n        }\n\n        var viewList = new _ViewList.ViewList(subTemplate, asProp, v, _this10, keyProp, viewClass);\n\n        var viewListRemover = function viewListRemover() {\n          return viewList.remove();\n        };\n\n        _this10.onRemove(viewListRemover);\n\n        viewList.onRemove(function () {\n          return _this10._onRemove.remove(viewListRemover);\n        });\n\n        var debindA = _this10.args.bindTo(function (v, k, t, d) {\n          if (k === '_id') {\n            return;\n          }\n\n          viewList.subArgs[k] = v;\n        });\n\n        var debindB = viewList.args.bindTo(function (v, k, t, d, p) {\n          if (k === '_id' || k === 'value' || k.substring(0, 3) === '___') {\n            return;\n          }\n\n          if (k in _this10.args) {\n            _this10.args[k] = v;\n          }\n        });\n        viewList.onRemove(debindA);\n        viewList.onRemove(debindB);\n\n        _this10.onRemove(debindA);\n\n        _this10.onRemove(debindB);\n\n        while (tag.firstChild) {\n          tag.removeChild(tag.firstChild);\n        }\n\n        _this10.viewLists[eachProp] = viewList;\n        viewList.render(tag);\n      });\n      this.onRemove(debind);\n      return tag;\n    }\n  }, {\n    key: \"mapIfTag\",\n    value: function mapIfTag(tag) {\n      /*/\n      const tagCompiler = this.compileIfTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      \t/*/\n      var sourceTag = tag;\n      var ifProperty = sourceTag.getAttribute('cv-if');\n      var inverted = false;\n      sourceTag.removeAttribute('cv-if');\n\n      if (ifProperty.substr(0, 1) === '!') {\n        ifProperty = ifProperty.substr(1);\n        inverted = true;\n      }\n\n      var subTemplate = new DocumentFragment();\n      Array.from(sourceTag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n);\n      } // n => subTemplate.appendChild(n.cloneNode(true))\n      );\n      var bindingView = this;\n      var ifDoc = new DocumentFragment();\n      var view = new View(this.args, bindingView);\n      view.template = subTemplate; // view.parent   = bindingView;\n      // bindingView.syncBind(view);\n\n      var proxy = bindingView.args;\n      var property = ifProperty;\n\n      if (ifProperty.match(/\\./)) {\n        var _Bindable$resolve11 = _Bindable.Bindable.resolve(bindingView.args, ifProperty, true);\n\n        var _Bindable$resolve12 = _slicedToArray(_Bindable$resolve11, 2);\n\n        proxy = _Bindable$resolve12[0];\n        property = _Bindable$resolve12[1];\n      }\n\n      var hasRendered = false;\n      var propertyDebind = proxy.bindTo(property, function (v, k) {\n        if (!hasRendered) {\n          var initValue = proxy[property];\n          var renderDoc = !!initValue ^ !!inverted ? tag : ifDoc;\n          view.render(renderDoc);\n          hasRendered = true;\n          return;\n        }\n\n        if (Array.isArray(v)) {\n          v = !!v.length;\n        }\n\n        if (inverted) {\n          v = !v;\n        }\n\n        if (v) {\n          tag.appendChild(ifDoc);\n        } else {\n          view.nodes.map(function (n) {\n            return ifDoc.appendChild(n);\n          });\n        }\n      }); // const propertyDebind = this.args.bindChain(property, onUpdate);\n\n      bindingView.onRemove(propertyDebind);\n\n      var bindableDebind = function bindableDebind() {\n        if (!proxy.isBound()) {\n          _Bindable.Bindable.clearBindings(proxy);\n        }\n      };\n\n      var viewDebind = function viewDebind() {\n        propertyDebind();\n        bindableDebind();\n\n        bindingView._onRemove.remove(propertyDebind);\n\n        bindingView._onRemove.remove(bindableDebind);\n      };\n\n      bindingView.onRemove(viewDebind);\n      return tag; //*/\n    }\n  }, {\n    key: \"compileIfTag\",\n    value: function compileIfTag(sourceTag) {\n      var ifProperty = sourceTag.getAttribute('cv-if');\n      var inverted = false;\n      sourceTag.removeAttribute('cv-if');\n\n      if (ifProperty.substr(0, 1) === '!') {\n        ifProperty = ifProperty.substr(1);\n        inverted = true;\n      }\n\n      var subTemplate = new DocumentFragment();\n      Array.from(sourceTag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n.cloneNode(true));\n      });\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode();\n        var ifDoc = new DocumentFragment();\n        var view = new View({}, bindingView);\n        view.template = subTemplate; // view.parent   = bindingView;\n\n        bindingView.syncBind(view);\n        var proxy = bindingView.args;\n        var property = ifProperty;\n\n        if (ifProperty.match(/\\./)) {\n          var _Bindable$resolve13 = _Bindable.Bindable.resolve(bindingView.args, ifProperty, true);\n\n          var _Bindable$resolve14 = _slicedToArray(_Bindable$resolve13, 2);\n\n          proxy = _Bindable$resolve14[0];\n          property = _Bindable$resolve14[1];\n        }\n\n        var hasRendered = false;\n        var propertyDebind = proxy.bindTo(property, function (v, k) {\n          if (!hasRendered) {\n            var renderDoc = bindingView.args[property] || inverted ? tag : ifDoc;\n            view.render(renderDoc);\n            hasRendered = true;\n            return;\n          }\n\n          if (Array.isArray(v)) {\n            v = !!v.length;\n          }\n\n          if (inverted) {\n            v = !v;\n          }\n\n          if (v) {\n            tag.appendChild(ifDoc);\n          } else {\n            view.nodes.map(function (n) {\n              return ifDoc.appendChild(n);\n            });\n          }\n        }); // let cleaner = bindingView;\n        // while(cleaner.parent)\n        // {\n        // \tcleaner = cleaner.parent;\n        // }\n\n        bindingView.onRemove(propertyDebind);\n\n        var bindableDebind = function bindableDebind() {\n          if (!proxy.isBound()) {\n            _Bindable.Bindable.clearBindings(proxy);\n          }\n        };\n\n        var viewDebind = function viewDebind() {\n          propertyDebind();\n          bindableDebind();\n\n          bindingView._onRemove.remove(propertyDebind);\n\n          bindingView._onRemove.remove(bindableDebind);\n        };\n\n        view.onRemove(viewDebind);\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapTemplateTag\",\n    value: function mapTemplateTag(tag) {\n      var templateName = tag.getAttribute('cv-template');\n      tag.removeAttribute('cv-template');\n\n      this.subTemplates[templateName] = function () {\n        return tag.tagName === 'TEMPLATE' ? tag.content.cloneNode(true) : new DocumentFragment(tag.innerHTML);\n      };\n\n      return tag;\n    }\n  }, {\n    key: \"mapSlotTag\",\n    value: function mapSlotTag(tag) {\n      var templateName = tag.getAttribute('cv-slot');\n      var getTemplate = this.subTemplates[templateName];\n\n      if (!getTemplate) {\n        var parent = this;\n\n        while (parent) {\n          getTemplate = parent.subTemplates[templateName];\n\n          if (getTemplate) {\n            break;\n          }\n\n          parent = this.parent;\n        }\n\n        if (!getTemplate) {\n          console.error(\"Template \".concat(templateName, \" not found.\"));\n          return;\n        }\n      }\n\n      var template = getTemplate();\n      tag.removeAttribute('cv-slot');\n\n      while (tag.firstChild) {\n        tag.firstChild.remove();\n      }\n\n      tag.appendChild(template);\n      return tag;\n    }\n  }, {\n    key: \"syncBind\",\n    value: function syncBind(subView) {\n      var _this11 = this;\n\n      var debindA = this.args.bindTo(function (v, k, t, d) {\n        if (k === '_id') {\n          return;\n        }\n\n        if (subView.args[k] !== v) {\n          subView.args[k] = v;\n        }\n      }); // for(let i in this.args)\n      // {\n      // \tif(i == '_id')\n      // \t{\n      // \t\tcontinue;\n      // \t}\n      // \tsubView.args[i] = this.args[i];\n      // }\n\n      var debindB = subView.args.bindTo(function (v, k, t, d, p) {\n        if (k === '_id') {\n          return;\n        }\n\n        var newRef = v;\n        var oldRef = p;\n\n        if (newRef instanceof View) {\n          newRef = newRef.___ref___;\n        }\n\n        if (oldRef instanceof View) {\n          oldRef = oldRef.___ref___;\n        }\n\n        if (newRef !== oldRef && oldRef instanceof View) {\n          p.remove();\n        }\n\n        if (k in _this11.args) {\n          _this11.args[k] = v;\n        }\n      });\n      this.onRemove(debindA);\n      this.onRemove(debindB);\n      subView.onRemove(function () {\n        _this11._onRemove.remove(debindA);\n\n        _this11._onRemove.remove(debindB);\n      });\n    }\n  }, {\n    key: \"postRender\",\n    value: function postRender(parentNode) {}\n  }, {\n    key: \"attached\",\n    value: function attached(parentNode) {}\n  }, {\n    key: \"interpolatable\",\n    value: function interpolatable(str) {\n      return !!String(str).match(this.interpolateRegex);\n    }\n  }, {\n    key: \"uuid\",\n    value: function uuid() {\n      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n        return (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16);\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var _this12 = this;\n\n      var now = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      var remover = function remover() {\n        _this12.firstNode = _this12.lastNode = undefined;\n\n        for (var _i9 in _this12.nodes) {\n          _this12.nodes[_i9].dispatchEvent(new Event('cvDomDetached'));\n\n          _this12.nodes[_i9].remove();\n        }\n      };\n\n      if (now) {\n        remover();\n      } else {\n        requestAnimationFrame(remover);\n      }\n\n      var callbacks = this._onRemove.items();\n\n      var _iterator4 = _createForOfIteratorHelper(callbacks),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var callback = _step4.value;\n\n          this._onRemove.remove(callback);\n\n          callback();\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      var cleanup;\n\n      while (cleanup = this.cleanup.shift()) {\n        cleanup && cleanup();\n      }\n\n      for (var _i10 in this.viewLists) {\n        if (!this.viewLists[_i10]) {\n          continue;\n        }\n\n        this.viewLists[_i10].remove();\n      }\n\n      this.viewLists = [];\n\n      for (var _i11 in this.timeouts) {\n        clearTimeout(this.timeouts[_i11].timeout);\n        delete this.timeouts[_i11];\n      }\n\n      for (var i in this.intervals) {\n        clearInterval(this.intervals[i].timeout);\n        delete this.intervals[i];\n      }\n\n      for (var i in this.frames) {\n        this.frames[i]();\n        delete this.frames[i];\n      }\n\n      this.removed = true;\n    }\n  }, {\n    key: \"findTag\",\n    value: function findTag(selector) {\n      for (var i in this.nodes) {\n        var result = void 0;\n\n        if (!this.nodes[i].querySelector) {\n          continue;\n        }\n\n        if (this.nodes[i].matches(selector)) {\n          return this.nodes[i];\n        }\n\n        if (result = this.nodes[i].querySelector(selector)) {\n          return result;\n        }\n      }\n    }\n  }, {\n    key: \"findTags\",\n    value: function findTags(selector) {\n      return this.nodes, map(function (n) {\n        return n.querySelectorAll(selector);\n      }).flat();\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove(callback) {\n      this._onRemove.add(callback);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {}\n  }, {\n    key: \"beforeUpdate\",\n    value: function beforeUpdate(args) {}\n  }, {\n    key: \"afterUpdate\",\n    value: function afterUpdate(args) {}\n  }, {\n    key: \"stringTransformer\",\n    value: function stringTransformer(methods) {\n      var _this13 = this;\n\n      return function (x) {\n        for (var m in methods) {\n          var parent = _this13;\n          var method = methods[m];\n\n          while (parent && !parent[method]) {\n            parent = parent.parent;\n          }\n\n          if (!parent) {\n            return;\n          }\n\n          x = parent[methods[m]](x);\n        }\n\n        return x;\n      };\n    }\n  }, {\n    key: \"stringToClass\",\n    value: function stringToClass(refClassname) {\n      if (View.refClasses.has(refClassname)) {\n        return View.refClasses.get(refClassname);\n      }\n\n      var refClassSplit = refClassname.split('/');\n      var refShortClass = refClassSplit[refClassSplit.length - 1];\n\n      var refClass = require(refClassname);\n\n      View.refClasses.set(refClassname, refClass[refShortClass]);\n      return refClass[refShortClass];\n    }\n  }, {\n    key: \"preventParsing\",\n    value: function preventParsing(node) {\n      node[dontParse] = true;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.nodes.map(function (n) {\n        return n.outerHTML;\n      }).join(' ');\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(node, eventName, callback, options) {\n      node.addEventListener(eventName, callback, options);\n\n      var remove = function remove() {\n        node.removeEventListener(eventName, callback, options);\n      };\n\n      var remover = function remover() {\n        remove();\n\n        remove = function remove() {};\n      };\n\n      this.onRemove(function () {\n        return remover();\n      });\n      return remover;\n    }\n  }], [{\n    key: \"isView\",\n    value: function isView() {\n      return View;\n    }\n  }]);\n\n  return View;\n}();\n\nexports.View = View;\nObject.defineProperty(View, 'templates', {\n  enumerable: false,\n  writable: false,\n  value: new Map()\n});\nObject.defineProperty(View, 'refClasses', {\n  enumerable: false,\n  writable: false,\n  value: new Map()\n});\nObject.defineProperty(View, 'linkClicked', function (event) {\n  event.preventDefault();\n  var href = event.target.getAttribute('href');\n\n  if (href.substring(0, 4) === 'http' || href.substring(0, 2) === '//') {\n    window.open(href);\n    return;\n  }\n\n  _Router.Router.go(href);\n});\n  })();\n});","\nrequire.register(\"curvature/base/ViewList.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewList = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nvar _View = require(\"./View\");\n\nvar _Bag = require(\"./Bag\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ViewList = /*#__PURE__*/function () {\n  function ViewList(template, subProperty, list, parent) {\n    var _this = this;\n\n    var keyProperty = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    var viewClass = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n\n    _classCallCheck(this, ViewList);\n\n    this.removed = false;\n    this.args = _Bindable.Bindable.makeBindable({});\n    this.args.value = _Bindable.Bindable.makeBindable(list || {});\n    this.subArgs = _Bindable.Bindable.makeBindable({});\n    this.views = [];\n    this.cleanup = [];\n    this.viewClass = viewClass || _View.View;\n    this._onRemove = new _Bag.Bag();\n    this.template = template;\n    this.subProperty = subProperty;\n    this.keyProperty = keyProperty;\n    this.tag = null;\n    this.paused = false;\n    this.parent = parent;\n    this.rendered = new Promise(function (accept, reject) {\n      Object.defineProperty(_this, 'renderComplete', {\n        configurable: false,\n        writable: true,\n        value: accept\n      });\n    });\n    this.willReRender = false;\n\n    this.args.___before(function (t, e, s, o) {\n      if (e == 'bindTo') {\n        return;\n      }\n\n      _this.paused = true;\n    });\n\n    this.args.___after(function (t, e, s, o) {\n      if (e == 'bindTo') {\n        return;\n      }\n\n      _this.paused = s.length > 1;\n\n      _this.reRender();\n    });\n\n    var debind = this.args.value.bindTo(function (v, k, t, d) {\n      if (_this.paused) {\n        return;\n      }\n\n      var kk = k;\n\n      if (isNaN(k)) {\n        kk = '_' + k;\n      }\n\n      if (d) {\n        if (_this.views[kk]) {\n          _this.views[kk].remove();\n        }\n\n        delete _this.views[kk]; // this.views.splice(k,1);\n\n        for (var i in _this.views) {\n          if (typeof i === 'string') {\n            _this.views[i].args[_this.keyProperty] = i.substr(1);\n            continue;\n          }\n\n          _this.views[i].args[_this.keyProperty] = i;\n        }\n      } else if (!_this.views[kk] && !_this.willReRender) {\n        _this.willReRender = requestAnimationFrame(function () {\n          _this.reRender();\n        });\n      } else if (_this.views[kk] && _this.views[kk].args) {\n        _this.views[kk].args[_this.keyProperty] = k;\n        _this.views[kk].args[_this.subProperty] = v;\n      }\n    });\n\n    this._onRemove.add(debind);\n  }\n\n  _createClass(ViewList, [{\n    key: \"render\",\n    value: function render(tag) {\n      var _this2 = this;\n\n      var renders = [];\n\n      var _iterator = _createForOfIteratorHelper(this.views),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var view = _step.value;\n          view.render(tag);\n          renders.push(view.rendered.then(function () {\n            return view;\n          }));\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.tag = tag;\n      Promise.all(renders).then(function (views) {\n        return _this2.renderComplete(views);\n      });\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      var _this3 = this;\n\n      if (this.paused || !this.tag) {\n        return;\n      }\n\n      var views = [];\n\n      for (var i in this.views) {\n        views[i] = this.views[i];\n      }\n\n      var finalViews = [];\n\n      for (var _i in this.args.value) {\n        var found = false;\n        var k = _i;\n\n        if (isNaN(k)) {\n          k = '_' + _i;\n        }\n\n        for (var j in views) {\n          if (views[j] && this.args.value[_i] !== undefined && this.args.value[_i] === views[j].args[this.subProperty]) {\n            found = true;\n            finalViews[k] = views[j];\n            finalViews[k].args[this.keyProperty] = _i;\n            delete views[j];\n            break;\n          }\n        }\n\n        if (!found) {\n          (function () {\n            var viewArgs = {};\n            var view = finalViews[k] = new _this3.viewClass(viewArgs, _this3.parent);\n            finalViews[k].template = _this3.template instanceof Object ? _this3.template : _this3.template; // finalViews[k].parent   = this.parent;\n\n            finalViews[k].viewList = _this3;\n            finalViews[k].args[_this3.keyProperty] = _i;\n            finalViews[k].args[_this3.subProperty] = _this3.args.value[_i];\n            var upDebind = viewArgs.bindTo(_this3.subProperty, function (v, k) {\n              var index = viewArgs[_this3.keyProperty];\n              _this3.args.value[index] = v;\n            });\n\n            var downDebind = _this3.subArgs.bindTo(function (v, k, t, d) {\n              viewArgs[k] = v;\n            });\n\n            view.onRemove(function () {\n              upDebind();\n              downDebind();\n\n              _this3._onRemove.remove(upDebind);\n\n              _this3._onRemove.remove(downDebind);\n            });\n\n            _this3._onRemove.add(upDebind);\n\n            _this3._onRemove.add(downDebind);\n\n            viewArgs[_this3.subProperty] = _this3.args.value[_i];\n          })();\n        }\n      }\n\n      for (var _i2 in views) {\n        var _found = false;\n\n        for (var _j in finalViews) {\n          if (views[_i2] === finalViews[_j]) {\n            _found = true;\n            break;\n          }\n        }\n\n        if (!_found) {\n          views[_i2].remove();\n        }\n      }\n\n      if (Array.isArray(this.args.value)) {\n        var renderRecurse = function renderRecurse() {\n          var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var ii = finalViews.length - i - 1;\n\n          if (!finalViews[ii]) {\n            return Promise.resolve();\n          }\n\n          if (finalViews[ii] === _this3.views[ii]) {\n            if (!finalViews[ii].firstNode) {\n              finalViews[ii].render(_this3.tag, finalViews[ii + 1]);\n              return finalViews[ii].rendered.then(function () {\n                return renderRecurse(i + 1);\n              });\n            }\n\n            return renderRecurse(i + 1);\n          }\n\n          finalViews[ii].render(_this3.tag, finalViews[ii + 1]);\n\n          _this3.views.splice(ii, 0, finalViews[ii]);\n\n          return finalViews[ii].rendered.then(function () {\n            return renderRecurse(i + 1);\n          });\n        };\n\n        this.rendered = renderRecurse();\n      } else {\n        var renders = [];\n        var leftovers = Object.assign({}, finalViews);\n\n        var _loop2 = function _loop2(_i3) {\n          delete leftovers[_i3];\n\n          if (finalViews[_i3].firstNode && finalViews[_i3] === _this3.views[_i3]) {\n            return \"continue\";\n          }\n\n          finalViews[_i3].render(_this3.tag);\n\n          renders.push(finalViews[_i3].rendered.then(function () {\n            return finalViews[_i3];\n          }));\n        };\n\n        for (var _i3 in finalViews) {\n          var _ret = _loop2(_i3);\n\n          if (_ret === \"continue\") continue;\n        }\n\n        for (var _i4 in leftovers) {\n          delete this.args.views[_i4];\n          leftovers.remove();\n        }\n\n        this.rendered = Promise.all(renders);\n      }\n\n      this.views = finalViews;\n\n      for (var _i5 in finalViews) {\n        if (isNaN(_i5)) {\n          finalViews[_i5].args[this.keyProperty] = _i5.substr(1);\n          continue;\n        }\n\n        finalViews[_i5].args[this.keyProperty] = _i5;\n      }\n\n      this.willReRender = false;\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var _pause = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      for (var i in this.views) {\n        this.views[i].pause(_pause);\n      }\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove(callback) {\n      this._onRemove.add(callback);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      for (var i in this.views) {\n        this.views[i].remove();\n      }\n\n      var onRemove = this._onRemove.items();\n\n      for (var _i6 in onRemove) {\n        this._onRemove.remove(onRemove[_i6]);\n\n        onRemove[_i6]();\n      }\n\n      var cleanup;\n\n      while (this.cleanup.length) {\n        cleanup = this.cleanup.pop();\n        cleanup();\n      }\n\n      this.views = [];\n\n      while (this.tag && this.tag.firstChild) {\n        this.tag.removeChild(this.tag.firstChild);\n      }\n\n      if (this.subArgs) {\n        _Bindable.Bindable.clearBindings(this.subArgs);\n      }\n\n      _Bindable.Bindable.clearBindings(this.args);\n\n      if (this.args.value && !this.args.value.isBound()) {\n        _Bindable.Bindable.clearBindings(this.args.value);\n      }\n\n      this.removed = true;\n    }\n  }]);\n\n  return ViewList;\n}();\n\nexports.ViewList = ViewList;\n  })();\n});","\nrequire.register(\"subspace-client/Channel.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-client\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Channel = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Channel = /*#__PURE__*/function () {\n  function Channel() {\n    _classCallCheck(this, Channel);\n  }\n\n  _createClass(Channel, null, [{\n    key: \"scalar\",\n    value: function scalar(data, type) {\n      var buffer = new Uint8Array(data).buffer;\n\n      if (type == 'float') {\n        return new Float64Array(buffer)[0];\n      } else if (type == 'Int32') {\n        return new Int32Array(buffer)[0];\n      }\n    }\n  }, {\n    key: \"namePart\",\n    value: function namePart(name, part) {\n      return name.split(':')[part] || null;\n    }\n  }, {\n    key: \"isWildcard\",\n    value: function isWildcard(name) {\n      return /\\*/.exec(name);\n    }\n  }, {\n    key: \"isRange\",\n    value: function isRange(name) {// return /\\*/.exec(name);\n    }\n  }, {\n    key: \"containsRange\",\n    value: function containsRange(name) {// return /\\*/.exec(name);\n    }\n  }, {\n    key: \"compareNames\",\n    value: function compareNames(a, b) {\n      var rangeForm = /^(\\d+)\\-?(\\d+)?$/;\n      var result = [];\n      var splitA = a.toString().split(':');\n      var splitB = b.toString().split(':');\n      var nodes = splitA.length;\n      var cmpA;\n      var cmpB;\n\n      if (nodes < splitB.length) {\n        nodes = splitB.length;\n      }\n\n      for (var i = 0; i < nodes; i++) {\n        if (splitA.length > i) {\n          cmpA = splitA[i];\n        } else if (splitA[splitA.length - 1] == '*') {\n          cmpA = splitA[splitA.length - 1];\n        } else {\n          return false;\n        }\n\n        if (splitB.length > i) {\n          cmpB = splitB[i];\n        } else if (splitB[splitB.length - 1] == '*') {\n          cmpB = splitB[splitB.length - 1];\n        } else {\n          return false;\n        }\n\n        var returnNode = cmpA !== '*' ? cmpA : cmpB;\n\n        if (cmpA !== cmpB) {\n          if (cmpA !== '*' && cmpB !== '*') {\n            var mA = rangeForm.exec(cmpA);\n            var mB = rangeForm.exec(cmpB);\n\n            if (mA && mB) {\n              var a1 = mA[1];\n              var a2 = mA[1];\n              var b1 = mB[1];\n              var b2 = mB[1];\n\n              if (mA[2]) {\n                a2 = mA[2];\n              }\n\n              if (mB[2]) {\n                b2 = mB[2];\n              }\n\n              if (a1 >= b1 && a2 <= b2) {\n                returnNode = \"\".concat(a1, \"-\").concat(a2);\n              } else if (a1 <= b1 && a2 > b2) {\n                returnNode = \"\".concat(b1, \"-\").concat(b2);\n              } else if (a2 <= b2 && a2 >= b1) {\n                returnNode = \"\".concat(b1, \"-\").concat(a2);\n              } else if (a1 <= b2 && a1 >= b1) {\n                returnNode = \"\".concat(a1, \"-\").concat(b2);\n              }\n\n              if (b2 <= a2 && b2 >= a1) {\n                returnNode = \"\".concat(a1, \"-\").concat(b2);\n              } else if (b1 <= a2 && b1 >= a1) {\n                returnNode = \"\".concat(b1, \"-\").concat(a2);\n              } else {\n                return false;\n              }\n            } else {\n              return false;\n            }\n          }\n        }\n\n        result.push(returnNode);\n      }\n\n      return result.join(':');\n    }\n  }]);\n\n  return Channel;\n}();\n\nexports.Channel = Channel;\n  })();\n});","\nrequire.register(\"subspace-client/Socket.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-client\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Socket = void 0;\n\nvar _Channel = require(\"./Channel\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Socket = /*#__PURE__*/function () {\n  _createClass(Socket, null, [{\n    key: \"get\",\n    value: function get(url) {\n      var refresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.sockets) {\n        this.sockets = {};\n      }\n\n      if (refresh || !this.sockets[url]) {\n        this.sockets[url] = new this(new WebSocket(url));\n      }\n\n      return this.sockets[url];\n    }\n  }]);\n\n  function Socket(socket) {\n    _classCallCheck(this, Socket);\n\n    this.socket = socket;\n    socket.binaryType = 'arraybuffer';\n    this.data = {};\n    this.listenerCount = {};\n    this.openQueue = [];\n    this._onSend = [];\n  }\n\n  _createClass(Socket, [{\n    key: \"subscribe\",\n    value: function subscribe(type, wildType, callback) {\n      var splitType = type.split(':');\n      var mainType = splitType.shift();\n      var channel = splitType.join(':');\n\n      if (wildType instanceof Function) {\n        callback = wildType;\n        wildType = channel;\n      }\n\n      if (channel) {\n        if (!(channel in this.listenerCount)) {\n          this.listenerCount[channel] = 0;\n        }\n\n        this.listenerCount[channel]++;\n        this.send(\"sub \".concat(channel));\n      }\n\n      var finalCallback = function (mainType, wildType, channel, callback) {\n        return function (event) {\n          var packet = {};\n          console.log(event);\n\n          try {\n            if (typeof event.data == 'string') {\n              packet = JSON.parse(event.data);\n            } else if (event.data instanceof ArrayBuffer) {\n              var channelNumber = new Uint16Array(event.data, 4, 1)[0];\n\n              if (!wildType || _Channel.Channel.compareNames(wildType, channelNumber)) {\n                callback(event, event.data.slice(6), channelNumber, new Uint16Array(event.data, 0, 1)[0] ? 'user' : 'server', new Uint16Array(event.data, 2, 1)[0], null, {});\n                return;\n              }\n            } else if (mainType !== 'message') {\n              callback(event);\n              return;\n            }\n          } catch (e) {\n            if (mainType !== 'message') {\n              callback(event);\n            }\n\n            return;\n          }\n\n          if (_typeof(packet) !== 'object') {\n            if (channel === '') {\n              callback(event, event.data, null, 'server', 0, null, packet);\n            }\n\n            return;\n          }\n\n          if (!wildType) {\n            callback(event, packet.message, null, packet.origin, packet.originId, null, packet);\n          }\n\n          if (wildType && 'channel' in packet) {\n            if (_Channel.Channel.compareNames(wildType, packet.channel)) {\n              callback(event, packet.message, packet.channel, packet.origin, packet.originId, packet.originalChannel, packet);\n            }\n          }\n        };\n      }(mainType, wildType, channel, callback);\n\n      this.socket.addEventListener(mainType, finalCallback);\n      return finalCallback;\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(type, callback) {\n      var splitType = type.split(':');\n      var mainType = splitType.shift();\n      var channel = splitType.join(':');\n\n      if (!channel) {\n        return;\n      }\n\n      this.listenerCount[channel]--;\n\n      if (channel in this.listenerCount && this.listenerCount[channel] > 0) {} else {\n        this.socket.removeEventListener(mainType, callback);\n        this.send(\"unsub \".concat(channel));\n      }\n    }\n  }, {\n    key: \"publish\",\n    value: function publish(channel, message) {\n      if (channel == parseInt(channel)) {\n        if (message instanceof ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (message.byteLength) {\n          message = new Uint8Array(message.buffer);\n        } else if (!Array.isArray(message)) {\n          message = [message];\n        }\n\n        var channelBytes = new Uint8Array(new Uint16Array([channel]).buffer);\n        var sendBuffer = new Uint8Array(channelBytes.byteLength + message.byteLength);\n        sendBuffer.set(channelBytes, 0);\n        sendBuffer.set(message, channelBytes.byteLength);\n        this.send(sendBuffer);\n        return;\n      }\n\n      this.send(\"pub \".concat(channel, \" \").concat(message));\n    }\n  }, {\n    key: \"say\",\n    value: function say(channel, users, message) {\n      var cc = [];\n      var bcc = [];\n\n      if (Array.isArray(users)) {\n        Object.assign(cc, users);\n      } else if (users.cc || users.bcc) {\n        if (Array.isArray(users.cc)) {\n          Object.assign(cc, users.cc);\n        }\n\n        if (Array.isArray(users.bcc)) {\n          Object.assign(bcc, users.bcc);\n        }\n      }\n\n      if (!cc && !bcc) {\n        var userListString = 'CANNOT STRINGIFY USERLIST';\n\n        try {\n          userListString = JSON.stringify(users);\n        } catch (error) {\n          userlistString += ' ' + error.message;\n        }\n\n        throw error('Invalid userlist provided:' + userListString);\n      }\n\n      var ccString = cc.length ? \"\".concat(cc.length, \" \").concat(cc.join(' ')) : \"0\";\n      var bccString = bcc.length ? \"\".concat(bcc.length, \" \").concat(bcc.join(' ')) : \"0\";\n      this.send(\"say \".concat(channel, \" \").concat(ccString, \" \").concat(bccString, \" \").concat(message));\n    }\n  }, {\n    key: \"send\",\n    value: function send(message) {\n      var _this = this;\n\n      if (this.socket.readyState !== this.socket.OPEN) {\n        return new Promise(function (accept, reject) {\n          var connectionOpened = function (c) {\n            return function (event) {\n              while (_this.openQueue.length) {\n                var _message = _this.openQueue.shift();\n\n                _this.send(_message);\n              }\n\n              _this.socket.removeEventListener('open', c);\n\n              accept();\n            };\n          }(connectionOpened);\n\n          _this.socket.addEventListener('open', connectionOpened);\n\n          _this.openQueue.unshift(message);\n        });\n      }\n\n      for (var i in this._onSend) {\n        this._onSend[i](message);\n      }\n\n      this.socket.send(message);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"onSend\",\n    value: function onSend(callback) {\n      this._onSend.push(callback);\n    }\n  }, {\n    key: \"close\",\n    value: function close(message) {\n      this.socket.close();\n    }\n  }, {\n    key: \"ping\",\n    value: function ping() {// this.socket.ping();\n    }\n  }, {\n    key: \"pong\",\n    value: function pong() {// this.socket.pong();\n    }\n  }]);\n\n  return Socket;\n}();\n\nexports.Socket = Socket;\n  })();\n});","\nrequire.register(\"subspace-console/Console.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-console\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Console = void 0;\n\nvar _View2 = require(\"curvature/base/View\");\n\nvar _MeltingText = require(\"./view/MeltingText\");\n\nvar _Task = require(\"./Task\");\n\nvar _Path = require(\"./Path\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar Console = /*#__PURE__*/function (_View) {\n  _inherits(Console, _View);\n\n  var _super = _createSuper(Console);\n\n  function Console() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Console);\n\n    _this = _super.call(this, args);\n    var defaults = {\n      init: false,\n      path: _Path.Path\n    };\n    var allOptions = Object.assign({}, defaults, options);\n    _this.template = \"<div class = \\\"terminal [[inverted]]\\\" cv-on = \\\"click:focus(event)\\\">\\n\\t<div class = \\\"output\\\" cv-each = \\\"output:line:l\\\" cv-ref = \\\"output:curvature/base/Tag\\\">\\n\\t\\t<p>[[line]]</p>\\n\\t</div>\\n\\t<div class = \\\"bottom\\\">\\n\\t\\t<div>[[prompt]]&nbsp;</div>\\n\\t\\t<div>\\n\\t\\t\\t<form cv-on = \\\"submit:cancel(event)\\\">\\n\\t\\t\\t\\t<textarea\\n\\t\\t\\t\\t\\tcv-bind = \\\"input\\\"\\n\\t\\t\\t\\t\\tcv-on   = \\\":keydown(event);:keyup(event)\\\"\\n\\t\\t\\t\\t\\tcv-ref  = \\\"input:curvature/base/Tag\\\"\\n\\t\\t\\t\\t\\trow     = \\\"1\\\"\\n\\t\\t\\t\\t></textarea>\\n\\t\\t\\t</form>\\n\\n\\t\\t\\t<form cv-on = \\\"submit:cancel(event)\\\">\\n\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\tautocomplete = \\\"one-time-code\\\"\\n\\t\\t\\t\\t\\tname    = \\\"pw-input\\\"\\n\\t\\t\\t\\t\\ttype    = \\\"password\\\"\\n\\t\\t\\t\\t\\tcv-bind = \\\"input\\\"\\n\\t\\t\\t\\t\\tcv-ref  = \\\"password:curvature/base/Tag\\\"\\n\\t\\t\\t\\t\\tcv-on   = \\\":keydown(event,false);:keyup(event,false)\\\"\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</form>\\n\\n\\t\\t\\t<input\\n\\t\\t\\t\\tcv-on  = \\\"input:fileLoaded(event)\\\"\\n\\t\\t\\t\\tcv-ref = \\\"file:curvature/base/Tag\\\"\\n\\t\\t\\t\\tname   = \\\"file-input\\\"\\n\\t\\t\\t\\ttype   = \\\"file\\\"\\n\\t\\t\\t\\tstyle  = \\\"display: none\\\"\\n\\t\\t\\t/>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\\n<div class = \\\"scanlines\\\"></div>\\n\";\n    _this.args.input = '';\n    _this.args.output = [];\n    _this.args.inverted = '';\n    _this.localEcho = true;\n    _this.postToken = null;\n    _this.args.prompt = '::';\n    _this.routes = {};\n    _this.args.passwordMode = false;\n    _this.tasks = [];\n    _this.max = 512;\n    _this.historyCursor = -1;\n    _this.history = [];\n    _this.env = new Map();\n\n    _this.args.output.___after(function (t, k, o, a) {\n      if (k !== 'push') {\n        return;\n      }\n\n      if (_this.args.output.length > _this.max) {\n        var removed = _this.args.output.shift();\n\n        if (_typeof(removed) === 'object') {\n          removed.remove();\n        }\n      }\n\n      var scroller = _this.scroller;\n      var scrollTo = scroller === window ? document.body.scrollHeight : scroller.scrollHeight;\n\n      _this.onNextFrame(function () {\n        scroller.scrollTo({\n          behavior: 'smooth',\n          left: 0,\n          top: scroller.scrollHeight\n        });\n      });\n    });\n\n    if (allOptions.init) {\n      _this.runScript(allOptions.init);\n    }\n\n    _this.scroller = allOptions.scroller || window;\n    _this.path = allOptions.path || {};\n    _this.originalInput = '';\n    return _this;\n  }\n\n  _createClass(Console, [{\n    key: \"runCommand\",\n    value: function runCommand(command) {\n      // console.log(command);\n      if (this.historyCursor != 0) {\n        this.history.unshift(command);\n      }\n\n      var ret;\n\n      if (command.substring(0, 1) === '/') {\n        if (!this.args.passwordMode) {\n          this.args.output.push(\":: \".concat(command));\n        }\n\n        ret = this.interpret(command.substr(1));\n      } else if (this.tasks.length) {\n        if (!this.args.passwordMode) {\n          this.args.output.push(\"\".concat(this.tasks[0].prompt, \" \").concat(command));\n        }\n\n        ret = this.tasks[0].write(command) || Promise.resolve();\n      } else {\n        if (!this.args.passwordMode) {\n          this.args.output.push(\":: \".concat(command));\n        }\n\n        ret = this.interpret(command);\n      }\n\n      if (!(ret instanceof Promise)) {\n        ret = Promise.resolve(ret);\n      }\n\n      this.historyCursor = -1;\n      this.originalInput = this.args.input = '';\n      return ret;\n    }\n  }, {\n    key: \"runScript\",\n    value: function runScript(url) {\n      var _this2 = this;\n\n      fetch(url + '?api=txt').then(function (response) {\n        return response.text();\n      }).then(function (init) {\n        var lines = init.split(\"\\n\");\n\n        var process = function process(lines) {\n          if (!lines.length) {\n            return;\n          }\n\n          var line = lines.shift();\n\n          if (line && line[0] == '!') {\n            _this2.args.output.push(line.substring(1));\n\n            process(lines);\n          } else if (line) {\n            _this2.runCommand(line).then(function () {\n              return process(lines);\n            });\n          } else {\n            process(lines);\n          }\n        };\n\n        process(lines);\n      });\n    }\n  }, {\n    key: \"postRender\",\n    value: function postRender() {\n      var _this3 = this;\n\n      var inputBox = this.tags.input.element;\n      var passwordBox = this.tags.password.element;\n      this.args.bindTo('input', function (v) {\n        inputBox.style.height = 'auto';\n        inputBox.style.height = inputBox.scrollHeight + 'px';\n      }, {\n        frame: 1\n      });\n      this.args.bindTo('passwordMode', function (v) {\n        if (v) {\n          inputBox.style.display = 'none';\n          passwordBox.style.display = 'unset';\n        } else {\n          inputBox.style.display = 'unset';\n          passwordBox.style.display = 'none';\n        }\n      });\n      this.args.bindTo('passwordMode', function (v) {\n        _this3.focus(null, v);\n      }, {\n        frame: 1\n      });\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var passwordMode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (event) {\n        event.preventDefault();\n      }\n\n      if (event && event.target && event.target.matches('input,textarea')) {\n        return;\n      }\n\n      if (window.getSelection().toString()) {\n        return;\n      }\n\n      if (passwordMode || this.args.passwordMode) {\n        this.tags.password.element.focus();\n        return;\n      }\n\n      this.tags.input.element.focus();\n    }\n  }, {\n    key: \"interpret\",\n    value: function interpret(command) {\n      var _this4 = this;\n\n      this.historyCursor = -1;\n      var commands = command.split(/\\s*\\|\\s*/);\n      var task = null;\n      var topTask = null;\n\n      var _iterator = _createForOfIteratorHelper(commands),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var commandString = _step.value;\n          var args = commandString.trim().split(' ');\n\n          var _command = args.shift().trim();\n\n          if (_command.length > 1 && _command.substr(-1) == \"?\") {\n            _command = _command.substr(0, _command.length - 1);\n\n            if (_command in this.path) {\n              this.args.output.push(\"?? \".concat(this.path[_command].helpText));\n              this.args.output.push(\"?? \".concat(this.path[_command].useText));\n            }\n\n            continue;\n          }\n\n          if (_command in this.path) {\n            var cmdClass = this.path[_command]; // console.log(cmdClass);\n\n            task = new cmdClass(args, task, this);\n          } else {\n            switch (_command) {\n              case 'clear':\n                this.args.output.splice(0);\n                break;\n\n              case 'z':\n                this.args.output.push(new _MeltingText.MeltingText({\n                  input: 'lmao!'\n                }));\n                break;\n\n              case 'commands':\n              case '?':\n                this.args.output.push(\"   Subspace Console 0.29a \\xA92018-2020 Sean Morris\");\n\n                for (var cmd in this.path) {\n                  this.args.output.push(\" * \".concat(cmd, \" - \").concat(this.path[cmd].helpText));\n                  this.path[cmd].useText && this.args.output.push(\"   \".concat(this.path[cmd].useText));\n                  this.args.output.push(\"  \");\n                }\n\n                break;\n\n              default:\n                this.args.output.push(\"!! Bad command: \".concat(_command));\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (task) {\n        this.tasks.unshift(task);\n\n        var output = function output(event) {\n          var prompt = task.outPrompt || task.prompt || _this4.args.prompt || '::';\n\n          _this4.args.output.push(\"\".concat(prompt, \" \").concat(event.detail));\n        };\n\n        var error = function error(event) {\n          var errorPrompt = task.errorPrompt || '!!';\n\n          _this4.args.output.push(\"\".concat(errorPrompt, \" \").concat(event.detail));\n        };\n\n        task.addEventListener('output', output);\n        task.addEventListener('error', error);\n        task.execute();\n        task[\"catch\"](function (error) {\n          return console.error(error);\n        });\n        task[\"catch\"](function (error) {\n          return _this4.args.output.push(\"!! \".concat(error));\n        });\n        this.args.prompt = task.prompt;\n        task[\"finally\"](function (done) {\n          task.removeEventListener('error', error);\n          task.removeEventListener('output', output);\n\n          _this4.tasks.shift();\n\n          if (_this4.tasks.length) {\n            _this4.args.prompt = _this4.tasks[0].prompt;\n          } else {\n            _this4.args.prompt = '::';\n          }\n        });\n      }\n\n      this.args.input = '';\n      return task;\n    }\n  }, {\n    key: \"keydown\",\n    value: function keydown(event, autocomplete) {\n      switch (event.key) {\n        case 'Tab':\n          if (autocomplete) {\n            break;\n          }\n\n          event.preventDefault();\n          break;\n\n        case 'Enter':\n          if (!event.ctrlKey) {\n            event.preventDefault();\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: \"keyup\",\n    value: function keyup(event, autocomplete) {\n      var _this5 = this;\n\n      switch (event.key) {\n        case 'ArrowDown':\n          this.historyCursor--;\n\n          if (this.historyCursor <= -1) {\n            this.historyCursor = -1;\n            this.args.input = this.originalInput;\n            return;\n          }\n\n          this.args.input = this.history[this.historyCursor];\n          this.onNextFrame(function () {\n            var element = _this5.tags.input.element;\n            element.selectionStart = element.value.length;\n            element.selectionEnd = element.value.length;\n          });\n          break;\n\n        case 'ArrowUp':\n          if (this.historyCursor == -1) {\n            this.originalInput = this.args.input;\n          }\n\n          this.historyCursor++;\n\n          if (this.historyCursor >= this.history.length) {\n            this.historyCursor--;\n            return;\n          }\n\n          this.args.input = this.history[this.historyCursor];\n          this.onNextFrame(function () {\n            var element = _this5.tags.input.element;\n            element.selectionStart = element.value.length;\n            element.selectionEnd = element.value.length;\n          });\n          break;\n\n        case 'Escape':\n          if (this.tasks.length) {\n            console.log(_Task.Task.KILL);\n            this.tasks[0][\"finally\"](function () {\n              return _this5.args.output.push(\":: Killed.\");\n            });\n            this.tasks[0].signal(_Task.Task.KILL);\n            this.tasks[0].signal('kill');\n          }\n\n          this.args.passwordMode = false;\n          break;\n\n        case 'Tab':\n          event.preventDefault();\n\n          if (!this.args.input || this.args.input[0] !== '/') {\n            break;\n          }\n\n          var search = this.args.input.substr(1);\n\n          for (var cmd in this.path) {\n            if (cmd.length < search.length) {\n              continue;\n            }\n\n            if (search === cmd.substr(0, search.length)) {\n              this.args.input = '/' + cmd;\n              break;\n            }\n          }\n\n          break;\n\n        case 'Enter':\n          if (!event.ctrlKey) {\n            event.preventDefault();\n          } else {\n            return;\n          }\n\n          this.runCommand(this.args.input);\n          break;\n\n        default:\n          this.historyCursor = -1;\n          window.scrollTo({\n            top: document.body.scrollHeight,\n            left: 0,\n            behavior: 'smooth'\n          });\n          break;\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel(event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }]);\n\n  return Console;\n}(_View2.View);\n\nexports.Console = Console;\n  })();\n});","\nrequire.register(\"subspace-console/Path.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-console\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Path = void 0;\n\nvar _Task = require(\"subspace-console/Task\");\n\nvar Path = {\n  task: _Task.Task\n};\nexports.Path = Path;\n  })();\n});","\nrequire.register(\"subspace-console/Task.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-console\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Task = void 0;\n\nvar _Bindable = require(\"curvature/base/Bindable\");\n\nvar _Mixin = require(\"curvature/base/Mixin\");\n\nvar _Target = require(\"./mixin/Target\");\n\nvar _TaskSignals = require(\"./mixin/TaskSignals\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar taskId = 0;\nvar target = Symbol('target');\nvar Accept = Symbol('accept');\nvar Reject = Symbol('reject');\nvar Execute = Symbol('execute');\n\nvar Task = /*#__PURE__*/function (_Mixin$with) {\n  _inherits(Task, _Mixin$with);\n\n  var _super = _createSuper(Task);\n\n  function Task() {\n    var _this;\n\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var prev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var term = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    _classCallCheck(this, Task);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"title\", 'Generic Task');\n\n    _defineProperty(_assertThisInitialized(_this), \"prompt\", '::');\n\n    _this.args = args;\n    _this.prev = prev;\n    _this.term = term;\n    _this.status = -1;\n    _this.thread = new Promise(function (accept, reject) {\n      _this[Accept] = accept;\n      _this[Reject] = reject;\n    });\n    _this.id = taskId++;\n\n    _this.thread[\"finally\"](function () {\n      return console.log(_this.title + ' closed.');\n    });\n\n    return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n  }\n\n  _createClass(Task, [{\n    key: \"then\",\n    value: function then(callback) {\n      return this.thread.then(callback);\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch(callback) {\n      return this.thread[\"catch\"](callback);\n    }\n  }, {\n    key: \"finally\",\n    value: function _finally(callback) {\n      return this.thread[\"finally\"](callback);\n    }\n  }, {\n    key: \"print\",\n    value: function print(detail) {\n      this.dispatchEvent(new CustomEvent('output', {\n        detail: detail\n      }));\n    }\n  }, {\n    key: \"printErr\",\n    value: function printErr(detail) {\n      this.dispatchEvent(new CustomEvent('error', {\n        detail: detail\n      }));\n    }\n  }, {\n    key: \"write\",\n    value: function write(line) {\n      return this.main(line);\n    }\n  }, {\n    key: \"signal\",\n    value: function signal(signalName) {\n      console.log(this, \"signal::\".concat(signalName));\n\n      if (this[\"signal::\".concat(signalName)]) {\n        this[\"signal::\".concat(signalName)]();\n      }\n\n      switch (signalName) {\n        case 'close':\n          if (this.dispatchEvent(new CustomEvent('close'))) {\n            this.status > 0 ? this[Reject]() : this[Accept]();\n          }\n\n          break;\n\n        case 'kill':\n          this.status > 0 ? this[Reject]() : this[Accept]();\n          break;\n      }\n    }\n  }, {\n    key: \"execute\",\n    value: function execute() {\n      return this[Execute](this.prev);\n    }\n  }, {\n    key: Execute,\n    value: function value() {\n      var _this2 = this;\n\n      if (prev) {\n        var _onOutputEvent = function _onOutputEvent(_ref) {\n          var detail = _ref.detail;\n          return _this2.write(detail);\n        };\n\n        prev.addEventListener('output', _onOutputEvent);\n      }\n\n      console.log(this.title + ' initializing.');\n      var init = this.init.apply(this, _toConsumableArray(this.args));\n      var prev = this.prev;\n\n      if (!(init instanceof Promise)) {\n        init = Promise.resolve(init);\n      } else {\n        console.log(this.title + ' continues...');\n      }\n\n      if (prev) {\n        prev[Execute]();\n        return Promise.allSettled([prev, init])[\"finally\"](function () {\n          prev.then(function (r) {\n            return _this2[Accept](r);\n          });\n          prev[\"catch\"](function (e) {\n            return _this2[Reject](r);\n          });\n          prev.removeEventListener('output', onOutputEvent);\n          return _this2.done();\n        });\n      } else {\n        return Promise.allSettled([init]).then(function () {\n          try {\n            _this2.main(undefined);\n\n            _this2[Accept]();\n          } catch (_unused) {\n            _this2[Reject]();\n          }\n\n          _this2.done();\n        });\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {}\n  }, {\n    key: \"main\",\n    value: function main() {\n      var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    }\n  }, {\n    key: \"done\",\n    value: function done(results) {\n      return this.status;\n    }\n  }]);\n\n  return Task;\n}(_Mixin.Mixin[\"with\"](_Target.Target, _TaskSignals.TaskSignals)); // export class Task extends Target.mix(BaseTask){};\n\n\nexports.Task = Task;\n  })();\n});","\nrequire.register(\"subspace-console/mixin/Target.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-console\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Target = void 0;\n\nvar _Mixin = require(\"curvature/base/Mixin\");\n\nvar _Target;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar target = Symbol('target');\nvar index = 0;\nvar Target = (_Target = {}, _defineProperty(_Target, _Mixin.Mixin.constructor, function () {\n  try {\n    this[target] = new EventTarget();\n  } catch (error) {\n    this[target] = document.createDocumentFragment();\n  }\n\n  this[target].x = index++;\n}), _defineProperty(_Target, \"dispatchEvent\", function dispatchEvent() {\n  var _this$target;\n\n  (_this$target = this[target]).dispatchEvent.apply(_this$target, arguments);\n}), _defineProperty(_Target, \"addEventListener\", function addEventListener() {\n  var _this$target2;\n\n  (_this$target2 = this[target]).addEventListener.apply(_this$target2, arguments);\n}), _defineProperty(_Target, \"removeEventListener\", function removeEventListener() {\n  var _this$target3;\n\n  (_this$target3 = this[target]).removeEventListener.apply(_this$target3, arguments);\n}), _Target);\nexports.Target = Target;\n  })();\n});","\nrequire.register(\"subspace-console/mixin/TaskSignals.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-console\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TaskSignals = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar TaskSignals = /*#__PURE__*/function () {\n  function TaskSignals() {\n    _classCallCheck(this, TaskSignals);\n  }\n\n  _createClass(TaskSignals, [{\n    key: 'signal::kill',\n    value: function signalKill() {\n      console.log('KILL!');\n      this.status > 0 ? this[Reject]() : this[Accept]();\n    }\n  }, {\n    key: 'signal::close',\n    value: function signalClose() {\n      if (this.dispatchEvent(new CustomEvent('error', {\n        detail: detail\n      }))) {\n        this.status > 0 ? this[Reject]() : this[Accept]();\n      }\n    }\n  }]);\n\n  return TaskSignals;\n}();\n\nexports.TaskSignals = TaskSignals;\n\n_defineProperty(TaskSignals, \"KILL\", 'kill');\n\n_defineProperty(TaskSignals, \"CLOSE\", 'close');\n  })();\n});","\nrequire.register(\"subspace-console/view/MeltingText.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-console\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MeltingText = void 0;\n\nvar _View = require(\"curvature/base/View\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar MeltingText = /*#__PURE__*/function (_BaseView) {\n  _inherits(MeltingText, _BaseView);\n\n  var _super = _createSuper(MeltingText);\n\n  function MeltingText(args) {\n    var _this;\n\n    _classCallCheck(this, MeltingText);\n\n    _this = _super.call(this, args);\n    _this.last = _this.init = Date.now();\n    _this.charUp = [// '\\u030d', /*     ̍     */\t\t'\\u030e', /*     ̎     */\t\t'\\u0304', /*     ̄     */\t\t'\\u0305', /*     ̅     */\n    // '\\u033f', /*     ̿     */\t\t'\\u0311', /*     ̑     */\t\t'\\u0306', /*     ̆     */\t\t'\\u0310', /*     ̐     */\n    // '\\u0352', /*     ͒     */\t\t'\\u0357', /*     ͗     */\t\t'\\u0351', /*     ͑     */\t\t'\\u0307', /*     ̇     */\n    // '\\u0308', /*     ̈     */\t\t'\\u030a', /*     ̊     */\t\t'\\u0342', /*     ͂     */\t\t'\\u0343', /*     ̓     */\n    \"\\u0344\",\n    /*     ̈́     */\n\n    /*\t'\\u034a', /*     ͊     */\n\n    /*\t'\\u034b', /*     ͋     */\n\n    /*\t'\\u034c', /*     ͌     */\n    \"\\u0303\",\n    /*     ̃     */\n\n    /*\t'\\u0302', /*     ̂     */\n\n    /*\t'\\u030c', /*     ̌     */\n\n    /*\t'\\u0350', /*     ͐     */\n    \"\\u0300\"\n    /*     ̀     */\n    //\t'\\u0301', /*     ́     */\t\t'\\u030b', /*     ̋     */\t\t'\\u030f', /*     ̏     */\n    // '\\u0312', /*     ̒     */\t\t'\\u0313', /*     ̓     */\t\t'\\u0314', /*     ̔     */\t\t'\\u033d', /*     ̽     */\n    // '\\u0309', /*     ̉     */\t\t'\\u0363', /*     ͣ     */\t\t'\\u0364', /*     ͤ     */\t\t'\\u0365', /*     ͥ     */\n    // '\\u0366', /*     ͦ     */\t\t'\\u0367', /*     ͧ     */\t\t'\\u0368', /*     ͨ     */\t\t'\\u0369', /*     ͩ     */\n    // '\\u036a', /*     ͪ     */\t\t'\\u036b', /*     ͫ     */\t\t'\\u036c', /*     ͬ     */\t\t'\\u036d', /*     ͭ     */\n    // '\\u036e', /*     ͮ     */\t\t'\\u036f', /*     ͯ     */\t\t'\\u033e', /*     ̾     */\t\t'\\u035b', /*     ͛     */\n    ];\n    _this.charMid = [\"\\u0315\",\n    /*     ̕     */\n    \"\\u031B\",\n    /*     ̛     */\n    \"\\u0340\",\n    /*     ̀     */\n    \"\\u0341\",\n    /*     ́     */\n    \"\\u0358\",\n    /*     ͘     */\n    \"\\u0321\",\n    /*     ̡     */\n    \"\\u0322\",\n    /*     ̢     */\n    \"\\u0327\",\n    /*     ̧     */\n    \"\\u0328\",\n    /*     ̨     */\n    \"\\u0334\",\n    /*     ̴     */\n    \"\\u0335\",\n    /*     ̵     */\n    \"\\u0336\",\n    /*     ̶     */\n    \"\\u034F\",\n    /*     ͏     */\n    \"\\u035C\",\n    /*     ͜     */\n    \"\\u035D\",\n    /*     ͝     */\n    \"\\u035E\",\n    /*     ͞     */\n    \"\\u035F\",\n    /*     ͟     */\n    \"\\u0360\",\n    /*     ͠     */\n\n    /*'\\u0362',      ͢     */\n    \"\\u0338\",\n    /*     ̸     */\n    \"\\u0337\",\n    /*     ̷     */\n    \"\\u0361\"\n    /*     ͡     */\n\n    /*'\\u0489'     ҉_     */\n    ];\n    _this.charDown = [// '\\u0316', /*     ̖     */\t\t'\\u0317', /*     ̗     */\t\t'\\u0318', /*     ̘     */\t\t'\\u0319', /*     ̙     */\n    // '\\u0316', /*     ̖     */\t\t'\\u0317', /*     ̗     */\t\t'\\u0318', /*     ̘     */\t\t'\\u0319', /*     ̙     */\n    // '\\u0320', /*     ̠     */\t\t'\\u0324', /*     ̤     */\t\t'\\u0325', /*     ̥     */\t\t'\\u0326', /*     ̦     */\n    // '\\u0329', /*     ̩     */\t\t'\\u032a', /*     ̪     */\t\t'\\u032b', /*     ̫     */\t\t'\\u032c', /*     ̬     */\n    // '\\u032d', /*     ̭     */\t\t'\\u032e', /*     ̮     */\t\t'\\u032f', /*     ̯     */\t\t'\\u0330', /*     ̰     */\n    // '\\u0331', /*     ̱     */\t\t'\\u0332', /*     ̲     */\t\t'\\u0333', /*     ̳     */\t\t'\\u0339', /*     ̹     */\n    \"\\u033A\",\n    /*     ̺     */\n    \"\\u033B\",\n    /*     ̻     */\n    \"\\u033C\",\n    /*     ̼     */\n    \"\\u0345\"\n    /*     ͅ     */\n    //'\\u0347', /*     ͇     */\t\t'\\u0348', /*     ͈     */\t\t'\\u0349', /*     ͉     */\t\t'\\u034d', /*     ͍     */\n    //'\\u034e', /*     ͎     */\t\t'\\u0353', /*     ͓     */\t\t'\\u0354', /*     ͔     */\t\t'\\u0355', /*     ͕     */\n    // '\\u0356', /*     ͖     */\t\t'\\u0359', /*     ͙     */\t\t'\\u035a', /*     ͚     */\t\t'\\u0323' /*     ̣     */\n    ];\n    _this.template = \"\\n\\t\\t\\t<div cv-bind = \\\"output\\\" class = \\\"melting\\\"></div>\\n\\t\\t\";\n    _this.args.input = \"Magic is no more than the art of employing consciously invisible means to produce visible effects. Will, love, and imagination are magic powers that everyone possesses; and whoever knows how to develop them to their fullest extent is a magician. Magic has but one dogma, namely, that the seen is the measure of the unseen\\n\"; // this.args.input      = 'anything';\n\n    _this.args.output = 'uh.';\n    _this.corruptors = [];\n    _this.maxMaxCorrupt = 25;\n    _this.maxCorrupt = 0;\n    _this.type = '';\n\n    _this.onFrame(function () {\n      _this.typewriter(_this.args.input);\n    });\n\n    _this.onInterval(16 * 4, function () {\n      var selection = window.getSelection();\n\n      if (selection.anchorOffset !== selection.focusOffset) {\n        return;\n      }\n\n      if (selection.anchorNode !== selection.focusNode) {\n        return;\n      }\n\n      _this.args.output = _this.corrupt(_this.type); // this.args.output = this.type;\n    });\n\n    _this.args.bindTo('input', function (v) {\n      _this.type = '';\n      _this.corruptors = [];\n    });\n\n    return _this;\n  }\n\n  _createClass(MeltingText, [{\n    key: \"age\",\n    value: function age() {\n      return this.init - Date.now();\n    }\n  }, {\n    key: \"lastFrame\",\n    value: function lastFrame() {\n      return this.last - Date.now();\n    }\n  }, {\n    key: \"corrupt\",\n    value: function corrupt(v) {\n      if (v.length * 1.15 < this.args.input.length) {\n        return this.type;\n      }\n\n      var chars = v.split('');\n\n      var random = function random(x) {\n        return parseInt(Math.random() * x);\n      };\n\n      if (random(1024) < 256 && this.maxCorrupt < this.maxMaxCorrupt) {\n        this.maxCorrupt += 5;\n      }\n\n      for (var _i in chars) {\n        this.corruptors[_i] = this.corruptors[_i] || [];\n\n        if (chars[_i].match(/\\W/)) {\n          continue;\n        }\n\n        var charSets = [// this.charDown // Melt Slow\n        this.charDown, this.charMid // Melt\n        // this.charDown, this.charUp,   this.charMid, // Boil\n        // this.charMid, this.charUp, // Burn\n        // this.charMid // Simmer\n        // this.charUp // Rain\n        ];\n        var charSet = charSets[random(charSets.length)];\n\n        if (random(8192) < 1) {\n          this.corruptors[_i].unshift(charSet[random(charSet.length)]);\n        }\n\n        if (this.corruptors[_i].length < this.maxCorrupt) {\n          this.corruptors[_i].unshift(charSet[random(charSet.length)]);\n        }\n\n        if (random(2048) < 1 && this.maxCorrupt > 25) {\n          this.corruptors[_i].splice(5 * random(5));\n        }\n\n        this.corruptors[_i].push(this.corruptors[_i].shift());\n      }\n\n      for (var i in chars) {\n        if (this.corruptors[i]) {\n          chars[i] += this.corruptors[i].join('');\n        }\n      }\n\n      return chars.join('');\n    }\n  }, {\n    key: \"typewriter\",\n    value: function typewriter(v) {\n      this.type = this.type || '';\n\n      if (this.type !== v) {\n        this.type += v.substr(this.type.length, 1);\n        this.onTimeout(150, function () {\n          var max = window.scrollY + window.innerHeight;\n\n          if (document.body.scrollHeight > max) {\n            window.scrollTo({\n              top: document.body.scrollHeight,\n              left: 0,\n              behavior: 'smooth'\n            });\n          }\n        });\n      } else {\n        return true;\n      }\n\n      return false;\n    }\n  }]);\n\n  return MeltingText;\n}(_View.View);\n\nexports.MeltingText = MeltingText;\n  })();\n});","const socketProtocol = location.protocol === 'https:'\n\t? 'wss://'\n\t: 'ws://';\n\nexport class Config {};\n\nConfig.title = 'SubSpace 0x29a';\nConfig.socketHost = socketProtocol + location.hostname + ':9998';\n","import { Lower }      from './tasks/Lower';\nimport { Upper }      from './tasks/Upper';\nimport { Prefix }     from './tasks/Prefix';\nimport { Suffix }     from './tasks/Suffix';\nimport { Countdown }  from './tasks/Countdown';\n\nimport { Auth }       from './tasks/Auth';\nimport { Login }      from './tasks/Login';\nimport { Register }   from './tasks/Register';\nimport { RtcClient }  from './tasks/RtcClient';\nimport { RtcServer }  from './tasks/RtcServer';\n\nimport { PublishBytes } from './tasks/PublishBytes';\nimport { PublishFile  } from './tasks/PublishFile';\nimport { SayText      } from './tasks/SayText';\nimport { WatchImages  } from './tasks/WatchImages';\nimport { PublishAjax  } from './tasks/PublishAjax';\nimport { Connection   } from './tasks/Connection';\n\nimport { Theme }        from './tasks/Theme';\n\nexport const Path = {\n\tcountdown:   Countdown\n\t, upper:     Upper\n\t, lower:     Lower\n\t, prefix:    Prefix\n\t, suffix:    Suffix\n\n\t, auth:      Auth\n\t, pub:       PublishBytes\n\t, pubajax:   PublishAjax\n\t, pubfile:   PublishFile\n\t, say:       SayText\n\t, images:    WatchImages\n\t, login:     Login\n\t, register:  Register\n\t, rtcc:      RtcClient\n\t, rtcs:      RtcServer\n\t, connect:   Connection\n\t, theme:     Theme\n};\n","import { View } from './View.js';\n\nexport class Chat\n{\n\tconstructor(terminal, args)\n\t{\n\t\tterminal.args.output.push(new View);\n\t}\n\n\tpass(command)\n\t{\n\n\t}\n}","import { View as BaseView } from 'curvature/base/View';\n\nexport class View extends BaseView\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = require('./view.tmp');\n\t}\n}","module.exports = \"<div class = \\\"nynex window\\\">\\n\\t<div class = \\\"titlebar\\\">\\n\\t\\t<div class = \\\"title\\\">💬 Chat App</div>\\n\\t\\t<div class = \\\"button\\\">▂</div>\\n\\t\\t<div class = \\\"button\\\">▅</div>\\n\\t</div>\\n\\t<select multiple height = \\\"5\\\">\\n\\t\\t<option>Buddy</option>\\n\\t\\t<option>Guy</option>\\n\\t\\t<option>Friend</option>\\n\\t</select>\\n</div>\"","import { Tag     }  from 'curvature/base/Tag';\nimport { RuleSet }  from 'curvature/base/RuleSet';\nimport { Router  }  from 'curvature/base/Router';\n\nimport { Console }  from 'subspace-console/Console';\n\nimport { Path    }  from './Path';\n\nimport { rawquire } from 'rawquire/rawquire.macro';\n\nimport { Socket }   from 'subspace-client/Socket';\n\nconsole.log(Path);\n\nconst view = new Console({path: Path, init: '/init_rc'});\n\nconsole.log(view);\n\nRuleSet.add('body', view);\nRuleSet.wait();\nRouter.wait(view);\n","import { Mixin }    from 'curvature/base/Mixin';\nimport { Bindable } from 'curvature/base/Bindable';\n\nconst promise = Symbol('promise');\n\nexport class MixPromise \n{\n\t[Mixin._constructor](instance)\n\t{\n\t\tinstance[promise] = new Promise;\n\t}\n\n\tthen(callback)\n\t{\n\t\treturn this[promise].then(callback);\n\t}\n\n\tcatch(callback)\n\t{\n\t\treturn this[promise].catch(callback);\n\t}\n\n\tfinally(callback)\n\t{\n\t\treturn this[promise].finally(callback);\n\t}\n}\n","import { Mixin } from 'curvature/base/Mixin';\n\nconst target = Symbol('target');\n\nlet index = 0;\n\nexport const Target = {\n\t[Mixin.constructor]()\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis[target] = new EventTarget;\n\t\t}\n\t\tcatch(error)\n\t\t{\n\t\t\tthis[target] = document.createDocumentFragment();\n\t\t}\n\n\t\tthis[target].x = index++;\n\t}\n\n\t, dispatchEvent(...args)\n\t{\n\t\tthis[target].dispatchEvent(...args);\n\t}\n\n\t, addEventListener(...args)\n\t{\n\t\tthis[target].addEventListener(...args);\n\t}\n\n\t, removeEventListener(...args)\n\t{\n\t\tthis[target].removeEventListener(...args);\n\t}\n}\n","export class TaskSignals\n{\n\tstatic KILL  = 'kill'\n\tstatic CLOSE = 'close'\n\t\n\t'signal::kill'()\n\t{\n\t\tconsole.log('KILL!');\n\n\t\tthis.status > 0\n\t\t\t? this[Reject]()\n\t\t\t: this[Accept]();\n\t}\n\n\t'signal::close'()\n\t{\n\t\tif(this.dispatchEvent(new CustomEvent('error', {detail})))\n\t\t{\n\t\t\tthis.status > 0\n\t\t\t\t? this[Reject]()\n\t\t\t\t: this[Accept]();\n\t\t}\n\t}\n}","import { Task } from 'subspace-console/Task';\n\nexport class Auth extends Task\n{\n\ttitle  = 'Auth Task';\n\tprompt = '<<';\n\n\tstatic helpText = 'Perform token exchange to identify socket connection.';\n\tstatic useText  = '/auth';\n\n\tinit()\n\t{\n\t\treturn fetch('/auth?api').then((response) => {\n\t\t\treturn response.text();\n\t\t}).then((token) => {\n\t\t\tthis.print('auth [token censored]');\n\t\t\tthis.term.socket.send(`auth ${token}`);\n\t\t\treturn true;\n\t\t});\n\t}\n}\n","import { Config }            from 'Config';\nimport { Socket }            from 'subspace-client/Socket';\n\nimport { ByteView }          from '../view/ByteView';\nimport { TextMessageView }   from '../view/TextMessageView';\nimport { BinaryMessageView } from '../view/BinaryMessageView';\n\nimport { Task } from 'subspace-console/Task';\n\nconst Accept = Symbol('accept');\n\nexport class Connection extends Task\n{\n\ttitle  = 'Websocket Connection Task';\n\tprompt = '..';\n\n\tstatic helpText = 'Connect to a websocket.';\n\tstatic useText  = '/connect SERVER';\n\n\tinit(...args)\n\t{\n\t\tthis.socket = Socket.get(Config.socketHost, true);\n\n\t\tthis.term.socket = this.socket;\n\n\t\tthis.term.env.set('socket', this.socket);\n\n\t\tthis.socket.subscribe('close', (event) => {\n\t\t\tthis.term.args.output.push(`Disconnected!`);\n\t\t\tthis.term.args.output.push(`Reinitializing in ${Config.reconnect/1000 || 3}s...`);\n\n\t\t\tif(this.recon)\n\t\t\t{\n\t\t\t\tthis.clearTimeout(this.recon);\n\t\t\t\tthis.recon = false;\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.recon = setTimeout(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.recon = false;\n\t\t\t\t\t\tthis.term.runScript('/bounce_rc');\n\t\t\t\t\t}\n\t\t\t\t\t, Config.reconnect || 3000\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tthis.socket.subscribe('open', () => {\n\t\t\tthis.term.runScript('/open_rc');\n\t\t\tthis.prompt = '<<';\n\t\t});\n\n\t\tthis.socket.subscribe('message', (event, message, channel, origin, originId, originalChannel, packet) => {\n\n\t\t\tif(!this.term.localEcho)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(typeof event.data == 'string')\n\t\t\t{\n\t\t\t\tlet received = JSON.parse(event.data);\n\n\t\t\t\tif(received.token && received.you == true)\n\t\t\t\t{\n\t\t\t\t\tthis.term.postToken = received.token;\n\t\t\t\t}\n\n\t\t\t\tif(typeof received == 'object')\n\t\t\t\t{\n\t\t\t\t\treceived = JSON.stringify(received, null, 4);\n\t\t\t\t}\n\n\t\t\t\tconst messageView = new TextMessageView({message: received})\n\n\t\t\t\tmessageView.preserve = true;\n\n\t\t\t\tthis.finally(()=>messageView.remove());\n\n\t\t\t\tthis.term.args.output.push(messageView);\n\t\t\t}\n\t\t\telse if (event.data instanceof ArrayBuffer)\n\t\t\t{\n\t\t\t\tlet bytesArray = new Uint8Array(event.data);\n\n\t\t\t\tlet user = originId.toString(16)\n\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t.padStart(4, '0');\n\n\t\t\t\tlet channelName = channel.toString(16)\n\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t.padStart(4, '0');\n\n\t\t\t\tlet header = `0x${user}${channelName}`;\n\n\t\t\t\tlet headerBytes = [\n\t\t\t\t\toriginId.toString(16)\n\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t.padStart(4, '0'), channel.toString(16)\n\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t.padStart(4, '0')\n\t\t\t\t].join('').match(/.{1,2}/g);\n\n\t\t\t\tlet messageIndex = 6;\n\n\t\t\t\tif(origin == 'server')\n\t\t\t\t{\n\t\t\t\t\theaderBytes = [channel.toString(16).padStart(4, '0')];\n\t\t\t\t\theader = `0x${channel.toString(16).padStart(4, '0')}`;\n\t\t\t\t}\n\n\t\t\t\tlet bytes = Array.from(bytesArray).map(x => {\n\t\t\t\t\treturn x.toString(16)\n\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t});\n\n\t\t\t\tconst messageView = new BinaryMessageView({\n\t\t\t\t\theader: new ByteView({\n\t\t\t\t\t\tseparator: '',\n\t\t\t\t\t\tbytes: headerBytes\n\t\t\t\t\t}),\n\n\t\t\t\t\tmessage: new ByteView({\n\t\t\t\t\t\tseparator: ' ',\n\t\t\t\t\t\tbytes: bytes.slice(messageIndex)\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tmessageView.preserve = true;\n\n\t\t\t\tthis.finally(()=>messageView.remove());\n\n\t\t\t\tthis.term.args.output.push(messageView);\n\t\t\t}\n\t\t});\n\n\t\treturn new Promise(accept => {\n\t\t\tthis[Accept] = accept;\n\t\t});\n\t}\n\n\tmain(command)\n\t{\n\t\tif(!command)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.socket)\n\t\t{\n\t\t\tthis.prompt = '<<';\n\t\t\tthis.socket.send(command);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n}\n","export class Cornfield\n{\n\tconstructor(terminal)\n\t{\n\t\tterminal.args.output.push(':: Welcome to Cornfield');\n\t\tterminal.args.output.push(':: You are in a cornfield.');\n\t\tterminal.args.output.push(':: You see corn.');\n\t\tterminal.args.output.push(':: Move? [north south east west]');\n\t\tterminal.args.output.push(':: Look?');\n\n\t\tterminal.localEcho = false;\n\n\t\tthis.socket = terminal.socket;\n\n\t\tthis.socket.subscribe('message:cornfield:game',(e,m,o,i)=>{\n\n\t\t});\n\n\t\tthis.socket.subscribe('message:cornfield:chat', (e,m,c,o,i)=>{\n\t\t\tterminal.args.output.push(`!! <${i}> ${m}`);\n\t\t});\n\n\t\tthis.socket.subscribe('message:cornfield:users:ping', (e,m,o,i)=>{\n\t\t\tthis.socket.publish('cornfield:users:pong', 'pong!');\n\t\t});\n\n\t\tthis.socket.subscribe('message:cornfield:users:pong', (e,m,o,i)=>{\n\t\t});\n\t}\n\n\tpass(input, terminal)\n\t{\n\t\tlet args    = input.split(' ');\n\t\tlet command = args.shift();\n\t\tconsole.log(command);\n\n\t\tswitch(command.toLowerCase())\n\t\t{\n\t\t\tcase 'ping':\n\t\t\t\tthis.socket.publish('cornfield:users:ping', 'ping!');\n\t\t\t\tbreak;\n\n\t\t\tcase 'look':\n\t\t\t\tterminal.args.output.push(':: You found an ear of corn.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'l');\n\t\t\t\tbreak;\n\n\t\t\tcase 'n':\n\t\t\tcase 'north':\n\t\t\t\tterminal.args.output.push(':: You moved north.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'n');\n\t\t\t\tbreak;\n\n\t\t\tcase 's':\n\t\t\tcase 'south':\n\t\t\t\tterminal.args.output.push(':: You moved south.');\n\t\t\t\tthis.socket.publish('cornfield:game', 's');\n\t\t\t\tbreak;\n\n\t\t\tcase 'e':\n\t\t\tcase 'east':\n\t\t\t\tterminal.args.output.push(':: You moved east.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'e');\n\t\t\t\tbreak;\n\n\t\t\tcase 'w':\n\t\t\tcase 'west':\n\t\t\t\tterminal.args.output.push(':: You moved west.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'w');\n\t\t\t\tbreak;\n\n\t\t\tcase 't':\n\t\t\tcase 'talk':\n\t\t\tcase 'say':\n\t\t\t\t// let chatMessage = 'ok';\n\t\t\t\tlet chatMessage = args.join(' ');\n\t\t\t\tterminal.args.output.push(`!! <you> ${chatMessage}`);\n\t\t\t\tthis.socket.publish('cornfield:chat', chatMessage);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tterminal.args.input = '';\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class Countdown extends Task\n{\n\ttitle  = 'Countdown Task';\n\n\tstatic helpText = 'Countdown from a given number.';\n\tstatic useText  = '/countdown MAX [INTERVAL]';\n\n\tinit(max, interval = 1000)\n\t{\n\t\tthis.max      = Number(max);\n\t\tthis.interval = Number(interval);\n\n\t\tlet count = this.max;\n\n\t\tif(!this.max)\n\t\t{\n\t\t\tthis.status = 1;\n\t\t\tthis.printErr('Max must be a number > 0.');\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.interval)\n\t\t{\n\t\t\tthis.status = 1;\n\t\t\tthis.printErr('Interval must be a number > 0.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.status = 0;\n\n\t\treturn new Promise((accept, reject) => {\n\n\t\t\tconst timer = setInterval(()=> {\n\n\t\t\t\tconsole.log(this);\n\n\t\t\t\tthis.print(`${--count} iterations left${count?'...':'.'}`)\n\n\t\t\t\tif(count <= 0)\n\t\t\t\t{\n\t\t\t\t\taccept();\n\t\t\t\t}\n\n\t\t\t}, this.interval);\n\n\t\t\tthis.finally(()=>clearInterval(timer));\n\n\t\t});\n\t}\n\n\tmain()\n\t{\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class Help extends Task\n{\n\n}\n","import { Config } from 'Config';\nimport { Socket } from 'subspace-client/Socket';\nimport { Task   } from 'subspace-console/Task';\n\nconst Accept = Symbol('accept');\n\nexport class Login extends Task\n{\n\ttitle  = 'Login Task';\n\n\tstatic helpText = 'Login.';\n\t// static useText  = '';\n\n\tinit()\n\t{\n\t\tthis.print('Please type your username');\n\n\t\treturn new Promise(accept => {\n\t\t\tthis[Accept] = accept;\n\t\t});\n\t}\n\n\tmain(command)\n\t{\n\t\tconst terminal = this.term;\n\n\t\tterminal.args.passwordMode = false;\n\n\t\tif(!this.stack)\n\t\t{\n\t\t\tthis.stack = [];\n\t\t}\n\n\t\tif(!command)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stack.push(command);\n\n\t\tif(this.stack.length == 1)\n\t\t{\n\t\t\tterminal.args.passwordMode = true;\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your password [censored]');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 2)\n\t\t{\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.localLock = false;\n\t\t\tterminal.args.prompt = '<<';\n\n\t\t\tterminal.args.output.push(`<< login ${this.stack[0]} [password censored]`);\n\t\t\tterminal.socket.send(`login ${this.stack[0]} ${this.stack[1]}`);\n\t\t\tterminal.args.output.push(':: Checking...');\n\n\t\t\tthis[Accept]();\n\t\t}\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class Lower extends Task\n{\n\ttitle  = 'Lowercase Task';\n\n\tstatic helpText = 'Transform data from STDIN to lowercase.';\n\tstatic useText  = '/something | lower';\n\n\tmain(input = null)\n\t{\n\t\tthis.status = 0;\n\t\tthis.print(String(input).toLowerCase());\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class Prefix extends Task\n{\n\ttitle  = 'Prefix Task';\n\n\tstatic helpText = 'Prepend a prefix to lines passed into STDIN.';\n\tstatic useText  = '/something | prefix PREFIX_TEXT';\n\n\tinit(content)\n\t{\n\t\tthis.content = content;\n\t}\n\n\tmain(input = null)\n\t{\n\t\tthis.status = 0;\n\t\tthis.print((this.content || 'Prefix.') + ' ' + String(input));\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class PublishAjax extends Task\n{\n\ttitle  = 'Publish Ajax Task';\n\n\tstatic helpText = 'Publish to a channel via AJAX.';\n\tstatic useText  = '/pubajax';\n\n\tinit(...args)\n\t{\n\t\tif (!this.term.postToken)\n\t\t{\n\t\t\tthis.print(`Please aquire a POST token first.`);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.print(`${this.postToken}`);\n\n\t\tconst _formData = new FormData();\n\n\t\t_formData.append('token',   this.term.postToken);\n\t\t_formData.append('channel', args.shift());\n\t\t_formData.append('message', args.join(' '));\n\n\t\tconsole.log(_formData);\n\n\t\tconst options = {method: 'post', body: _formData};\n\n\t\treturn fetch('/post', options).then((response)=>{\n\t\t\tconsole.log(response);\n\t\t});\n\t}\n}\n","import { Config } from 'Config';\nimport { Socket } from 'subspace-client/Socket';\nimport { Task   } from 'subspace-console/Task';\n\nexport class PublishBytes extends Task\n{\n\ttitle  = 'Publish Bytes Task';\n\n\tstatic helpText = 'Publish bytes from ARGV.';\n\tstatic useText  = '/pub CHAN BYTE [BYTE...] (hexadecimal)';\n\n\tmain(input)\n\t{\n\t\tconst args  = this.args;\n\t\tlet channel = parseInt(args.shift(), 16);\n\t\tlet data    = [];\n\n\t\twhile(args.length)\n\t\t{\n\t\t\tdata.push(args.shift());\n\t\t}\n\n\t\tlet channelBytes = new Uint8Array(\n\t\t\tnew Uint16Array([channel]).buffer\n\t\t);\n\n\t\tlet bytes = [];\n\n\t\tfor (let i in channelBytes)\n\t\t{\n\t\t\tbytes[i] = channelBytes[i];\n\t\t}\n\n\t\tfor(let i = 0; i < data.length; i++)\n\t\t{\n\t\t\tbytes[i + 2] = parseInt(data[i], 16);\n\t\t}\n\n\t\tthis.term.socket.send(new Uint8Array(bytes));\n\t}\n}\n","import { Config } from 'Config';\nimport { Socket } from 'subspace-client/Socket';\nimport { Task }   from 'subspace-console/Task';\n\nexport class PublishFile extends Task\n{\n\ttitle  = 'Publish File Task';\n\n\tstatic helpText = 'Publish bytes from a file to a channel.';\n\tstatic useText  = '/pubfile CHAN';\n\n\tinit(fileChannel)\n\t{\n\t\tthis.fileChannel = fileChannel;\n\n\t\tconst fileInput = document.createElement('input');\n\n\t\tfileInput.setAttribute('type','file');\n\n\t\tfileInput.addEventListener('input', () => this.fileLoaded(event));\n\n\t\tfileInput.click();\n\n\t\t// this.term.socket.send(new Uint8Array(bytes));\n\t}\n\n\tmain()\n\t{\n\t}\n\n\tfileLoaded(event)\n\t{\n\t\tif(this.fileChannel === false)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet fileReader = new FileReader();\n\t\tlet field = event.target;\n\t\tlet file = event.target.files[0];\n\n\t\tfileReader.addEventListener('load', (event) => {\n\n\t\t\tthis.print(`Sending ${file.name}...`);\n\n\t\t\tif(this.fileChannel == parseInt(this.fileChannel))\n\t\t\t{\n\t\t\t\tthis.term.socket.publish(\n\t\t\t\t\tthis.fileChannel, event.target.result\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.term.socket.publish(\n\t\t\t\t\tthis.fileChannel, (new TextDecoder(\"utf-8\")).decode(\n\t\t\t\t\t\tevent.target.result\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.fileChannel = false;\n\n\t\t\tfield.value = '';\n\t\t});\n\n\t\tfileReader.readAsArrayBuffer(file)\n\t}\n}\n","import { Config } from 'Config';\nimport { Socket } from 'subspace-client/Socket';\nimport { Task }   from 'subspace-console/Task';\n\nconst Accept = Symbol('accept');\n\nexport class Register extends Task\n{\n\ttitle  = 'Register Task';\n\n\tstatic helpText = 'Register.';\n\t// static useText  = '';\n\n\tinit()\n\t{\n\t\tthis.print('Please type your username');\n\n\t\treturn new Promise(accept => {\n\t\t\tthis[Accept] = accept;\n\t\t});\n\t}\n\n\tmain(command)\n\t{\n\t\tconst terminal = this.term;\n\n\t\tterminal.args.passwordMode = false;\n\n\t\tif(!this.stack)\n\t\t{\n\t\t\tthis.stack = [];\n\t\t}\n\n\t\tthis.stack.push(command);\n\n\t\tif(this.stack.length == 1)\n\t\t{\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your email address');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 2)\n\t\t{\n\t\t\tterminal.args.passwordMode = true;\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your password');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 3)\n\t\t{\n\t\t\tterminal.args.passwordMode = true;\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your password again.');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 4)\n\t\t{\n\t\t\tterminal.args.input = '';\n\n\t\t\tif(this.stack[2] !== this.stack[3])\n\t\t\t{\n\t\t\t\tterminal.args.output.push(':: Password verification failed.');\n\t\t\t\tterminal.args.output.push(':: Please type your password');\n\t\t\t\tterminal.args.passwordMode = true;\n\t\t\t\tthis.stack.pop();\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tterminal.args.output.push(`:: Trying to register ${this.stack[0]} <${this.stack[1]}>...`);\n\n\t\t\tterminal.args.output.push(`<< register ${this.stack[0]} [password censored] ${this.stack[1]}`);\n\t\t\tterminal.socket.send(`register ${this.stack[0]} ${this.stack[2]} ${this.stack[1]}`);\n\n\t\t\tterminal.localLock = false;\n\t\t\tterminal.args.prompt = '<<';\n\n\t\t\t// terminal.socket.send(`login ${this.stack[0]} ${this.stack[1]}`);\n\t\t}\n\n\t\tthis[Accept]();\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nconst Accept = Symbol('accept');\n\nexport class RtcClient extends Task\n{\n\tstatic helpText = 'RTC Client.';\n\tstatic useText  = '';\n\n\ttitle     = 'RTC Client Task';\n\tconnected = false;\n\n\tinit()\n\t{\n\t\tconst rtcConfig = {\n\t\t\ticeServers: [\n\t\t\t// \t{urls: 'stun:stun1.l.google.com:19302'},\n\t\t\t// \t{urls: 'stun:stun2.l.google.com:19302'}\n\t\t\t]\n\t\t};\n\n\t\tthis.peerClient = new RTCPeerConnection(rtcConfig);\n\n\t\tthis.peerClient.addEventListener('icecandidate', event => {\n\t\t\tif(!event.candidate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet localDescription = JSON.stringify(this.peerClient.localDescription);\n\n\t\t\tthis.print('Client Offer');\n\n\t\t\tthis.print(localDescription);\n\t\t});\n\n\t\tthis.peerClient.addEventListener('iceconnectionstatechange', () => {\n\t\t\tlet state = this.peerClient.iceConnectionState;\n\n\t\t\tthis.print(`RTC state: ${state}`);\n\t\t});\n\n\t\tthis.peerClientChannel = this.peerClient.createDataChannel(\"chat\")\n\n\t\tthis.peerClientChannel.addEventListener('open', () => {\n\t\t\tthis.print('Remote peer server accepted!');\n\n\t\t\tthis.connected = true;\n\t\t});\n\n\t\tthis.peerClientChannel.addEventListener('close', () => {\n\t\t\tthis.print('Peer reset connection.');\n\n\t\t\tthis[Accept]();\n\t\t});\n\n\t\tthis.finally(()=>{\n\t\t\tthis.print('Terminating connection...');\n\t\t\tthis.peerClientChannel.close()\n\t\t});\n\n\t\tthis.peerClientChannel.addEventListener('message', event => {\n\t\t\tthis.print(`> ${event.data}`);\n\t\t\tconsole.log(event);\n\t\t});\n\n\t\tthis.peerClient.createOffer().then(offer => {\n\t\t\tthis.peerClient.setLocalDescription(offer);\n\t\t});\n\n\t\treturn new Promise(accept => {\n\t\t\tthis[Accept] = accept;\n\t\t});\n\t}\n\n\tmain(input)\n\t{\n\t\tif(!input)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.connected)\n\t\t{\n\t\t\tthis.accept(input);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.print(`< ${input}`);\n\t\tthis.peerClientChannel.send(input);\n\t}\n\n\taccept(answerString)\n\t{\n\t\tif (!answerString)\n\t\t{\n\t\t\tthis.print(`Please supply SDP answer string.`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst answer = JSON.parse(answerString);\n\n\t\tconst session = new RTCSessionDescription(answer);\n\n\t\tthis.peerClient.setRemoteDescription(session);\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nconst Accept = Symbol('accept');\n\nexport class RtcServer extends Task\n{\n\tstatic helpText = 'RTC Server.';\n\tstatic useText  = '';\n\n\ttitle     = 'RTC Server Task';\n\tconnected = false;\n\n\tinit()\n\t{\n\t\tconst rtcConfig = {\n\t\t\t// iceServers: [\n\t\t\t// \t{urls: 'stun:stun1.l.google.com:19302'},\n\t\t\t// \t{urls: 'stun:stun2.l.google.com:19302'}\n\t\t\t// ]\n\t\t};\n\n\t\tthis.peerServer = new RTCPeerConnection(rtcConfig);\n\n\t\tthis.peerServer.addEventListener('icecandidate', event => {\n\t\t\tif(!event.candidate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet localDescription = JSON.stringify(this.peerServer.localDescription);\n\n\t\t\tthis.print('Server Answer');\n\n\t\t\tthis.print(localDescription);\n\t\t});\n\n\t\tthis.peerServer.addEventListener('iceconnectionstatechange', () => {\n\t\t\tlet state = this.peerServer.iceConnectionState;\n\n\t\t\tthis.print(`RTC state: ${state}`);\n\t\t});\n\n\t\tthis.peerServer.addEventListener('datachannel', event => {\n\n\t\t\tthis.peerServerChannel = event.channel;\n\n\t\t\tthis.peerServerChannel.addEventListener('open', () => {\n\t\t\t\tthis.print('Remote peer client accepted!');\n\n\t\t\t\tthis.connected = true;\n\t\t\t});\n\n\t\t\tthis.peerServerChannel.addEventListener('close', () => {\n\t\t\t\tthis.print('Peer reset connection.');\n\n\t\t\t\tthis[Accept]();\n\t\t\t});\n\n\t\t\tthis.finally(()=>{\n\t\t\t\tif(this.peerServerChannel)\n\t\t\t\t{\n\t\t\t\t\tthis.print('Terminating connection...');\n\t\t\t\t\tthis.peerServerChannel.close();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.peerServerChannel.addEventListener('message', event => {\n\t\t\t\tthis.print(`> ${event.data}`);\n\t\t\t\tconsole.log(event);\n\t\t\t});\n\n\t\t});\n\n\t\tthis.printErr(`Please supply SDP offer string.`);\n\n\t\treturn new Promise(accept => {\n\t\t\tthis[Accept] = accept;\n\t\t});\n\t}\n\n\tmain(input)\n\t{\n\t\tif(!input)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.connected)\n\t\t{\n\t\t\tthis.answer(input);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.print(`< ${input}`);\n\t\tthis.peerServerChannel.send(input);\n\t}\n\n\tanswer(offerString)\n\t{\n\t\tconst offer = JSON.parse(offerString);\n\n\t\tthis.peerServer.setRemoteDescription(offer);\n\n\t\tthis.peerServer.createAnswer(\n\t\t\t(answer) => {\n\n\t\t\t\tthis.peerServer.setLocalDescription(answer);\n\n\t\t\t}, (error) => {\n\n\t\t\t\tconsole.error(error);\n\n\t\t\t\tthis.printErr(`Unexpected exception.`);\n\n\t\t\t\tthis[Accept]();\n\t\t\t}\n\t\t);\n\t}\n\n\tdone()\n\t{\n\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class SayAjax extends Task\n{\n\ttitle  = 'Say Ajax Task';\n\n\tstatic helpText = 'Whisper on a channel via AJAX.';\n\tstatic useText  = '/sayajax';\n\n\tinit(...args)\n\t{\n\t\tif (!this.term.postToken)\n\t\t{\n\t\t\tthis.print(`Please aquire a POST token first.`);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.print(`${this.postToken}`);\n\n\t\tconst formData = new FormData();\n\n\t\tconst ccCount  = args.shift();\n\t\tconst ccList   = args.splice(0, ccCount);\n\t\tconst bccCount = args.shift();\n\t\tconst bccList  = args.splice(0, bccCount);\n\n\t\tformData.append('cc',  ccList.join(','));\n\t\tformData.append('bcc', bccList.join(','));\n\n\t\tconsole.log(ccList, bccList);\n\n\t\tformData.append('token',   this.term.postToken);\n\t\tformData.append('channel', args.shift());\n\t\tformData.append('message', args.join(' '));\n\n\t\tconst options = {method: 'post', body: formData};\n\n\t\treturn fetch('/post', options).then((response)=>{\n\t\t\tconsole.log(response);\n\t\t});\n\t}\n}\n","import { Config } from 'Config';\nimport { Socket } from 'subspace-client/Socket';\nimport { Task   } from 'subspace-console/Task';\n\nexport class SayText extends Task\n{\n\ttitle  = 'Publish Bytes Task';\n\n\tstatic helpText = 'Send bytes privately from ARGV.';\n\tstatic useText  = '/say CHANNEL_ID CC_COUNT CC_USER_ID[...] BCC_COUNT BCC_USER_ID[...] (hexadecimal)';\n\n\tmain(input)\n\t{\n\t\tconst args     = this.args;\n\t\tconst channel  = args.shift();\n\t\tconst data     = [];\n\n\t\tconst ccCount  = parseInt(args.shift());\n\t\tconst ccList   = args.splice(0, ccCount).map(parseInt);\n\n\t\tconst bccCount = parseInt(args.shift());\n\t\tconst bccList  = args.splice(0, bccCount).map(parseInt);\n\n\t\tthis.term.socket.say(channel, {cc:ccList, bcc:bccList}, args.join(''));\n\n\t\t// this.term.socket.send(`say ${channel} ${ccCount} ${ccList.join(' ')} ${bccCount} ${bccList.join(' ')} ${args.join('')}`);\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class Suffix extends Task\n{\n\ttitle  = 'Sufffix Task';\n\n\tstatic helpText = 'Append a suffix to lines passed into STDIN.';\n\tstatic useText  = '/something | suffix SUFFIX_TEXT';\n\n\tinit(content)\n\t{\n\t\tthis.content = content;\n\t}\n\n\tmain(input = null)\n\t{\n\t\tthis.status = 0;\n\t\tthis.print(String(input) + ' ' + (this.content || 'Suffix.'));\n\t}\n}\n","import { Config } from 'Config';\nimport { Socket } from 'subspace-client/Socket';\nimport { Task } from 'subspace-console/Task';\n\nconst Accept = Symbol('accept');\n\nexport class Theme extends Task\n{\n\ttitle  = 'Theme Task';\n\n\tstatic helpText = 'Change the current theme.';\n\tstatic useText  = '/theme';\n\n\tinit(themeName)\n\t{\n\t\tthis.term.args.inverted = this.term.args.inverted\n\t\t\t? ''\n\t\t\t: 'inverted';\n\t}\n}\n","import { Task } from 'subspace-console/Task';\n\nexport class Upper extends Task\n{\n\ttitle  = 'Uppercase Task';\n\n\tstatic helpText = 'Transform data from STDIN to uppercase.';\n\tstatic useText  = '/something | upper';\n\n\tmain(input = null)\n\t{\n\t\tthis.status = 0;\n\t\tthis.print(String(input).toUpperCase());\n\t}\n}\n","import { View } from 'curvature/base/View';\nimport { Task } from 'subspace-console/Task';\n\nconst Accept = Symbol('accept');\n\nexport class WatchImages extends Task\n{\n\ttitle  = 'Watch Images Task';\n\n\tstatic helpText = 'Watch a channel for images.';\n\tstatic useText  = '/images CHAN';\n\n\tinit(channel)\n\t{\n\t\tif(channel === undefined)\n\t\t{\n\t\t\tthis.printErr('Please supply a channel');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.socket = this.term.socket;\n\n\t\tconst originalEcho = this.term.localEcho;\n\n\t\tconst onMessage = (e,m,o,i)=>{\n\t\t\tconsole.log(m,o,i);\n\n\t\t\tthis.print(`Got one.`);\n\n\t\t\tconst blob = new Blob([new Uint8Array(m)]);\n\t\t\tconst url  = URL.createObjectURL(blob);\n\t\t\tconst view = View.from('<img cv-attr = \"src:img\" cv-ref = \"img:curvature/base/Tag\" />');\n\n\t\t\tview.postRender = () => {\n\t\t\t\tlet img       = view.tags.img.element;\n\t\t\t\tlet imageLoad = (event) => {\n\t\t\t\t\timg.removeEventListener('load', imageLoad);\n\t\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t\t};\n\t\t\t\timg.addEventListener('load', imageLoad);\n\t\t\t};\n\n\t\t\tconsole.log(view);\n\n\t\t\tthis.term.args.output.push(view);\n\n\t\t\tview.args.img = url;\n\t\t};\n\n\t\tthis.finally(() => {\n\t\t\tthis.socket.unsubscribe(`message:${channel}`, onMessage);\n\t\t\tthis.term.localEcho = originalEcho\n\t\t});\n\n\t\tthis.term.localEcho = false;\n\n\t\tthis.socket.subscribe(`message:${channel}`, onMessage);\n\n\t\tthis.print(`Listening for images on channel ${channel}`);\n\n\t\treturn new Promise(accept => {\n\t\t\tthis[Accept] = accept;\n\t\t});\n\t}\n}\n","import { View } from 'curvature/base/View';\n\nexport class BinaryMessageView extends View\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = `<span>&gt;&gt;&nbsp;0x</span>[[header]]&nbsp;[[message]]`;\n\t}\n}\n","import { View } from 'curvature/base/View';\n\nexport class ByteView extends View\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.args.separator = this.args.separator || '';\n\n\t\tthis.template = `<span\n\t\t\tcv-each = \"bytes:byte:b\"\n\t\t\tcv-carry = \"separator\"\n\t\t\t\"><span\n\t\t\t\tclass  = \"byte\"\n\t\t\t\tcv-on  = \"cvDomAttached:color(event, byte, $view)\"\n\t\t\t\tcv-ref = \"byte:curvature/base/Tag\"\n\t\t\t\t\n\t\t\t>[[byte]][[separator]]</span></span>`;\n\t}\n\n\tcolor(event, byte, $view)\n\t{\n\t\tlet hue = parseInt(byte, 16);\n\n\t\t// let color = '#' + [\n\t\t// \t(Math.pow(Math.cos(Math.PI * hue + 5), 2) * 192)\n\t\t// \t, (Math.pow(Math.cos(Math.PI * hue + 10), 2) * 192)\n\t\t// \t, (Math.pow(Math.cos(Math.PI * hue + 0), 2) * 192)\n\t\t// ].map((x)=>Math.floor(x).toString(16).padStart(2, '0')).join('');\n\n\t\tif(!hue)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet color = \"hsl(\" + ((360 * hue) / 0xFF) + \",100%,50%)\";\n\n\t\t$view.tags.byte.element.style.color = color;\n\n\t\t// $view.tags.byte.element.style['text-shadow'] = `2px 0px 5px ${color}, -2px 0px 5px ${color}`\n\t}\n}\n","import { View as BaseView } from 'curvature/base/View';\n\nexport class MeltingText extends BaseView\n{\n\tconstructor(args)\n\t{\n\t\tsuper(args);\n\n\t\tthis.last = this.init = Date.now();\n\n\t\tthis.charUp   = [\n\t\t\t// '\\u030d', /*     ̍     */\t\t'\\u030e', /*     ̎     */\t\t'\\u0304', /*     ̄     */\t\t'\\u0305', /*     ̅     */\n\t\t\t// '\\u033f', /*     ̿     */\t\t'\\u0311', /*     ̑     */\t\t'\\u0306', /*     ̆     */\t\t'\\u0310', /*     ̐     */\n\t\t\t// '\\u0352', /*     ͒     */\t\t'\\u0357', /*     ͗     */\t\t'\\u0351', /*     ͑     */\t\t'\\u0307', /*     ̇     */\n\t\t\t// '\\u0308', /*     ̈     */\t\t'\\u030a', /*     ̊     */\t\t'\\u0342', /*     ͂     */\t\t'\\u0343', /*     ̓     */\n\t\t\t'\\u0344', /*     ̈́     */\t\t/*\t'\\u034a', /*     ͊     */\t/*\t'\\u034b', /*     ͋     */\t/*\t'\\u034c', /*     ͌     */\n\t\t\t'\\u0303', /*     ̃     */\t\t/*\t'\\u0302', /*     ̂     */\t/*\t'\\u030c', /*     ̌     */\t/*\t'\\u0350', /*     ͐     */\n\t\t\t'\\u0300', /*     ̀     */\t\t//\t'\\u0301', /*     ́     */\t\t'\\u030b', /*     ̋     */\t\t'\\u030f', /*     ̏     */\n\t\t\t// '\\u0312', /*     ̒     */\t\t'\\u0313', /*     ̓     */\t\t'\\u0314', /*     ̔     */\t\t'\\u033d', /*     ̽     */\n\t\t\t// '\\u0309', /*     ̉     */\t\t'\\u0363', /*     ͣ     */\t\t'\\u0364', /*     ͤ     */\t\t'\\u0365', /*     ͥ     */\n\t\t\t// '\\u0366', /*     ͦ     */\t\t'\\u0367', /*     ͧ     */\t\t'\\u0368', /*     ͨ     */\t\t'\\u0369', /*     ͩ     */\n\t\t\t// '\\u036a', /*     ͪ     */\t\t'\\u036b', /*     ͫ     */\t\t'\\u036c', /*     ͬ     */\t\t'\\u036d', /*     ͭ     */\n\t\t\t// '\\u036e', /*     ͮ     */\t\t'\\u036f', /*     ͯ     */\t\t'\\u033e', /*     ̾     */\t\t'\\u035b', /*     ͛     */\n\n\t\t];\n\n\t\tthis.charMid  = [\n\t\t\t'\\u0315', /*     ̕     */\t\t'\\u031b', /*     ̛     */\t\t'\\u0340', /*     ̀     */\t\t'\\u0341', /*     ́     */\n\t\t\t'\\u0358', /*     ͘     */\t\t'\\u0321', /*     ̡     */\t\t'\\u0322', /*     ̢     */\t\t'\\u0327', /*     ̧     */\n\t\t\t'\\u0328', /*     ̨     */\t\t'\\u0334', /*     ̴     */\t\t'\\u0335', /*     ̵     */\t\t'\\u0336', /*     ̶     */\n\t\t\t'\\u034f', /*     ͏     */\t\t'\\u035c', /*     ͜     */\t\t'\\u035d', /*     ͝     */\t\t'\\u035e', /*     ͞     */\n\t\t\t'\\u035f', /*     ͟     */\t\t'\\u0360', /*     ͠     */\t\t/*'\\u0362',      ͢     */\t\t'\\u0338', /*     ̸     */\n\t\t\t'\\u0337', /*     ̷     */\t\t'\\u0361', /*     ͡     */\t\t/*'\\u0489'     ҉_     */\n\t\t];\n\n\t\tthis.charDown = [\n\t\t\t// '\\u0316', /*     ̖     */\t\t'\\u0317', /*     ̗     */\t\t'\\u0318', /*     ̘     */\t\t'\\u0319', /*     ̙     */\n\t\t\t// '\\u0316', /*     ̖     */\t\t'\\u0317', /*     ̗     */\t\t'\\u0318', /*     ̘     */\t\t'\\u0319', /*     ̙     */\n\t\t\t// '\\u0320', /*     ̠     */\t\t'\\u0324', /*     ̤     */\t\t'\\u0325', /*     ̥     */\t\t'\\u0326', /*     ̦     */\n\t\t\t// '\\u0329', /*     ̩     */\t\t'\\u032a', /*     ̪     */\t\t'\\u032b', /*     ̫     */\t\t'\\u032c', /*     ̬     */\n\t\t\t// '\\u032d', /*     ̭     */\t\t'\\u032e', /*     ̮     */\t\t'\\u032f', /*     ̯     */\t\t'\\u0330', /*     ̰     */\n\t\t\t// '\\u0331', /*     ̱     */\t\t'\\u0332', /*     ̲     */\t\t'\\u0333', /*     ̳     */\t\t'\\u0339', /*     ̹     */\n\t\t\t'\\u033a', /*     ̺     */\t\t'\\u033b', /*     ̻     */\t\t'\\u033c', /*     ̼     */\t\t'\\u0345', /*     ͅ     */\n\t\t\t//'\\u0347', /*     ͇     */\t\t'\\u0348', /*     ͈     */\t\t'\\u0349', /*     ͉     */\t\t'\\u034d', /*     ͍     */\n\t\t\t//'\\u034e', /*     ͎     */\t\t'\\u0353', /*     ͓     */\t\t'\\u0354', /*     ͔     */\t\t'\\u0355', /*     ͕     */\n\t\t\t// '\\u0356', /*     ͖     */\t\t'\\u0359', /*     ͙     */\t\t'\\u035a', /*     ͚     */\t\t'\\u0323' /*     ̣     */\n\t\t];\n\n\t\tthis.template = `\n\t\t\t<div cv-bind = \"output\" class = \"melting\"></div>\n\t\t`;\n\t\tthis.args.input      = `Magic is no more than the art of employing consciously invisible means to produce visible effects. Will, love, and imagination are magic powers that everyone possesses; and whoever knows how to develop them to their fullest extent is a magician. Magic has but one dogma, namely, that the seen is the measure of the unseen\n`;\n\t\t// this.args.input      = 'anything';\n\t\tthis.args.output     = 'uh.'\n\t\tthis.corruptors = [];\n\t\tthis.maxMaxCorrupt = 25;\n\t\tthis.maxCorrupt = 0;\n\t\tthis.type       = '';\n\n\t\tthis.onFrame(() => {\n\t\t\tthis.typewriter(this.args.input);\n\t\t});\n\n\t\tthis.onInterval(16*4, () => {\n\n\t\t\tlet selection = window.getSelection();\n\n\t\t\tif(selection.anchorOffset !== selection.focusOffset)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(selection.anchorNode !== selection.focusNode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.args.output = this.corrupt(this.type);\n\t\t\t// this.args.output = this.type;\n\t\t});\n\n\t\tthis.args.bindTo(\n\t\t\t'input'\n\t\t\t, (v) => { this.type = ''; this.corruptors = [] }\n\t\t);\n\t}\n\n\tage()\n\t{\n\t\treturn this.init - Date.now();\n\t}\n\n\tlastFrame()\n\t{\n\t\treturn this.last - Date.now();\n\t}\n\n\tcorrupt(v)\n\t{\n\t\tif(v.length * 1.15 < this.args.input.length)\n\t\t{\n\t\t\treturn this.type;\n\t\t}\n\n\t\tlet chars  = v.split('');\n\t\tlet random = (x) => parseInt(Math.random()*x);\n\n\t\tif(random(1024) < 256 && this.maxCorrupt < this.maxMaxCorrupt)\n\t\t{\n\t\t\tthis.maxCorrupt += 5;\n\t\t}\n\n\t\tfor(let i in chars) {\n\t\t\tthis.corruptors[i] = this.corruptors[i] || [];\n\n\t\t\tif(chars[i].match(/\\W/)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet charSets = [\n\t\t\t\t// this.charDown // Melt Slow\n\t\t\t\tthis.charDown, this.charMid // Melt\n\t\t\t\t// this.charDown, this.charUp,   this.charMid, // Boil\n\t\t\t\t// this.charMid, this.charUp, // Burn\n\t\t\t\t// this.charMid // Simmer\n\t\t\t\t// this.charUp // Rain\n\t\t\t];\n\n\t\t\tlet charSet = charSets[ random(charSets.length) ];\n\n\t\t\tif(random(8192) < 1)\n\t\t\t{\n\t\t\t\tthis.corruptors[i].unshift(charSet[ random(charSet.length) ]);\n\t\t\t}\n\n\t\t\tif(this.corruptors[i].length < this.maxCorrupt)\n\t\t\t{\n\t\t\t\tthis.corruptors[i].unshift(charSet[ random(charSet.length) ]);\n\t\t\t}\n\n\t\t\tif(random(2048) < 1 && this.maxCorrupt > 25)\n\t\t\t{\n\t\t\t\tthis.corruptors[i].splice(5 * random(5));\n\t\t\t}\n\n\t\t\tthis.corruptors[i].push(this.corruptors[i].shift());\n\t\t}\n\n\t\tfor(var i in chars)\n\t\t{\n\t\t\tif(this.corruptors[i])\n\t\t\t{\n\t\t\t\tchars[i] += this.corruptors[i].join('');\n\t\t\t}\n\t\t}\n\n\t\treturn chars.join('');\n\t}\n\n\ttypewriter(v)\n\t{\n\t\tthis.type = this.type || '';\n\n\t\tif(this.type !== v)\n\t\t{\n\t\t\tthis.type += v.substr(this.type.length, 1);\n\n\t\t\tthis.onTimeout(150, () => {\n\t\t\t\tconst max = window.scrollY + window.innerHeight;\n\t\t\t\tif(document.body.scrollHeight > max)\n\t\t\t\t{\n\t\t\t\t\twindow.scrollTo({\n\t\t\t\t\t\ttop: document.body.scrollHeight\n\t\t\t\t\t\t, left: 0\n\t\t\t\t\t\t, behavior: 'smooth'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","import { View } from 'curvature/base/View';\n\nexport class TextMessageView extends View\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = `<span>&gt;&gt;&nbsp;</span><span class = \"text\">[[message]]</span>`;\n\t}\n}\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}