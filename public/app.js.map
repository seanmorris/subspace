{"version":3,"sources":["node_modules/curvature/base/Bindable.js","node_modules/curvature/base/Cache.js","node_modules/curvature/base/Cookie.js","node_modules/curvature/base/Dom.js","node_modules/curvature/base/Router.js","node_modules/curvature/base/RuleSet.js","node_modules/curvature/base/Tag.js","node_modules/curvature/base/View.js","node_modules/curvature/base/ViewList.js","node_modules/curvature/input/Keyboard.js","node_modules/subspace-client/Channel.js","node_modules/subspace-client/Socket.js","app/BinaryMessageView.js","app/ByteView.js","app/Config.js","app/Cornfield.js","app/Image.js","app/Login.js","app/MeltingText.js","app/Register.js","app/RootView.js","app/TextMessageView.js","app/chat/Chat.js","app/chat/View.js","app/chat/view.tmp.html","app/initialize.js","app/root.tmp.html","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["BinaryMessageView","args","template","View","ByteView","separator","event","byte","$view","hue","parseInt","color","tags","element","style","Config","title","socketHost","location","hostname","Cornfield","terminal","output","push","localEcho","socket","subscribe","e","m","o","i","c","publish","input","split","command","shift","console","log","toLowerCase","chatMessage","join","Image","channel","length","blob","Blob","Uint8Array","url","URL","createObjectURL","view","postRender","img","imageLoad","removeEventListener","revokeObjectURL","addEventListener","Login","passwordMode","stack","localLock","prompt","send","MeltingText","charUp","charMid","charDown","corruptors","maxCorrupt","type","bindTo","v","corrupt","setInterval","typewriter","selection","window","getSelection","anchorOffset","focusOffset","anchorNode","focusNode","chars","rand","x","Math","random","match","charSets","charSet","unshift","pop","substr","onTimeout","document","body","scrollHeight","scrollY","innerHeight","scrollTo","top","left","behavior","BaseView","Register","RootView","routes","require","inverted","max","history","historyCursor","___after___","t","k","a","runScript","keyboard","Keyboard","keys","wait","rtcConfig","iceServers","urls","peerClient","RTCPeerConnection","peerServer","localDescription","JSON","stringify","state","iceConnectionState","peerServerChannel","peerClientChannel","fetch","then","response","text","init","lines","line","substring","interpret","display","password","focus","fileChannel","fileReader","FileReader","field","target","file","files","name","result","TextDecoder","decode","value","readAsArrayBuffer","toString","pass","data","channelBytes","Uint16Array","buffer","bytes","auth","click","createDataChannel","createOffer","offer","setLocalDescription","RTCSessionDescription","parse","setRemoteDescription","createAnswer","answer","answerString","error","Socket","get","recon","clearTimeout","message","origin","originId","originalChannel","packet","received","TextMessageView","ArrayBuffer","bytesArray","user","toUpperCase","padStart","channelName","header","headerBytes","messageIndex","Array","from","map","slice","token","key","preventDefault","stopPropagation","Chat","RuleSet","add","Router","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","date","round","Date","now","replace","indexOf","browser","navigator","userAgent","forceRepaint","reloaders","page","reload","stylesheet","call","querySelectorAll","filter","link","val","getAttribute","href","forEach","setTimeout","offsetHeight","javascript","scripts","textScripts","script","srcScripts","src","loaded","all","onLoad","eval","remove","newScript","createElement","async","onload","head","appendChild","port","host","server","connect","connection","onmessage","reloader","onerror","readyState","close","onclose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"public/app.js","sourcesContent":["\nrequire.register(\"curvature/base/Bindable.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Bindable = exports.Bindable = function () {\n    function Bindable() {\n        _classCallCheck(this, Bindable);\n    }\n\n    _createClass(Bindable, null, [{\n        key: 'isBindable',\n        value: function isBindable(object) {\n            if (!object.___binding___) {\n                return false;\n            }\n\n            return object.___binding___ === Bindable;\n        }\n    }, {\n        key: 'makeBindable',\n        value: function makeBindable(object) {\n\n            if (!object || object.___binding___ || (typeof object === 'undefined' ? 'undefined' : _typeof(object)) !== 'object' || object instanceof Node) {\n                return object;\n            }\n\n            Object.defineProperty(object, '___ref___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, 'bindTo', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, 'isBound', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___binding___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___bindingAll___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___isBindable___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___executing___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___stack___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___stackTime___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___before___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___after___', {\n                enumerable: false,\n                writable: true\n            });\n\n            // Object.defineProperty(object, 'toString', {\n            //     enumerable: false,\n            //     writable: true\n            // });\n\n            Object.defineProperty(object, '___setCount___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___wrapped___', {\n                enumerable: false,\n                writable: true\n            });\n\n            Object.defineProperty(object, '___object___', {\n                enumerable: false,\n                writable: false,\n                value: object\n            });\n            object.___isBindable___ = Bindable;\n            object.___wrapped___ = {};\n            object.___binding___ = {};\n            object.___bindingAll___ = [];\n            object.___stack___ = [];\n            object.___stackTime___ = [];\n            object.___before___ = [];\n            object.___after___ = [];\n            object.___setCount___ = {};\n            object.bindTo = function (property) {\n                var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n                var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n                var bindToAll = false;\n\n                if (property instanceof Function) {\n                    options = callback || {};\n                    callback = property;\n                    bindToAll = true;\n                }\n\n                var throttle = false;\n\n                if (options.delay >= 0) {\n                    callback = function (callback) {\n                        return function (v, k, t, d) {\n                            var p = t[k];\n                            setTimeout(function () {\n                                return callback(v, k, t, d, p);\n                            }, options.delay);\n                        };\n                    }(callback);\n                }\n\n                if (options.throttle >= 0) {\n                    callback = function (callback) {\n                        return function (v, k, t, d) {\n                            if (throttle) {\n                                return;\n                            }\n                            var p = t[k];\n                            callback(v, k, t, d, p);\n                            throttle = true;\n                            setTimeout(function () {\n                                return throttle = false;\n                            }, options.throttle);\n                        };\n                    }(callback);\n                }\n\n                var waiter = void 0;\n\n                if (options.wait >= 0) {\n                    callback = function (callback) {\n                        return function (v, k, t, d) {\n                            if (waiter) {\n                                clearTimeout(waiter);\n                            }\n                            var p = t[k];\n                            waiter = setTimeout(function () {\n                                return callback(v, k, t, d, p);\n                            }, options.wait);\n                        };\n                    }(callback);\n                }\n\n                if (bindToAll) {\n                    var _bindIndex = object.___bindingAll___.length;\n\n                    object.___bindingAll___.push(callback);\n\n                    for (var i in object) {\n                        callback(object[i], i, object, false);\n                    }\n\n                    return function () {\n                        object.___bindingAll___[_bindIndex] = null;\n                    };\n                }\n\n                if (!object.___binding___[property]) {\n                    object.___binding___[property] = [];\n                }\n\n                var bindIndex = object.___binding___[property].length;\n\n                object.___binding___[property].push(callback);\n\n                callback(object[property], property, object, false);\n\n                return function () {\n                    if (!object.___binding___[property]) {\n                        return;\n                    }\n                    object.___binding___[property][bindIndex] = null;\n                };\n            };\n\n            object.isBound = function () {\n                for (var i in object.___bindingAll___) {\n                    if (object.___bindingAll___[i]) {\n                        return true;\n                    }\n                }\n\n                for (var _i in object.___binding___) {\n                    for (var j in object.___binding___[_i]) {\n                        if (object.___binding___[_i][j]) {\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            };\n\n            // object.toString = object.toString || (() => {\n            //     if (typeof object == 'object') {\n            //         return JSON.stringify(object);\n            //         return '[object]'\n            //     }\n\n            //     return object;\n            // });\n\n            for (var i in object) {\n                if (object[i] && _typeof(object[i]) == 'object' && !object[i] instanceof Node && !object[i] instanceof Promise) {\n                    object[i] = Bindable.makeBindable(object[i]);\n                }\n            }\n\n            var set = function set(target, key, value) {\n                if (typeof key === 'string' && key.substring(0, 3) === '___' && key.slice(-3) === '___') {\n                    return true;\n                }\n\n                if (target[key] === value) {\n                    return true;\n                }\n\n                // console.log(`Setting ${key}`, value);\n\n                if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object' && !(value instanceof Node)) {\n                    // console.log(value);\n                    if (value.___isBindable___ !== Bindable) {\n                        value = Bindable.makeBindable(value);\n\n                        for (var _i2 in value) {\n                            if (value[_i2] && _typeof(value[_i2]) == 'object') {\n                                value[_i2] = Bindable.makeBindable(value[_i2]);\n                            }\n                        }\n                    }\n                }\n\n                for (var _i3 in object.___bindingAll___) {\n                    if (!object.___bindingAll___[_i3]) {\n                        continue;\n                    }\n                    object.___bindingAll___[_i3](value, key, target, false);\n                }\n\n                var stop = false;\n\n                if (key in object.___binding___) {\n                    for (var _i4 in object.___binding___[key]) {\n                        if (!object.___binding___[key]) {\n                            continue;\n                        }\n                        if (!object.___binding___[key][_i4]) {\n                            continue;\n                        }\n                        if (object.___binding___[key][_i4](value, key, target, false, target[key]) === false) {\n                            stop = true;\n                        }\n                    }\n                }\n\n                if (!stop) {\n                    var descriptor = Object.getOwnPropertyDescriptor(target, key);\n\n                    var excluded = target instanceof File && key == 'lastModifiedDate';\n\n                    if (!excluded && (!descriptor || descriptor.writable)) {\n                        target[key] = value;\n                    }\n                }\n\n                if (!target.___setCount___[key]) {\n                    target.___setCount___[key] = 0;\n                }\n\n                target.___setCount___[key]++;\n\n                var warnOn = 10;\n\n                if (target.___setCount___[key] > warnOn && value instanceof Object) {\n                    // console.log(\n                    //     'Warning: Resetting bindable reference \"' +\n                    //     key +\n                    //     '\" to object ' +\n                    //     target.___setCount___[key] +\n                    //     ' times.'\n                    // );\n                }\n\n                return Reflect.set(target, key, value);\n            };\n\n            var del = function del(target, key) {\n                if (!(key in target)) {\n                    return true;\n                }\n\n                for (var _i5 in object.___bindingAll___) {\n                    object.___bindingAll___[_i5](undefined, key, target, true, target[key]);\n                }\n\n                if (key in object.___binding___) {\n                    for (var _i6 in object.___binding___[key]) {\n                        if (!object.___binding___[key][_i6]) {\n                            continue;\n                        }\n                        object.___binding___[key][_i6](undefined, key, target, true, target[key]);\n                    }\n                }\n\n                if (Array.isArray(target)) {\n                    target.splice(key, 1);\n                } else {\n                    delete target[key];\n                }\n\n                return true;\n            };\n\n            var get = function get(target, key) {\n                if (target[key] instanceof Function) {\n\n                    if (target.___wrapped___[key]) {\n                        return target.___wrapped___[key];\n                    }\n\n                    target.___wrapped___[key] = function () {\n                        target.___executing___ = key;\n\n                        target.___stack___.unshift(key);\n                        // target.___stackTime___.unshift((new Date).getTime());\n\n                        // console.log(`Start ${key}()`);\n\n                        for (var _i7 in target.___before___) {\n                            target.___before___[_i7](target, key, object);\n                        }\n\n                        var objRef = object instanceof Promise ? object : object.___ref___;\n\n                        var ret = target[key].apply(objRef, arguments);\n\n                        for (var _i8 in target.___after___) {\n                            target.___after___[_i8](target, key, object);\n                        }\n\n                        target.___executing___ = null;\n\n                        // let execTime = (new Date).getTime() - target.___stackTime___[0];\n\n                        // if (execTime > 150) {\n                        //     // console.log(`End ${key}(), took ${execTime} ms`);\n                        // }\n\n                        target.___stack___.shift();\n                        // target.___stackTime___.shift();\n\n                        return ret;\n                    };\n\n                    return target.___wrapped___[key];\n                }\n\n                if (target[key] instanceof Object) {\n                    Bindable.makeBindable(target[key]);\n                }\n\n                // console.log(`Getting ${key}`);\n\n                return target[key];\n            };\n\n            object.___ref___ = new Proxy(object, {\n                deleteProperty: del,\n                get: get,\n                set: set\n            });\n\n            return object.___ref___;\n        }\n    }, {\n        key: 'clearBindings',\n        value: function clearBindings(object) {\n            object.___wrapped___ = {};\n            object.___bindingAll___ = [];\n            object.___binding___ = {};\n            object.___before___ = [];\n            object.___after___ = [];\n            object.___ref___ = {};\n            // object.toString         = ()=>'{}';\n        }\n    }, {\n        key: 'resolve',\n        value: function resolve(object, path) {\n            var owner = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            // console.log(path, object);\n\n            var node = void 0;\n            var pathParts = path.split('.');\n            var top = pathParts[0];\n\n            while (pathParts.length) {\n                if (owner && pathParts.length === 1) {\n                    var obj = this.makeBindable(object);\n\n                    return [obj, pathParts.shift(), top];\n                }\n\n                node = pathParts.shift();\n\n                if (!node in object || !object[node] || !(object[node] instanceof Object)) {\n                    object[node] = {};\n                }\n\n                object = this.makeBindable(object[node]);\n            }\n\n            return [this.makeBindable(object), node, top];\n        }\n    }]);\n\n    return Bindable;\n}();\n  })();\n});","\nrequire.register(\"curvature/base/Cache.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cache = exports.Cache = function () {\n\tfunction Cache() {\n\t\t_classCallCheck(this, Cache);\n\t}\n\n\t_createClass(Cache, null, [{\n\t\tkey: 'store',\n\t\tvalue: function store(key, value, expiry) {\n\t\t\tvar bucket = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'standard';\n\n\t\t\tvar expiration = 0;\n\n\t\t\tif (expiry) {\n\t\t\t\texpiration = expiry * 1000 + new Date().getTime();\n\t\t\t}\n\n\t\t\t// console.log(\n\t\t\t// \t`Caching ${key} until ${expiration} in ${bucket}.`\n\t\t\t// \t, value\n\t\t\t// \t, this.bucket\n\t\t\t// );\n\n\t\t\tif (!this.bucket) {\n\t\t\t\tthis.bucket = {};\n\t\t\t}\n\n\t\t\tif (!this.bucket[bucket]) {\n\t\t\t\tthis.bucket[bucket] = {};\n\t\t\t}\n\n\t\t\tthis.bucket[bucket][key] = { expiration: expiration, value: value };\n\t\t}\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(key) {\n\t\t\tvar defaultvalue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\t\tvar bucket = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'standard';\n\n\t\t\t// console.log(\n\t\t\t// \t`Checking cache for ${key} in ${bucket}.`\n\t\t\t// \t, this.bucket\n\t\t\t// );\n\n\t\t\tif (this.bucket && this.bucket[bucket] && this.bucket[bucket][key]) {\n\t\t\t\t// console.log(this.bucket[bucket][key].expiration, (new Date).getTime());\n\t\t\t\tif (this.bucket[bucket][key].expiration == 0 || this.bucket[bucket][key].expiration > new Date().getTime()) {\n\t\t\t\t\treturn this.bucket[bucket][key].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn defaultvalue;\n\t\t}\n\t}]);\n\n\treturn Cache;\n}();\n  })();\n});","\nrequire.register(\"curvature/base/Cookie.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Cookie = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Bindable = require('./Bindable');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cookie = exports.Cookie = function () {\n\tfunction Cookie() {\n\t\t_classCallCheck(this, Cookie);\n\t}\n\n\t_createClass(Cookie, null, [{\n\t\tkey: 'set',\n\t\tvalue: function set(name, value) {\n\t\t\tCookie.jar[name] = value;\n\t\t}\n\t}, {\n\t\tkey: 'get',\n\t\tvalue: function get(name) {\n\t\t\treturn Cookie.jar[name];\n\t\t}\n\t}, {\n\t\tkey: 'delete',\n\t\tvalue: function _delete(name) {\n\t\t\tdelete Cookie.jar[name];\n\t\t}\n\t}]);\n\n\treturn Cookie;\n}();\n\n;\n\nCookie.jar = Cookie.jar || _Bindable.Bindable.makeBindable({});\n\nif (window.location.href.substr(0, 4) !== 'data') {\n\tdocument.cookie.split(';').map(function (c) {\n\t\tvar _c$split = c.split('='),\n\t\t    _c$split2 = _slicedToArray(_c$split, 2),\n\t\t    key = _c$split2[0],\n\t\t    value = _c$split2[1];\n\n\t\ttry {\n\t\t\tvalue = JSON.parse(value);\n\t\t} catch (error) {\n\t\t\tvalue = value;\n\t\t}\n\n\t\tkey = key.trim();\n\n\t\tCookie.jar[decodeURIComponent(key)] = value;\n\t\t// console.log(Cookie.jar);\n\t});\n\n\tCookie.jar.bindTo(function (v, k, t, d) {\n\t\tt[k] = v;\n\n\t\tif (d) {\n\t\t\tt[k] = null;\n\t\t}\n\n\t\tvar cookieString = encodeURIComponent(k) + '=' + t[k];\n\t\t// console.log(cookieString);\n\t\tdocument.cookie = cookieString;\n\t});\n}\n  })();\n});","\nrequire.register(\"curvature/base/Dom.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Dom = exports.Dom = function () {\n\tfunction Dom() {\n\t\t_classCallCheck(this, Dom);\n\t}\n\n\t_createClass(Dom, null, [{\n\t\tkey: \"mapTags\",\n\t\tvalue: function mapTags(doc, selector, callback, startNode, endNode) {\n\t\t\tvar result = [];\n\n\t\t\tvar started = true;\n\n\t\t\tif (startNode) {\n\t\t\t\tstarted = false;\n\t\t\t}\n\n\t\t\tvar ended = false;\n\n\t\t\tvar treeWalker = document.createTreeWalker(doc, NodeFilter.SHOW_ALL, {\n\t\t\t\tacceptNode: function acceptNode(node) {\n\t\t\t\t\tif (!started) {\n\t\t\t\t\t\tif (node === startNode) {\n\t\t\t\t\t\t\tstarted = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (endNode && node === endNode) {\n\t\t\t\t\t\tended = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (ended) {\n\t\t\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t\t\t}\n\t\t\t\t\tif (selector) {\n\t\t\t\t\t\t// console.log(selector, node, !!(node instanceof Element));\n\t\t\t\t\t\tif (node instanceof Element) {\n\t\t\t\t\t\t\tif (node.matches(selector)) {\n\t\t\t\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\t\t\t}, false);\n\n\t\t\twhile (treeWalker.nextNode()) {\n\t\t\t\tresult.push(callback(treeWalker.currentNode));\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t}, {\n\t\tkey: \"dispatchEvent\",\n\t\tvalue: function dispatchEvent(doc, event) {\n\t\t\tdoc.dispatchEvent(event);\n\n\t\t\tDom.mapTags(doc, false, function (node) {\n\t\t\t\tnode.dispatchEvent(event);\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Dom;\n}();\n  })();\n});","\nrequire.register(\"curvature/base/Router.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Router = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _View = require('./View');\n\nvar _Cache = require('./Cache');\n\nvar _Config = require('Config');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Router = exports.Router = function () {\n\tfunction Router() {\n\t\t_classCallCheck(this, Router);\n\t}\n\n\t_createClass(Router, null, [{\n\t\tkey: 'wait',\n\t\tvalue: function wait(view) {\n\t\t\tvar _this = this;\n\n\t\t\tvar event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'DOMContentLoaded';\n\t\t\tvar node = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document;\n\n\t\t\tnode.addEventListener(event, function () {\n\t\t\t\t_this.listen(view);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'listen',\n\t\tvalue: function listen(mainView) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar routeHistory = [location.toString()];\n\t\t\tvar prevHistoryLength = history.length;\n\n\t\t\tvar route = location.pathname + location.search;\n\n\t\t\tif (location.hash) {\n\t\t\t\troute += location.hash;\n\t\t\t}\n\n\t\t\twindow.addEventListener('popstate', function (event) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif (routeHistory.length && prevHistoryLength == history.length) {\n\t\t\t\t\tif (location.toString() == routeHistory[routeHistory.length - 2]) {\n\t\t\t\t\t\trouteHistory.pop();\n\t\t\t\t\t} else {\n\t\t\t\t\t\trouteHistory.push(location.toString());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trouteHistory.push(location.toString());\n\t\t\t\t\tprevHistoryLength = history.length;\n\t\t\t\t}\n\n\t\t\t\t_this2.match(location.pathname, mainView);\n\t\t\t});\n\n\t\t\tthis.go(route);\n\t\t}\n\t}, {\n\t\tkey: 'go',\n\t\tvalue: function go(route, silent) {\n\t\t\tvar _this3 = this;\n\n\t\t\tdocument.title = _Config.Config.title;\n\t\t\tsetTimeout(function () {\n\t\t\t\thistory.pushState(null, null, route);\n\n\t\t\t\tif (!silent) {\n\t\t\t\t\tif (silent === false) {\n\t\t\t\t\t\t_this3.path = null;\n\t\t\t\t\t}\n\t\t\t\t\twindow.dispatchEvent(new Event('popstate'));\n\n\t\t\t\t\tif (route.substring(0, 1) === '#') {\n\t\t\t\t\t\twindow.dispatchEvent(new HashChangeEvent('hashchange'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\t}, {\n\t\tkey: 'match',\n\t\tvalue: function match(path, view) {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar forceRefresh = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n\t\t\tif (this.path === path && !forceRefresh) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar eventStart = new CustomEvent('cvRouteStart', {\n\t\t\t\tcancelable: true,\n\t\t\t\tdetail: { result: result, path: path, view: view }\n\t\t\t});\n\n\t\t\tvar current = view.args.content;\n\t\t\tvar routes = view.routes;\n\n\t\t\tthis.path = path;\n\t\t\tthis.query = {};\n\n\t\t\tvar query = new URLSearchParams(location.search);\n\n\t\t\tthis.queryString = location.search;\n\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = query[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar pair = _step.value;\n\n\t\t\t\t\tthis.query[pair[0]] = pair[1];\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar args = {},\n\t\t\t    selected = false,\n\t\t\t    result = '';\n\n\t\t\tpath = path.substr(1).split('/');\n\n\t\t\tfor (var i in this.query) {\n\t\t\t\targs[i] = this.query[i];\n\t\t\t}\n\n\t\t\tL1: for (var _i in routes) {\n\t\t\t\tvar route = _i.split('/');\n\t\t\t\tif (route.length < path.length) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tL2: for (var j in route) {\n\t\t\t\t\tif (route[j].substr(0, 1) == '%') {\n\t\t\t\t\t\tvar argName = null;\n\t\t\t\t\t\tvar groups = /^%(\\w+)\\??/.exec(route[j]);\n\t\t\t\t\t\tif (groups && groups[1]) {\n\t\t\t\t\t\t\targName = groups[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!argName) {\n\t\t\t\t\t\t\tthrow new Error(route[j] + ' is not a valid argument segment in route \"' + _i + '\"');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!path[j]) {\n\t\t\t\t\t\t\tif (route[j].substr(route[j].length - 1, 1) == '?') {\n\t\t\t\t\t\t\t\targs[argName] = '';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcontinue L1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\targs[argName] = path[j];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (path[j] !== route[j]) {\n\t\t\t\t\t\tcontinue L1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!forceRefresh && current && routes[_i] instanceof Object && current instanceof routes[_i] && !(routes[_i] instanceof Promise) && current.update(args)) {\n\t\t\t\t\tview.args.content = current;\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tselected = _i;\n\t\t\t\tresult = routes[_i];\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdocument.dispatchEvent(eventStart);\n\n\t\t\tif (selected in routes && routes[selected] instanceof Object && routes[selected].isView && routes[selected].isView()) {\n\t\t\t\tresult = new routes[selected](args);\n\n\t\t\t\tresult.root = function () {\n\t\t\t\t\treturn view;\n\t\t\t\t};\n\t\t\t} else if (routes[selected] instanceof Function) {\n\t\t\t\tresult = '';\n\n\t\t\t\tvar _result = routes[selected](args);\n\n\t\t\t\tif (_result instanceof Promise) {\n\t\t\t\t\tresult = false;\n\n\t\t\t\t\t_result.then(function (x) {\n\t\t\t\t\t\t_this4.update(view, path, x);\n\t\t\t\t\t}).catch(function (x) {\n\t\t\t\t\t\t_this4.update(view, path, x);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tresult = _result;\n\t\t\t\t}\n\t\t\t} else if (routes[selected] instanceof Promise) {\n\t\t\t\tresult = false;\n\n\t\t\t\troutes[selected].then(function (x) {\n\t\t\t\t\t_this4.update(view, path, x);\n\t\t\t\t}).catch(function (x) {\n\t\t\t\t\t_this4.update(view, path, x);\n\t\t\t\t});\n\t\t\t} else if (routes[selected] instanceof Object) {\n\t\t\t\tresult = new routes[selected](args);\n\t\t\t} else if (typeof routes[selected] == 'string') {\n\t\t\t\tresult = routes[selected];\n\t\t\t}\n\n\t\t\tthis.update(view, path, result);\n\n\t\t\t// if(view.args.content instanceof View)\n\t\t\t// {\n\t\t\t// \t// view.args.content.pause(true);\n\t\t\t// \tview.args.content.remove();\n\t\t\t// }\n\n\t\t\t// if(result !== false)\n\t\t\t// {\n\t\t\t// \tif(document.dispatchEvent(event))\n\t\t\t// \t{\n\t\t\t// \t\tview.args.content = result;\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\tif (result instanceof _View.View) {\n\t\t\t\tresult.pause(false);\n\n\t\t\t\tresult.update(args, forceRefresh);\n\t\t\t}\n\n\t\t\treturn selected !== false;\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update(view, path, result) {\n\t\t\tvar event = new CustomEvent('cvRoute', {\n\t\t\t\tcancelable: true,\n\t\t\t\tdetail: { result: result, path: path, view: view }\n\t\t\t});\n\n\t\t\tvar eventEnd = new CustomEvent('cvRouteEnd', {\n\t\t\t\tcancelable: true,\n\t\t\t\tdetail: { result: result, path: path, view: view }\n\t\t\t});\n\n\t\t\tif (result !== false) {\n\t\t\t\tif (view.args.content instanceof _View.View) {\n\t\t\t\t\t// view.args.content.pause(true);\n\t\t\t\t\tview.args.content.remove();\n\t\t\t\t}\n\n\t\t\t\tif (document.dispatchEvent(event)) {\n\t\t\t\t\tview.args.content = result;\n\t\t\t\t}\n\n\t\t\t\tdocument.dispatchEvent(eventEnd);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'clearCache',\n\t\tvalue: function clearCache() {\n\t\t\t// this.cache = {};\n\t\t}\n\t}, {\n\t\tkey: 'queryOver',\n\t\tvalue: function queryOver() {\n\t\t\tvar args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t\tvar params = new URLSearchParams(location.search);\n\t\t\tvar finalArgs = {};\n\t\t\tvar query = [];\n\n\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\tvar _didIteratorError2 = false;\n\t\t\tvar _iteratorError2 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator2 = params[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\tvar pair = _step2.value;\n\n\t\t\t\t\tquery[pair[0]] = pair[1];\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t_iteratorError2 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i in query) {\n\t\t\t\tfinalArgs[i] = query[i];\n\t\t\t}\n\n\t\t\tfor (var _i2 in args) {\n\t\t\t\tfinalArgs[_i2] = args[_i2];\n\t\t\t}\n\n\t\t\tdelete finalArgs['api'];\n\n\t\t\treturn finalArgs;\n\t\t}\n\t}, {\n\t\tkey: 'queryToString',\n\t\tvalue: function queryToString() {\n\t\t\tvar args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\tvar fresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\t\t\tvar parts = [],\n\t\t\t    finalArgs = args;\n\n\t\t\tif (!fresh) {\n\t\t\t\tfinalArgs = this.queryOver(args);\n\t\t\t}\n\n\t\t\tfor (var i in finalArgs) {\n\t\t\t\tif (finalArgs[i] === '') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tparts.push(i + '=' + encodeURIComponent(finalArgs[i]));\n\t\t\t}\n\n\t\t\treturn parts.join('&');\n\t\t}\n\t}, {\n\t\tkey: 'setQuery',\n\t\tvalue: function setQuery(name, value, silent) {\n\t\t\tvar args = {};\n\n\t\t\targs[name] = value;\n\n\t\t\tthis.go(this.path + '?' + this.queryToString(args), silent);\n\t\t}\n\t}]);\n\n\treturn Router;\n}();\n  })();\n});","\nrequire.register(\"curvature/base/RuleSet.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.RuleSet = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Dom = require('./Dom');\n\nvar _Tag = require('./Tag');\n\nvar _View = require('./View');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RuleSet = exports.RuleSet = function () {\n\tfunction RuleSet() {\n\t\t_classCallCheck(this, RuleSet);\n\t}\n\n\t_createClass(RuleSet, [{\n\t\tkey: 'add',\n\t\tvalue: function add(selector, callback) {\n\t\t\tthis.rules = this.rules || {};\n\t\t\tthis.rules[selector] = this.rules[selector] || [];\n\n\t\t\tthis.rules[selector].push(callback);\n\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'apply',\n\t\tvalue: function apply() {\n\t\t\tvar doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\t\t\tvar view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\t\tRuleSet.apply(doc, view);\n\n\t\t\tfor (var selector in this.rules) {\n\t\t\t\tfor (var i in this.rules[selector]) {\n\t\t\t\t\tvar callback = this.rules[selector][i];\n\t\t\t\t\tvar wrapped = RuleSet.wrap(doc, callback, view);\n\t\t\t\t\tvar nodes = doc.querySelectorAll(selector);\n\n\t\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\t\tvar _didIteratorError = false;\n\t\t\t\t\tvar _iteratorError = undefined;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator = nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\t\tvar node = _step.value;\n\n\t\t\t\t\t\t\twrapped(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t_iteratorError = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}], [{\n\t\tkey: 'add',\n\t\tvalue: function add(selector, callback) {\n\t\t\tthis.globalRules = this.globalRules || {};\n\t\t\tthis.globalRules[selector] = this.globalRules[selector] || [];\n\n\t\t\tthis.globalRules[selector].push(callback);\n\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'apply',\n\t\tvalue: function apply() {\n\t\t\tvar doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\t\t\tvar view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\t\tfor (var selector in this.globalRules) {\n\t\t\t\tfor (var i in this.globalRules[selector]) {\n\t\t\t\t\tvar callback = this.globalRules[selector][i];\n\t\t\t\t\tvar wrapped = this.wrap(doc, callback, view);\n\t\t\t\t\tvar nodes = doc.querySelectorAll(selector);\n\n\t\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\t\tvar _iteratorError2 = undefined;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator2 = nodes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\t\tvar node = _step2.value;\n\n\t\t\t\t\t\t\twrapped(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'wait',\n\t\tvalue: function wait() {\n\t\t\tvar _this = this;\n\n\t\t\tvar event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'DOMContentLoaded';\n\t\t\tvar node = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n\t\t\tvar listener = function (event, node) {\n\t\t\t\treturn function () {\n\t\t\t\t\tnode.removeEventListener(event, listener);\n\t\t\t\t\treturn _this.apply();\n\t\t\t\t};\n\t\t\t}(event, node);\n\n\t\t\tnode.addEventListener(event, listener);\n\t\t}\n\t}, {\n\t\tkey: 'wrap',\n\t\tvalue: function wrap(doc, callback) {\n\t\t\tvar view = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n\t\t\tif (callback instanceof _View.View || callback && callback.prototype && callback.prototype instanceof _View.View) {\n\t\t\t\tcallback = function (callback) {\n\t\t\t\t\treturn function () {\n\t\t\t\t\t\treturn callback;\n\t\t\t\t\t};\n\t\t\t\t}(callback);\n\t\t\t}\n\n\t\t\treturn function (element) {\n\t\t\t\tif (!element.___cvApplied___) {\n\t\t\t\t\tObject.defineProperty(element, '___cvApplied___', {\n\t\t\t\t\t\tenumerable: false,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t});\n\n\t\t\t\t\telement.___cvApplied___ = [];\n\t\t\t\t}\n\n\t\t\t\tfor (var i in element.___cvApplied___) {\n\t\t\t\t\tif (callback == element.___cvApplied___[i]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar direct = void 0,\n\t\t\t\t    parentView = void 0;\n\n\t\t\t\tif (view) {\n\t\t\t\t\tdirect = parentView = view;\n\n\t\t\t\t\tif (view.viewList) {\n\t\t\t\t\t\tparentView = view.viewList.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar tag = new _Tag.Tag(element, parentView, null, undefined, direct);\n\n\t\t\t\tvar parent = tag.element.parentNode;\n\t\t\t\tvar sibling = tag.element.nextSibling;\n\n\t\t\t\tvar result = callback(tag);\n\n\t\t\t\tif (result !== false) {\n\t\t\t\t\telement.___cvApplied___.push(callback);\n\t\t\t\t}\n\n\t\t\t\tif (result instanceof HTMLElement) {\n\t\t\t\t\tresult = new _Tag.Tag(result);\n\t\t\t\t}\n\n\t\t\t\tif (result instanceof _Tag.Tag) {\n\t\t\t\t\tif (!result.element.contains(tag.element)) {\n\t\t\t\t\t\twhile (tag.element.firstChild) {\n\t\t\t\t\t\t\tresult.element.appendChild(tag.element.firstChild);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttag.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (sibling) {\n\t\t\t\t\t\tparent.insertBefore(result.element, sibling);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparent.appendChild(result.element);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (result && result.prototype && result.prototype instanceof _View.View) {\n\t\t\t\t\tresult = new result();\n\t\t\t\t}\n\n\t\t\t\tif (result instanceof _View.View) {\n\t\t\t\t\tif (view) {\n\t\t\t\t\t\tview.cleanup.push(function (r) {\n\t\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\t\tr.remove();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}(result));\n\n\t\t\t\t\t\tresult.parent = view;\n\n\t\t\t\t\t\tview.cleanup.push(view.args.bindTo(function (v, k, t) {\n\t\t\t\t\t\t\tt[k] = v;\n\t\t\t\t\t\t\tresult.args[k] = v;\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tview.cleanup.push(result.args.bindTo(function (v, k, t, d) {\n\t\t\t\t\t\t\tt[k] = v;\n\t\t\t\t\t\t\tview.args[k] = v;\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\n\t\t\t\t\ttag.clear();\n\t\t\t\t\tresult.render(tag.element);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn RuleSet;\n}();\n  })();\n});","\nrequire.register(\"curvature/base/Tag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n});\nexports.Tag = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Bindable = require('./Bindable');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tag = exports.Tag = function () {\n\t\tfunction Tag(element, parent, ref, index, direct) {\n\t\t\t\t_classCallCheck(this, Tag);\n\n\t\t\t\tthis.element = _Bindable.Bindable.makeBindable(element);\n\t\t\t\tthis.parent = parent;\n\t\t\t\tthis.direct = direct;\n\t\t\t\tthis.ref = ref;\n\t\t\t\tthis.index = index;\n\n\t\t\t\tthis.cleanup = [];\n\n\t\t\t\tthis.proxy = _Bindable.Bindable.makeBindable(this);\n\n\t\t\t\t// this.detachListener = (event) => {\n\t\t\t\t// \treturn;\n\n\t\t\t\t// \tif(event.target != this.element)\n\t\t\t\t// \t{\n\t\t\t\t// \t\treturn;\n\t\t\t\t// \t}\n\t\t\t\t// \tif(event.path[event.path.length -1] !== window)\n\t\t\t\t// \t{\n\t\t\t\t// \t\treturn;\n\t\t\t\t// \t}\n\n\t\t\t\t// \tthis.element.removeEventListener('cvDomDetached', this.detachListener);\n\n\t\t\t\t// \tthis.remove();\n\t\t\t\t// };\n\n\t\t\t\t// this.element.addEventListener('cvDomDetached', this.detachListener);\n\n\t\t\t\t// return this.proxy;\n\t\t}\n\n\t\t_createClass(Tag, [{\n\t\t\t\tkey: 'remove',\n\t\t\t\tvalue: function remove() {\n\t\t\t\t\t\t_Bindable.Bindable.clearBindings(this);\n\n\t\t\t\t\t\tvar cleanup = void 0;\n\n\t\t\t\t\t\twhile (cleanup = this.cleanup.shift()) {\n\t\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.clear();\n\n\t\t\t\t\t\tif (!this.element) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar detachEvent = new Event('cvDomDetached');\n\n\t\t\t\t\t\tthis.element.dispatchEvent(detachEvent);\n\t\t\t\t\t\tthis.element.remove();\n\n\t\t\t\t\t\tthis.element = this.ref = this.parent = null;\n\t\t\t\t}\n\t\t}, {\n\t\t\t\tkey: 'clear',\n\t\t\t\tvalue: function clear() {\n\t\t\t\t\t\tif (!this.element) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar detachEvent = new Event('cvDomDetached');\n\n\t\t\t\t\t\twhile (this.element.firstChild) {\n\t\t\t\t\t\t\t\tthis.element.firstChild.dispatchEvent(detachEvent);\n\t\t\t\t\t\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}, {\n\t\t\t\tkey: 'pause',\n\t\t\t\tvalue: function pause() {\n\t\t\t\t\t\tvar paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\t\t\t}\n\t\t}]);\n\n\t\treturn Tag;\n}();\n  })();\n});","\nrequire.register(\"curvature/base/View.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.View = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Bindable = require('./Bindable');\n\nvar _ViewList = require('./ViewList');\n\nvar _Router = require('./Router');\n\nvar _Cookie = require('./Cookie');\n\nvar _Dom = require('./Dom');\n\nvar _Tag = require('./Tag');\n\nvar _RuleSet = require('./RuleSet');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar View = exports.View = function () {\n\tfunction View() {\n\t\tvar args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t\t_classCallCheck(this, View);\n\n\t\tObject.defineProperty(this, '___VIEW___', {\n\t\t\tenumerable: false,\n\t\t\twritable: true\n\t\t});\n\n\t\tthis.___VIEW___ = View;\n\n\t\tthis.args = _Bindable.Bindable.makeBindable(args);\n\t\tthis._id = this.uuid();\n\t\tthis.args._id = this._id;\n\t\tthis.template = '';\n\t\tthis.document = '';\n\n\t\tthis.firstNode = null;\n\t\tthis.lastNode = null;\n\t\tthis.nodes = null;\n\n\t\tthis.cleanup = [];\n\n\t\tthis.attach = [];\n\t\tthis.detach = [];\n\n\t\tthis.eventCleanup = [];\n\n\t\tthis.parent = null;\n\t\tthis.viewList = null;\n\t\tthis.viewLists = {};\n\n\t\tthis.withViews = {};\n\n\t\tthis.tags = {};\n\n\t\tthis.intervals = [];\n\t\tthis.timeouts = [];\n\t\tthis.frames = [];\n\n\t\tthis.ruleSet = new _RuleSet.RuleSet();\n\t\tthis.preRuleSet = new _RuleSet.RuleSet();\n\t\tthis.subBindings = {};\n\n\t\tthis.removed = false;\n\t\tthis.preserve = false;\n\n\t\tthis.interpolateRegex = /(\\[\\[((?:\\$)?[\\w\\.]+)\\]\\])/g;\n\t}\n\n\t_createClass(View, [{\n\t\tkey: 'onFrame',\n\t\tvalue: function onFrame(callback) {\n\t\t\tvar c = function c(timestamp) {\n\t\t\t\tcallback(timestamp);\n\t\t\t\twindow.requestAnimationFrame(c);\n\t\t\t};\n\n\t\t\tc();\n\t\t}\n\t}, {\n\t\tkey: 'onTimeout',\n\t\tvalue: function onTimeout(time, callback) {\n\t\t\tvar _this = this;\n\n\t\t\tvar wrappedCallback = function wrappedCallback() {\n\t\t\t\t_this.timeouts[index].fired = true;\n\t\t\t\t_this.timeouts[index].callback = null;\n\t\t\t\tcallback();\n\t\t\t};\n\t\t\tvar timeout = setTimeout(wrappedCallback, time);\n\t\t\tvar index = this.timeouts.length;\n\n\t\t\tthis.timeouts.push({\n\t\t\t\ttimeout: timeout,\n\t\t\t\tcallback: wrappedCallback,\n\t\t\t\ttime: time,\n\t\t\t\tfired: false,\n\t\t\t\tcreated: new Date().getTime(),\n\t\t\t\tpaused: false\n\t\t\t});\n\n\t\t\treturn timeout;\n\t\t}\n\t}, {\n\t\tkey: 'clearTimeout',\n\t\tvalue: function clearTimeout(timeout) {\n\t\t\tfor (var i in this.timeouts) {\n\t\t\t\tif (timeout === this.timeouts[i].timeout) {\n\t\t\t\t\tclearInterval(this.timeouts[i].timeout);\n\n\t\t\t\t\tdelete this.timeouts[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'onInterval',\n\t\tvalue: function onInterval(time, callback) {\n\t\t\tvar timeout = setInterval(callback, time);\n\n\t\t\tthis.intervals.push({\n\t\t\t\ttimeout: timeout,\n\t\t\t\tcallback: callback,\n\t\t\t\ttime: time,\n\t\t\t\tpaused: false\n\t\t\t});\n\n\t\t\treturn timeout;\n\t\t}\n\t}, {\n\t\tkey: 'clearInterval',\n\t\tvalue: function (_clearInterval) {\n\t\t\tfunction clearInterval(_x) {\n\t\t\t\treturn _clearInterval.apply(this, arguments);\n\t\t\t}\n\n\t\t\tclearInterval.toString = function () {\n\t\t\t\treturn _clearInterval.toString();\n\t\t\t};\n\n\t\t\treturn clearInterval;\n\t\t}(function (timeout) {\n\t\t\tfor (var i in this.intervals) {\n\t\t\t\tif (timeout === this.intervals[i].timeout) {\n\t\t\t\t\tclearInterval(this.intervals[i].timeout);\n\n\t\t\t\t\tdelete this.intervals[i];\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}, {\n\t\tkey: 'pause',\n\t\tvalue: function pause() {\n\t\t\tvar paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\t\tif (paused === undefined) {\n\t\t\t\tthis.paused = !this.paused;\n\t\t\t}\n\n\t\t\tthis.paused = paused;\n\n\t\t\tif (this.paused) {\n\t\t\t\tfor (var i in this.timeouts) {\n\t\t\t\t\tif (this.timeouts[i].fired) {\n\t\t\t\t\t\tdelete this.timeouts[i];\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tclearTimeout(this.timeouts[i].timeout);\n\t\t\t\t}\n\n\t\t\t\tfor (var _i in this.intervals) {\n\t\t\t\t\tclearInterval(this.intervals[_i].timeout);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var _i2 in this.timeouts) {\n\t\t\t\t\tif (!this.timeouts[_i2].timeout.paused) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.timeouts[_i2].fired) {\n\t\t\t\t\t\tdelete this.timeouts[_i2];\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.timeouts[_i2].timeout = setTimeout(this.timeouts[_i2].callback, this.timeouts[_i2].time);\n\t\t\t\t}\n\n\t\t\t\tfor (var _i3 in this.intervals) {\n\t\t\t\t\tif (!this.intervals[_i3].timeout.paused) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.intervals[_i3].timeout.paused = false;\n\n\t\t\t\t\tthis.intervals[_i3].timeout = setInterval(this.intervals[_i3].callback, this.intervals[_i3].time);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var _i4 in this.viewLists) {\n\t\t\t\tif (!this.viewLists[_i4]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.viewLists[_i4].pause(!!paused);\n\t\t\t}\n\n\t\t\tfor (var _i5 in this.tags) {\n\t\t\t\tif (Array.isArray(this.tags[_i5])) {\n\t\t\t\t\tfor (var j in this.tags[_i5]) {\n\t\t\t\t\t\tthis.tags[_i5][j].pause(!!paused);\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.tags[_i5].pause(!!paused);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar parentNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\t\tvar insertPoint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\t\tif (insertPoint instanceof View) {\n\t\t\t\tinsertPoint = insertPoint.firstNode;\n\t\t\t}\n\n\t\t\tif (this.nodes) {\n\t\t\t\tfor (var i in this.detach) {\n\t\t\t\t\tthis.detach[i]();\n\t\t\t\t}\n\n\t\t\t\tvar _loop = function _loop(_i6) {\n\t\t\t\t\tvar detachEvent = new Event('cvDomDetached', { bubbles: true, target: _this2.nodes[_i6] });\n\t\t\t\t\tvar attachEvent = new Event('cvDomAttached', { bubbles: true, target: _this2.nodes[_i6] });\n\n\t\t\t\t\t_this2.nodes[_i6].dispatchEvent(detachEvent);\n\n\t\t\t\t\t_Dom.Dom.mapTags(_this2.nodes[_i6], false, function (node) {\n\t\t\t\t\t\tnode.dispatchEvent(detachEvent);\n\t\t\t\t\t});\n\n\t\t\t\t\tif (parentNode) {\n\t\t\t\t\t\tif (insertPoint) {\n\t\t\t\t\t\t\tparentNode.insertBefore(_this2.nodes[_i6], insertPoint);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparentNode.appendChild(_this2.nodes[_i6]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t_Dom.Dom.mapTags(_this2.nodes[_i6], false, function (node) {\n\t\t\t\t\t\tnode.dispatchEvent(attachEvent);\n\t\t\t\t\t});\n\n\t\t\t\t\t_this2.nodes[_i6].dispatchEvent(attachEvent);\n\t\t\t\t};\n\n\t\t\t\tfor (var _i6 in this.nodes) {\n\t\t\t\t\t_loop(_i6);\n\t\t\t\t}\n\n\t\t\t\tfor (var _i7 in this.attach) {\n\t\t\t\t\tthis.attach[_i7]();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar subDoc = void 0;\n\n\t\t\tif (this.template == document) {\n\t\t\t\tsubDoc = this.template;\n\t\t\t} else if (this.document) {\n\t\t\t\tsubDoc = this.document;\n\t\t\t} else {\n\t\t\t\tsubDoc = document.createRange().createContextualFragment(this.template);\n\n\t\t\t\tthis.document = subDoc;\n\t\t\t}\n\n\t\t\tthis.preRuleSet.apply(subDoc, this);\n\n\t\t\t_Dom.Dom.mapTags(subDoc, false, function (tag) {\n\t\t\t\tif (tag.matches) {\n\t\t\t\t\ttag.matches('[cv-each]') && _this2.mapEachTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-with]') && _this2.mapWithTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-prerender]') && _this2.mapPrendererTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-link]') && _this2.mapLinkTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-bind]') && _this2.mapBindTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-attr]') && _this2.mapAttrTags(tag);\n\n\t\t\t\t\t_this2.mapInterpolatableTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-expand]') && _this2.mapExpandableTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-if]') && _this2.mapIfTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-ref]') && _this2.mapRefTags(tag);\n\n\t\t\t\t\ttag.matches('[cv-on]') && _this2.mapOnTags(tag);\n\t\t\t\t} else {\n\t\t\t\t\t_this2.mapInterpolatableTags(tag);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.ruleSet.apply(subDoc, this);\n\n\t\t\tthis.nodes = [];\n\n\t\t\tif (window['devmode'] === true) {\n\t\t\t\tthis.firstNode = document.createComment('Template ' + this._id + ' Start');\n\t\t\t} else {\n\t\t\t\tthis.firstNode = document.createTextNode('');\n\t\t\t}\n\n\t\t\tthis.nodes.push(this.firstNode);\n\n\t\t\tif (parentNode) {\n\t\t\t\tif (insertPoint) {\n\t\t\t\t\tparentNode.insertBefore(this.firstNode, insertPoint);\n\t\t\t\t} else {\n\t\t\t\t\tparentNode.appendChild(this.firstNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar _loop2 = function _loop2() {\n\t\t\t\tvar newNode = subDoc.firstChild;\n\t\t\t\tvar attachEvent = new Event('cvDomAttached', { bubbles: true, target: newNode });\n\n\t\t\t\t_this2.nodes.push(newNode);\n\n\t\t\t\tif (parentNode) {\n\t\t\t\t\tif (insertPoint) {\n\t\t\t\t\t\tparentNode.insertBefore(newNode, insertPoint);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparentNode.appendChild(newNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_Dom.Dom.mapTags(newNode, false, function (node) {\n\t\t\t\t\tnode.dispatchEvent(attachEvent);\n\t\t\t\t});\n\n\t\t\t\tnewNode.dispatchEvent(attachEvent);\n\t\t\t};\n\n\t\t\twhile (subDoc.firstChild) {\n\t\t\t\t_loop2();\n\t\t\t}\n\n\t\t\tif (window['devmode'] === true) {\n\t\t\t\tthis.lastNode = document.createComment('Template ' + this._id + ' End');\n\t\t\t} else {\n\t\t\t\tthis.lastNode = document.createTextNode('');\n\t\t\t}\n\n\t\t\tthis.nodes.push(this.lastNode);\n\n\t\t\tif (parentNode) {\n\t\t\t\tif (insertPoint) {\n\t\t\t\t\tparentNode.insertBefore(this.lastNode, insertPoint);\n\t\t\t\t} else {\n\t\t\t\t\tparentNode.appendChild(this.lastNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var _i8 in this.attach) {\n\t\t\t\tthis.attach[_i8]();\n\t\t\t}\n\n\t\t\tthis.postRender(parentNode);\n\n\t\t\t// return this.nodes;\n\t\t}\n\t}, {\n\t\tkey: 'mapExpandableTags',\n\t\tvalue: function mapExpandableTags(tag) {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar expandProperty = tag.getAttribute('cv-expand');\n\t\t\tvar expandArg = _Bindable.Bindable.makeBindable(this.args[expandProperty] || {});\n\n\t\t\ttag.removeAttribute('cv-expand');\n\n\t\t\tvar _loop3 = function _loop3(i) {\n\t\t\t\tif (i == 'name' || i == 'type') {\n\t\t\t\t\treturn 'continue';\n\t\t\t\t}\n\n\t\t\t\tvar debind = expandArg.bindTo(i, function (tag, i) {\n\t\t\t\t\treturn function (v) {\n\t\t\t\t\t\ttag.setAttribute(i, v);\n\t\t\t\t\t};\n\t\t\t\t}(tag, i));\n\n\t\t\t\t_this3.cleanup.push(function () {\n\t\t\t\t\tdebind();\n\t\t\t\t\tif (expandArg.isBound()) {\n\t\t\t\t\t\t_Bindable.Bindable.clearBindings(expandArg);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tfor (var i in expandArg) {\n\t\t\t\tvar _ret3 = _loop3(i);\n\n\t\t\t\tif (_ret3 === 'continue') continue;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'mapAttrTags',\n\t\tvalue: function mapAttrTags(tag) {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar attrProperty = tag.getAttribute('cv-attr');\n\n\t\t\ttag.removeAttribute('cv-attr');\n\n\t\t\tvar pairs = attrProperty.split(',');\n\t\t\tvar attrs = pairs.map(function (p) {\n\t\t\t\treturn p.split(':');\n\t\t\t});\n\n\t\t\tvar _loop4 = function _loop4(i) {\n\t\t\t\tvar proxy = _this4.args;\n\t\t\t\tvar bindProperty = attrs[i][1];\n\t\t\t\tvar property = bindProperty;\n\n\t\t\t\tif (bindProperty.match(/\\./)) {\n\t\t\t\t\tvar _Bindable$resolve = _Bindable.Bindable.resolve(_this4.args, bindProperty, true);\n\n\t\t\t\t\tvar _Bindable$resolve2 = _slicedToArray(_Bindable$resolve, 2);\n\n\t\t\t\t\tproxy = _Bindable$resolve2[0];\n\t\t\t\t\tproperty = _Bindable$resolve2[1];\n\t\t\t\t}\n\n\t\t\t\tif (proxy[attrs[i][1]]) {\n\t\t\t\t\ttag.setAttribute(attrs[i][0], proxy[attrs[i][1]]);\n\t\t\t\t}\n\n\t\t\t\tvar attrib = attrs[i][0];\n\n\t\t\t\t_this4.cleanup.push(proxy.bindTo(property, function (v) {\n\t\t\t\t\tif (v == null) {\n\t\t\t\t\t\ttag.setAttribute(attrib, '');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttag.setAttribute(attrib, v);\n\t\t\t\t}));\n\t\t\t};\n\n\t\t\tfor (var i in attrs) {\n\t\t\t\t_loop4(i);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'mapInterpolatableTags',\n\t\tvalue: function mapInterpolatableTags(tag) {\n\t\t\tvar _this5 = this;\n\n\t\t\tvar regex = this.interpolateRegex;\n\n\t\t\tif (tag.nodeType == Node.TEXT_NODE) {\n\t\t\t\tvar original = tag.nodeValue;\n\n\t\t\t\tif (!this.interpolatable(original)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar header = 0;\n\t\t\t\tvar match = void 0;\n\n\t\t\t\tvar _loop5 = function _loop5() {\n\t\t\t\t\tvar bindProperty = match[2];\n\n\t\t\t\t\tvar unsafeHtml = false;\n\n\t\t\t\t\tif (bindProperty.substr(0, 1) === '$') {\n\t\t\t\t\t\tunsafeHtml = true;\n\t\t\t\t\t\tbindProperty = bindProperty.substr(1);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (bindProperty.substr(0, 3) === '000') {\n\t\t\t\t\t\texpand = true;\n\t\t\t\t\t\tbindProperty = bindProperty.substr(3);\n\n\t\t\t\t\t\treturn 'continue';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar staticPrefix = original.substring(header, match.index);\n\n\t\t\t\t\theader = match.index + match[1].length;\n\n\t\t\t\t\tvar staticNode = document.createTextNode(staticPrefix);\n\n\t\t\t\t\ttag.parentNode.insertBefore(staticNode, tag);\n\n\t\t\t\t\tvar dynamicNode = void 0;\n\n\t\t\t\t\tif (unsafeHtml) {\n\t\t\t\t\t\tdynamicNode = document.createElement('div');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdynamicNode = document.createTextNode('');\n\t\t\t\t\t}\n\n\t\t\t\t\tvar proxy = _this5.args;\n\t\t\t\t\tvar property = bindProperty;\n\n\t\t\t\t\tif (bindProperty.match(/\\./)) {\n\t\t\t\t\t\tvar _Bindable$resolve3 = _Bindable.Bindable.resolve(_this5.args, bindProperty, true);\n\n\t\t\t\t\t\tvar _Bindable$resolve4 = _slicedToArray(_Bindable$resolve3, 2);\n\n\t\t\t\t\t\tproxy = _Bindable$resolve4[0];\n\t\t\t\t\t\tproperty = _Bindable$resolve4[1];\n\t\t\t\t\t}\n\n\t\t\t\t\ttag.parentNode.insertBefore(dynamicNode, tag);\n\n\t\t\t\t\tvar debind = proxy.bindTo(property, function (dynamicNode, unsafeHtml) {\n\t\t\t\t\t\treturn function (v, k, t) {\n\t\t\t\t\t\t\tif (t[k] instanceof View && t[k] !== v) {\n\t\t\t\t\t\t\t\tif (!t[k].preserve) {\n\t\t\t\t\t\t\t\t\tt[k].remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdynamicNode.nodeValue = '';\n\n\t\t\t\t\t\t\tif (v instanceof View) {\n\t\t\t\t\t\t\t\tv.render(tag.parentNode, dynamicNode);\n\n\t\t\t\t\t\t\t\t_this5.cleanup.push(function () {\n\t\t\t\t\t\t\t\t\tif (!v.preserve) {\n\t\t\t\t\t\t\t\t\t\tv.remove();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (v instanceof Object && v.__toString instanceof Function) {\n\t\t\t\t\t\t\t\t\tv = v.__toString();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (unsafeHtml) {\n\t\t\t\t\t\t\t\t\tdynamicNode.innerHTML = v;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdynamicNode.nodeValue = v;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}(dynamicNode, unsafeHtml));\n\n\t\t\t\t\t_this5.cleanup.push(function () {\n\t\t\t\t\t\tdebind();\n\t\t\t\t\t\tif (!proxy.isBound()) {\n\t\t\t\t\t\t\t_Bindable.Bindable.clearBindings(proxy);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\twhile (match = regex.exec(original)) {\n\t\t\t\t\tvar _ret5 = _loop5();\n\n\t\t\t\t\tif (_ret5 === 'continue') continue;\n\t\t\t\t}\n\n\t\t\t\tvar staticSuffix = original.substring(header);\n\n\t\t\t\tvar staticNode = document.createTextNode(staticSuffix);\n\n\t\t\t\ttag.parentNode.insertBefore(staticNode, tag);\n\n\t\t\t\ttag.nodeValue = '';\n\t\t\t}\n\n\t\t\tif (tag.nodeType == Node.ELEMENT_NODE) {\n\t\t\t\tvar _loop6 = function _loop6(i) {\n\t\t\t\t\tif (!_this5.interpolatable(tag.attributes[i].value)) {\n\t\t\t\t\t\treturn 'continue';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar header = 0;\n\t\t\t\t\tvar match = void 0;\n\t\t\t\t\tvar original = tag.attributes[i].value;\n\t\t\t\t\tvar attribute = tag.attributes[i];\n\n\t\t\t\t\tvar bindProperties = {};\n\t\t\t\t\tvar segments = [];\n\n\t\t\t\t\twhile (match = regex.exec(original)) {\n\t\t\t\t\t\tsegments.push(original.substring(header, match.index));\n\n\t\t\t\t\t\tif (!bindProperties[match[2]]) {\n\t\t\t\t\t\t\tbindProperties[match[2]] = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbindProperties[match[2]].push(segments.length);\n\n\t\t\t\t\t\tsegments.push(match[1]);\n\n\t\t\t\t\t\theader = match.index + match[1].length;\n\t\t\t\t\t}\n\n\t\t\t\t\tsegments.push(original.substring(header));\n\n\t\t\t\t\tvar _loop7 = function _loop7(j) {\n\t\t\t\t\t\tvar proxy = _this5.args;\n\t\t\t\t\t\tvar property = j;\n\n\t\t\t\t\t\tif (j.match(/\\./)) {\n\t\t\t\t\t\t\tvar _Bindable$resolve5 = _Bindable.Bindable.resolve(_this5.args, j, true);\n\n\t\t\t\t\t\t\tvar _Bindable$resolve6 = _slicedToArray(_Bindable$resolve5, 2);\n\n\t\t\t\t\t\t\tproxy = _Bindable$resolve6[0];\n\t\t\t\t\t\t\tproperty = _Bindable$resolve6[1];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar longProperty = j;\n\n\t\t\t\t\t\tvar debind = proxy.bindTo(property, function (v, k, t, d) {\n\t\t\t\t\t\t\tfor (var _i9 in bindProperties) {\n\t\t\t\t\t\t\t\tfor (var _j in bindProperties[longProperty]) {\n\t\t\t\t\t\t\t\t\tsegments[bindProperties[longProperty][_j]] = t[_i9];\n\n\t\t\t\t\t\t\t\t\tif (k === property) {\n\t\t\t\t\t\t\t\t\t\tsegments[bindProperties[longProperty][_j]] = v;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttag.setAttribute(attribute.name, segments.join(''));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t_this5.cleanup.push(function () {\n\t\t\t\t\t\t\tdebind();\n\t\t\t\t\t\t\tif (!proxy.isBound()) {\n\t\t\t\t\t\t\t\t_Bindable.Bindable.clearBindings(proxy);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\tfor (var j in bindProperties) {\n\t\t\t\t\t\t_loop7(j);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfor (var i = 0; i < tag.attributes.length; i++) {\n\t\t\t\t\tvar _ret6 = _loop6(i);\n\n\t\t\t\t\tif (_ret6 === 'continue') continue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'mapRefTags',\n\t\tvalue: function mapRefTags(tag) {\n\t\t\tvar refAttr = tag.getAttribute('cv-ref');\n\n\t\t\tvar _refAttr$split = refAttr.split(':'),\n\t\t\t    _refAttr$split2 = _slicedToArray(_refAttr$split, 3),\n\t\t\t    refProp = _refAttr$split2[0],\n\t\t\t    refClassname = _refAttr$split2[1],\n\t\t\t    refKey = _refAttr$split2[2];\n\n\t\t\tvar refClass = this.stringToClass(refClassname);\n\n\t\t\ttag.removeAttribute('cv-ref');\n\n\t\t\tObject.defineProperty(tag, '___tag___', {\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: true\n\t\t\t});\n\n\t\t\tthis.cleanup.push(function () {\n\t\t\t\ttag.___tag___ = null;\n\t\t\t\ttag.remove();\n\t\t\t});\n\n\t\t\tvar parent = this;\n\t\t\tvar direct = this;\n\n\t\t\tif (this.viewList) {\n\t\t\t\tparent = this.viewList.parent;\n\t\t\t\t// if(!this.viewList.parent.tags[refProp])\n\t\t\t\t// {\n\t\t\t\t// \tthis.viewList.parent.tags[refProp] = [];\n\t\t\t\t// }\n\n\t\t\t\t// let refKeyVal = this.args[refKey];\n\n\t\t\t\t// this.viewList.parent.tags[refProp][refKeyVal] = new refClass(\n\t\t\t\t// \ttag, this, refProp, refKeyVal\n\t\t\t\t// );\n\t\t\t} else {\n\t\t\t\t\t// this.tags[refProp] = new refClass(\n\t\t\t\t\t// \ttag, this, refProp\n\t\t\t\t\t// );\n\t\t\t\t}\n\n\t\t\tvar tagObject = new refClass(tag, this, refProp, undefined, direct);\n\n\t\t\ttag.___tag___ = tagObject;\n\n\t\t\twhile (parent) {\n\t\t\t\tif (!parent.parent) {}\n\n\t\t\t\tvar refKeyVal = this.args[refKey];\n\n\t\t\t\tif (refKeyVal !== undefined) {\n\t\t\t\t\tif (!parent.tags[refProp]) {\n\t\t\t\t\t\tparent.tags[refProp] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tparent.tags[refProp][refKeyVal] = tagObject;\n\t\t\t\t} else {\n\t\t\t\t\tparent.tags[refProp] = tagObject;\n\t\t\t\t}\n\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'mapBindTags',\n\t\tvalue: function mapBindTags(tag) {\n\t\t\tvar _this6 = this;\n\n\t\t\tvar bindArg = tag.getAttribute('cv-bind');\n\t\t\tvar proxy = this.args;\n\t\t\tvar property = bindArg;\n\t\t\tvar top = null;\n\n\t\t\tif (bindArg.match(/\\./)) {\n\t\t\t\tvar _Bindable$resolve7 = _Bindable.Bindable.resolve(this.args, bindArg, true);\n\n\t\t\t\tvar _Bindable$resolve8 = _slicedToArray(_Bindable$resolve7, 3);\n\n\t\t\t\tproxy = _Bindable$resolve8[0];\n\t\t\t\tproperty = _Bindable$resolve8[1];\n\t\t\t\ttop = _Bindable$resolve8[2];\n\t\t\t}\n\n\t\t\tif (proxy !== this.args) {\n\t\t\t\tthis.subBindings[bindArg] = this.subBindings[bindArg] || [];\n\n\t\t\t\tthis.cleanup.push(this.args.bindTo(top, function () {\n\t\t\t\t\twhile (_this6.subBindings.length) {\n\t\t\t\t\t\tconsole.log('HERE!');\n\t\t\t\t\t\t_this6.subBindings.shift()();\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tvar debind = proxy.bindTo(property, function (v, k, t, d, p) {\n\n\t\t\t\tif (p instanceof View && p !== v) {\n\t\t\t\t\tp.remove();\n\t\t\t\t}\n\n\t\t\t\tif (tag.tagName == 'INPUT' || tag.tagName == 'SELECT' || tag.tagName == 'TEXTAREA') {\n\t\t\t\t\tvar type = tag.getAttribute('type');\n\t\t\t\t\tif (type && type.toLowerCase() == 'checkbox') {\n\t\t\t\t\t\ttag.checked = !!v;\n\t\t\t\t\t} else if (type && type.toLowerCase() == 'radio') {\n\t\t\t\t\t\ttag.checked = v == tag.value;\n\t\t\t\t\t} else if (type !== 'file') {\n\t\t\t\t\t\tif (tag.tagName == 'SELECT') {\n\t\t\t\t\t\t\t// console.log(k, v, tag.outerHTML, tag.options.length);\n\t\t\t\t\t\t\tfor (var i in tag.options) {\n\t\t\t\t\t\t\t\tvar option = tag.options[i];\n\n\t\t\t\t\t\t\t\tif (option.value == v) {\n\t\t\t\t\t\t\t\t\ttag.selectedIndex = i;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttag.value = v == null ? '' : v;\n\t\t\t\t\t} else if (type === 'file') {\n\t\t\t\t\t\t// console.log(v);\t\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (v instanceof View) {\n\t\t\t\t\tv.render(tag);\n\t\t\t\t} else {\n\t\t\t\t\ttag.innerText = v;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (proxy !== this.args) {\n\t\t\t\tthis.subBindings[bindArg].push(debind);\n\t\t\t}\n\n\t\t\tthis.cleanup.push(debind);\n\n\t\t\tvar inputListener = function inputListener(event) {\n\t\t\t\tif (event.target !== tag) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar type = tag.getAttribute('type');\n\t\t\t\tvar multi = tag.getAttribute('multiple');\n\t\t\t\tif (type && type.toLowerCase() == 'checkbox') {\n\t\t\t\t\tif (tag.checked) {\n\t\t\t\t\t\tproxy[property] = event.target.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tproxy[property] = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (type !== 'file') {\n\t\t\t\t\tproxy[property] = event.target.value;\n\t\t\t\t} else if (type == 'file' && multi) {\n\t\t\t\t\tproxy[property] = Array.from(event.target.files);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttag.addEventListener('input', inputListener);\n\t\t\ttag.addEventListener('change', inputListener);\n\t\t\ttag.addEventListener('value-changed', inputListener);\n\n\t\t\tthis.cleanup.push(function (tag, eventListener) {\n\t\t\t\treturn function () {\n\t\t\t\t\ttag.removeEventListener('input', inputListener);\n\t\t\t\t\ttag.removeEventListener('change', inputListener);\n\t\t\t\t\ttag.removeEventListener('value-changed', inputListener);\n\t\t\t\t\ttag = undefined;\n\t\t\t\t\teventListener = undefined;\n\t\t\t\t};\n\t\t\t}(tag, inputListener));\n\n\t\t\ttag.removeAttribute('cv-bind');\n\t\t}\n\t}, {\n\t\tkey: 'mapOnTags',\n\t\tvalue: function mapOnTags(tag) {\n\t\t\tvar _this7 = this;\n\n\t\t\tvar action = String(tag.getAttribute('cv-on')).split(/;/).map(function (a) {\n\t\t\t\treturn a.split(':');\n\t\t\t}).map(function (object, tag) {\n\t\t\t\treturn function (a) {\n\t\t\t\t\tvar eventName = a[0].replace(/(^[\\s\\n]+|[\\s\\n]+$)/, '');\n\t\t\t\t\tvar callbackName = a[1];\n\t\t\t\t\tvar argList = [];\n\t\t\t\t\tvar groups = /(\\w+)(?:\\(([$\\w\\s'\",]+)\\))?/.exec(callbackName);\n\t\t\t\t\tif (groups.length) {\n\t\t\t\t\t\tcallbackName = groups[1].replace(/(^[\\s\\n]+|[\\s\\n]+$)/, '');\n\t\t\t\t\t\tif (groups[2]) {\n\t\t\t\t\t\t\targList = groups[2].split(',').map(function (s) {\n\t\t\t\t\t\t\t\treturn s.trim();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar eventMethod = void 0;\n\t\t\t\t\tvar parent = _this7;\n\n\t\t\t\t\twhile (parent) {\n\t\t\t\t\t\tif (typeof parent[callbackName] == 'function') {\n\t\t\t\t\t\t\tvar _ret8 = function () {\n\t\t\t\t\t\t\t\tvar _parent = parent;\n\t\t\t\t\t\t\t\tvar _callBackName = callbackName;\n\t\t\t\t\t\t\t\teventMethod = function eventMethod() {\n\t\t\t\t\t\t\t\t\t_parent[_callBackName].apply(_parent, arguments);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\treturn 'break';\n\t\t\t\t\t\t\t}();\n\n\t\t\t\t\t\t\tif (_ret8 === 'break') break;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (parent.viewList && parent.viewList.parent) {\n\t\t\t\t\t\t\tparent = parent.viewList.parent;\n\t\t\t\t\t\t} else if (parent.parent) {\n\t\t\t\t\t\t\tparent = parent.parent;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar eventListener = function (object, parent, eventMethod, tag) {\n\t\t\t\t\t\treturn function (event) {\n\t\t\t\t\t\t\tvar argRefs = argList.map(function (arg) {\n\t\t\t\t\t\t\t\tvar match = void 0;\n\t\t\t\t\t\t\t\tif (parseInt(arg) == arg) {\n\t\t\t\t\t\t\t\t\treturn arg;\n\t\t\t\t\t\t\t\t} else if (arg === 'event' || arg === '$event') {\n\t\t\t\t\t\t\t\t\treturn event;\n\t\t\t\t\t\t\t\t} else if (arg === '$view') {\n\t\t\t\t\t\t\t\t\treturn parent;\n\t\t\t\t\t\t\t\t} else if (arg === '$tag') {\n\t\t\t\t\t\t\t\t\treturn tag;\n\t\t\t\t\t\t\t\t} else if (arg === '$parent') {\n\t\t\t\t\t\t\t\t\treturn _this7.parent;\n\t\t\t\t\t\t\t\t} else if (arg === '$subview') {\n\t\t\t\t\t\t\t\t\treturn _this7;\n\t\t\t\t\t\t\t\t} else if (arg in _this7.args) {\n\t\t\t\t\t\t\t\t\treturn _this7.args[arg];\n\t\t\t\t\t\t\t\t} else if (match = /^['\"](\\w+?)[\"']$/.exec(arg)) {\n\t\t\t\t\t\t\t\t\treturn match[1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!(typeof eventMethod == 'function')) {\n\t\t\t\t\t\t\t\tthrow new Error(callbackName + ' is not defined on View object.\\n\\nTag:\\n\\n' + tag.outerHTML);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\teventMethod.apply(undefined, _toConsumableArray(argRefs));\n\t\t\t\t\t\t};\n\t\t\t\t\t}(object, parent, eventMethod, tag);\n\n\t\t\t\t\tswitch (eventName) {\n\t\t\t\t\t\tcase '_init':\n\t\t\t\t\t\t\teventListener();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase '_attach':\n\t\t\t\t\t\t\t_this7.attach.push(eventListener);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase '_detach':\n\t\t\t\t\t\t\t_this7.detach.push(eventListener);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\ttag.addEventListener(eventName, eventListener);\n\n\t\t\t\t\t\t\t_this7.cleanup.push(function () {\n\t\t\t\t\t\t\t\ttag.removeEventListener(eventName, eventListener);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [eventName, callbackName, argList];\n\t\t\t\t};\n\t\t\t}(this, tag));\n\n\t\t\ttag.removeAttribute('cv-on');\n\t\t}\n\t}, {\n\t\tkey: 'mapLinkTags',\n\t\tvalue: function mapLinkTags(tag) {\n\t\t\tvar linkAttr = tag.getAttribute('cv-link');\n\n\t\t\ttag.setAttribute('href', linkAttr);\n\n\t\t\tvar linkClick = function linkClick(event) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif (linkAttr.substring(0, 4) == 'http' || linkAttr.substring(0, 2) == '//') {\n\t\t\t\t\twindow.open(tag.getAttribute('href', linkAttr));\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t_Router.Router.go(tag.getAttribute('href'));\n\t\t\t};\n\n\t\t\ttag.addEventListener('click', linkClick);\n\n\t\t\tthis.cleanup.push(function (tag, eventListener) {\n\t\t\t\treturn function () {\n\t\t\t\t\ttag.removeEventListener('click', eventListener);\n\t\t\t\t\ttag = undefined;\n\t\t\t\t\teventListener = undefined;\n\t\t\t\t};\n\t\t\t}(tag, linkClick));\n\n\t\t\ttag.removeAttribute('cv-link');\n\t\t}\n\t}, {\n\t\tkey: 'mapPrendererTags',\n\t\tvalue: function mapPrendererTags(tag) {\n\t\t\tvar prerenderAttr = tag.getAttribute('cv-prerender');\n\t\t\tvar prerendering = window.prerenderer;\n\n\t\t\tif (prerenderAttr == 'never' && prerendering || prerenderAttr == 'only' && !prerendering) {\n\t\t\t\ttag.parentNode.removeChild(tag);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'mapWithTags',\n\t\tvalue: function mapWithTags(tag) {\n\t\t\tvar _this8 = this;\n\n\t\t\tvar withAttr = tag.getAttribute('cv-with');\n\t\t\tvar carryAttr = tag.getAttribute('cv-carry');\n\t\t\ttag.removeAttribute('cv-with');\n\t\t\ttag.removeAttribute('cv-carry');\n\n\t\t\tvar subTemplate = tag.innerHTML;\n\n\t\t\tvar carryProps = [];\n\n\t\t\tif (carryAttr) {\n\t\t\t\tcarryProps = carryAttr.split(',').map(function (s) {\n\t\t\t\t\treturn s.trim();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar debind = this.args.bindTo(withAttr, function (v, k, t, d) {\n\t\t\t\tif (_this8.withViews[k]) {\n\t\t\t\t\t_this8.withViews[k].remove();\n\t\t\t\t}\n\n\t\t\t\twhile (tag.firstChild) {\n\t\t\t\t\ttag.removeChild(tag.firstChild);\n\t\t\t\t}\n\n\t\t\t\tvar view = new View();\n\n\t\t\t\t_this8.cleanup.push(function (view) {\n\t\t\t\t\treturn function () {\n\t\t\t\t\t\tview.remove();\n\t\t\t\t\t};\n\t\t\t\t}(view));\n\n\t\t\t\tview.template = subTemplate;\n\t\t\t\tview.parent = _this8;\n\n\t\t\t\tvar _loop8 = function _loop8(i) {\n\t\t\t\t\tvar debind = _this8.args.bindTo(carryProps[i], function (v, k) {\n\t\t\t\t\t\tview.args[k] = v;\n\t\t\t\t\t});\n\n\t\t\t\t\tview.cleanup.push(debind);\n\t\t\t\t\t_this8.cleanup.push(function () {\n\t\t\t\t\t\tdebind();\n\t\t\t\t\t\tview.remove();\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tfor (var i in carryProps) {\n\t\t\t\t\t_loop8(i);\n\t\t\t\t}\n\n\t\t\t\tvar _loop9 = function _loop9(i) {\n\t\t\t\t\tvar debind = v.bindTo(i, function (v, k) {\n\t\t\t\t\t\tview.args[k] = v;\n\t\t\t\t\t});\n\n\t\t\t\t\t_this8.cleanup.push(function () {\n\t\t\t\t\t\tdebind();\n\t\t\t\t\t\tif (!v.isBound()) {\n\t\t\t\t\t\t\t_Bindable.Bindable.clearBindings(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tview.remove();\n\t\t\t\t\t});\n\n\t\t\t\t\tview.cleanup.push(function () {\n\t\t\t\t\t\tdebind();\n\t\t\t\t\t\tif (!v.isBound()) {\n\t\t\t\t\t\t\t_Bindable.Bindable.clearBindings(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tfor (var i in v) {\n\t\t\t\t\t_loop9(i);\n\t\t\t\t}\n\n\t\t\t\tview.render(tag);\n\n\t\t\t\t_this8.withViews[k] = view;\n\t\t\t});\n\n\t\t\tthis.cleanup.push(debind);\n\t\t}\n\t}, {\n\t\tkey: 'mapEachTags',\n\t\tvalue: function mapEachTags(tag) {\n\t\t\tvar _this9 = this;\n\n\t\t\tvar eachAttr = tag.getAttribute('cv-each');\n\t\t\ttag.removeAttribute('cv-each');\n\n\t\t\tvar subTemplate = tag.innerHTML;\n\n\t\t\twhile (tag.firstChild) {\n\t\t\t\ttag.removeChild(tag.firstChild);\n\t\t\t}\n\n\t\t\t// let carryProps = [];\n\n\t\t\t// if(carryAttr)\n\t\t\t// {\n\t\t\t// \tcarryProps = carryAttr.split(',');\n\t\t\t// }\n\n\t\t\tvar _eachAttr$split = eachAttr.split(':'),\n\t\t\t    _eachAttr$split2 = _slicedToArray(_eachAttr$split, 3),\n\t\t\t    eachProp = _eachAttr$split2[0],\n\t\t\t    asProp = _eachAttr$split2[1],\n\t\t\t    keyProp = _eachAttr$split2[2];\n\n\t\t\tvar debind = this.args.bindTo(eachProp, function (v, k, t, d, p) {\n\t\t\t\tif (_this9.viewLists[eachProp]) {\n\t\t\t\t\t_this9.viewLists[eachProp].remove();\n\t\t\t\t}\n\n\t\t\t\tvar viewList = new _ViewList.ViewList(subTemplate, asProp, v, _this9, keyProp);\n\n\t\t\t\t_this9.cleanup.push(function () {\n\t\t\t\t\tviewList.remove();\n\t\t\t\t});\n\n\t\t\t\tvar debindA = _this9.args.bindTo(function (v, k, t, d) {\n\t\t\t\t\tif (k == '_id') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// console.log(k,v);\n\n\t\t\t\t\tif (viewList.args.subArgs[k] !== v) {\n\t\t\t\t\t\t// view.args[k] = v;\n\t\t\t\t\t\tviewList.args.subArgs[k] = v;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfor (var i in _this9.args) {\n\t\t\t\t\tif (i == '_id') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tviewList.args.subArgs[k] = _this9.args[i];\n\t\t\t\t}\n\n\t\t\t\tvar debindB = viewList.args.bindTo(function (v, k, t, d, p) {\n\t\t\t\t\tif (k == '_id' || k.substring(0, 3) === '___') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar newRef = v;\n\t\t\t\t\tvar oldRef = p; //t[k];\n\n\t\t\t\t\tif (v instanceof View) {\n\t\t\t\t\t\tnewRef = v.___ref___;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (p instanceof View) {\n\t\t\t\t\t\toldRef = p.___ref___;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (newRef !== oldRef && t[k] instanceof View) {\n\t\t\t\t\t\tt[k].remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (k in _this9.args && newRef !== oldRef) {\n\t\t\t\t\t\t_this9.args[k] = v;\n\t\t\t\t\t}\n\t\t\t\t}, { wait: 0 });\n\n\t\t\t\t// let debindC = viewList.args.subArgs.bindTo((v,k,t,d,p)=>{\n\t\t\t\t// \tif(k == '_id')\n\t\t\t\t// \t{\n\t\t\t\t// \t\treturn;\n\t\t\t\t// \t}\n\n\t\t\t\t// \tconsole.log(k,v,p,this.args[k]);\n\n\t\t\t\t// \tif(this.args[k] === v)\n\t\t\t\t// \t{\n\t\t\t\t// \t\t// return;\n\t\t\t\t// \t}\n\n\t\t\t\t// \tif(k in this.args)\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.args[k] = v;\n\t\t\t\t// \t}\n\t\t\t\t// });\n\n\t\t\t\t_this9.cleanup.push(function () {\n\t\t\t\t\tdebindA();\n\t\t\t\t\tdebindB();\n\t\t\t\t});\n\n\t\t\t\twhile (tag.firstChild) {\n\t\t\t\t\ttag.removeChild(tag.firstChild);\n\t\t\t\t}\n\n\t\t\t\t_this9.viewLists[eachProp] = viewList;\n\n\t\t\t\tviewList.render(tag);\n\t\t\t});\n\n\t\t\tthis.cleanup.push(function () {\n\t\t\t\tdebind();\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'mapIfTags',\n\t\tvalue: function mapIfTags(tag) {\n\t\t\tvar ifProperty = tag.getAttribute('cv-if');\n\n\t\t\ttag.removeAttribute('cv-if');\n\n\t\t\tvar subTemplate = tag.innerHTML;\n\n\t\t\tvar inverted = false;\n\n\t\t\tif (ifProperty.substr(0, 1) === '!') {\n\t\t\t\tinverted = true;\n\t\t\t\tifProperty = ifProperty.substr(1);\n\t\t\t}\n\n\t\t\twhile (tag.firstChild) {\n\t\t\t\ttag.removeChild(tag.firstChild);\n\t\t\t}\n\n\t\t\tvar ifDoc = document.createRange().createContextualFragment('');\n\n\t\t\tvar view = new View();\n\n\t\t\tview.template = subTemplate;\n\t\t\tview.parent = this;\n\n\t\t\tvar deBindSync = this.syncBind(view);\n\n\t\t\t// let debindA = this.args.bindTo((v,k,t,d)=>{\n\t\t\t// \tif(k == '_id')\n\t\t\t// \t{\n\t\t\t// \t\treturn;\n\t\t\t// \t}\n\n\t\t\t// \tif(view.args[k] !== v)\n\t\t\t// \t{\n\t\t\t// \t\tview.args[k] = v;\n\t\t\t// \t}\n\t\t\t// });\n\n\t\t\t// for(let i in this.args)\n\t\t\t// {\n\t\t\t// \tif(i == '_id')\n\t\t\t// \t{\n\t\t\t// \t\tcontinue;\n\t\t\t// \t}\n\n\t\t\t// \tview.args[i] = this.args[i];\n\t\t\t// }\n\n\t\t\t// let debindB = view.args.bindTo((v,k,t,d,p)=>{\n\t\t\t// \tif(k == '_id')\n\t\t\t// \t{\n\t\t\t// \t\treturn;\n\t\t\t// \t}\n\n\t\t\t// \tlet newRef = v;\n\t\t\t// \tlet oldRef = p;\n\n\t\t\t// \tif(v instanceof View)\n\t\t\t// \t{\n\t\t\t// \t\tnewRef = v.___ref___;\n\t\t\t// \t}\n\n\t\t\t// \tif(p instanceof View)\n\t\t\t// \t{\n\t\t\t// \t\toldRef = p.___ref___;\n\t\t\t// \t}\n\n\t\t\t// \tif(newRef !== oldRef && p instanceof View)\n\t\t\t// \t{\n\t\t\t// \t\tp.remove();\n\t\t\t// \t}\n\n\t\t\t// \tif((k in this.args) && newRef !== oldRef)\n\t\t\t// \t{\n\t\t\t// \t\tthis.args[k] = v;\n\t\t\t// \t}\n\t\t\t// }, {wait:0});\n\n\t\t\tvar cleaner = this;\n\n\t\t\twhile (cleaner.parent) {\n\t\t\t\tcleaner = cleaner.parent;\n\t\t\t}\n\n\t\t\tthis.cleanup.push(function () {\n\t\t\t\tdeBindSync();\n\t\t\t\t// view.remove();\n\t\t\t});\n\n\t\t\tview.render(tag);\n\n\t\t\tvar proxy = this.args;\n\t\t\tvar property = ifProperty;\n\n\t\t\tif (ifProperty.match(/\\./)) {\n\t\t\t\tvar _Bindable$resolve9 = _Bindable.Bindable.resolve(this.args, ifProperty, true);\n\n\t\t\t\tvar _Bindable$resolve10 = _slicedToArray(_Bindable$resolve9, 2);\n\n\t\t\t\tproxy = _Bindable$resolve10[0];\n\t\t\t\tproperty = _Bindable$resolve10[1];\n\t\t\t}\n\n\t\t\tvar debind = proxy.bindTo(property, function (v, k) {\n\t\t\t\tif (Array.isArray(v)) {\n\t\t\t\t\tv = !!v.length;\n\t\t\t\t}\n\n\t\t\t\tif (inverted) {\n\t\t\t\t\tv = !v;\n\t\t\t\t}\n\n\t\t\t\tif (v) {\n\t\t\t\t\tview.render(tag);\n\t\t\t\t} else {\n\t\t\t\t\twhile (tag.firstChild) {\n\t\t\t\t\t\ttag.firstChild.remove();\n\t\t\t\t\t}\n\t\t\t\t\tview.render(ifDoc);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.cleanup.push(function () {\n\t\t\t\tdebind();\n\t\t\t\tif (!proxy.isBound()) {\n\t\t\t\t\t_Bindable.Bindable.clearBindings(proxy);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// mapTemplateTags(tag)\n\t\t// {\n\t\t// \tlet subTemplate = tag.innerHTML;\n\n\t\t// \tview.template = subTemplate;\n\t\t// \tview.parent   = this;\n\n\t\t// \tlet deBindSync = this.syncBind(view);\n\n\t\t// \tlet cleaner = this;\n\n\t\t// \twhile(cleaner.parent)\n\t\t// \t{\n\t\t// \t\tcleaner = cleaner.parent;\n\t\t// \t}\n\n\t\t// \tthis.cleanup.push(()=>{\n\t\t// \t\tdeBindSync();\n\t\t// \t\t// view.remove();\n\t\t// \t});\n\n\t\t// \tview.render(tag);\n\t\t// }\n\n\t}, {\n\t\tkey: 'syncBind',\n\t\tvalue: function syncBind(subView) {\n\t\t\tvar _this10 = this;\n\n\t\t\tvar debindA = this.args.bindTo(function (v, k, t, d) {\n\t\t\t\tif (k == '_id') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (subView.args[k] !== v) {\n\t\t\t\t\tsubView.args[k] = v;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfor (var i in this.args) {\n\t\t\t\tif (i == '_id') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tsubView.args[i] = this.args[i];\n\t\t\t}\n\n\t\t\tvar debindB = subView.args.bindTo(function (v, k, t, d, p) {\n\t\t\t\tif (k == '_id') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar newRef = v;\n\t\t\t\tvar oldRef = p;\n\n\t\t\t\tif (v instanceof View) {\n\t\t\t\t\tnewRef = v.___ref___;\n\t\t\t\t}\n\n\t\t\t\tif (p instanceof View) {\n\t\t\t\t\toldRef = p.___ref___;\n\t\t\t\t}\n\n\t\t\t\tif (newRef !== oldRef && p instanceof View) {\n\t\t\t\t\tp.remove();\n\t\t\t\t}\n\n\t\t\t\tif (k in _this10.args && newRef !== oldRef) {\n\t\t\t\t\t_this10.args[k] = v;\n\t\t\t\t}\n\t\t\t}, { wait: 0 });\n\n\t\t\treturn function () {\n\t\t\t\tdebindA();\n\t\t\t\tdebindB();\n\t\t\t};\n\t\t}\n\t}, {\n\t\tkey: 'postRender',\n\t\tvalue: function postRender(parentNode) {}\n\t}, {\n\t\tkey: 'interpolatable',\n\t\tvalue: function interpolatable(str) {\n\t\t\treturn !!String(str).match(this.interpolateRegex);\n\t\t}\n\t}, {\n\t\tkey: 'uuid',\n\t\tvalue: function uuid() {\n\t\t\treturn ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n\t\t\t\treturn (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'remove',\n\t\tvalue: function remove() {\n\t\t\tvar detachEvent = new Event('cvDomDetached');\n\n\t\t\tfor (var _i10 in this.tags) {\n\t\t\t\tif (Array.isArray(this.tags[_i10])) {\n\t\t\t\t\tfor (var j in this.tags[_i10]) {\n\t\t\t\t\t\tthis.tags[_i10][j].remove();\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.tags[_i10].remove();\n\t\t\t}\n\n\t\t\tfor (var _i11 in this.nodes) {\n\t\t\t\tthis.nodes[_i11].dispatchEvent(detachEvent);\n\t\t\t\tthis.nodes[_i11].remove();\n\t\t\t}\n\n\t\t\tvar cleanup = void 0;\n\n\t\t\twhile (cleanup = this.cleanup.shift()) {\n\t\t\t\tcleanup();\n\t\t\t}\n\n\t\t\tfor (var _i12 in this.viewLists) {\n\t\t\t\tif (!this.viewLists[_i12]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.viewLists[_i12].remove();\n\t\t\t}\n\n\t\t\tthis.viewLists = [];\n\n\t\t\tfor (var _i13 in this.timeouts) {\n\t\t\t\tclearInterval(this.timeouts[_i13].timeout);\n\t\t\t\tdelete this.timeouts[_i13];\n\t\t\t}\n\n\t\t\tfor (var i in this.intervals) {\n\t\t\t\tclearInterval(this.intervals[i].timeout);\n\t\t\t\tdelete this.intervals[i];\n\t\t\t}\n\n\t\t\tthis.removed = true;\n\n\t\t\t// Bindable.clearBindings(this.args);\n\t\t}\n\t}, {\n\t\tkey: 'findTag',\n\t\tvalue: function findTag(selector) {\n\t\t\tfor (var i in this.nodes) {\n\t\t\t\tvar result = void 0;\n\n\t\t\t\tif (!this.nodes[i].querySelector) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this.nodes[i].matches(selector)) {\n\t\t\t\t\treturn this.nodes[i];\n\t\t\t\t}\n\n\t\t\t\tif (result = this.nodes[i].querySelector(selector)) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {}\n\t}, {\n\t\tkey: 'beforeUpdate',\n\t\tvalue: function beforeUpdate(args) {}\n\t}, {\n\t\tkey: 'afterUpdate',\n\t\tvalue: function afterUpdate(args) {}\n\t}, {\n\t\tkey: 'stringToClass',\n\t\tvalue: function stringToClass(refClassname) {\n\t\t\tvar refClassSplit = refClassname.split('/');\n\t\t\tvar refShortClassname = refClassSplit[refClassSplit.length - 1];\n\t\t\tvar refClass = require(refClassname);\n\n\t\t\treturn refClass[refShortClassname];\n\t\t}\n\t}], [{\n\t\tkey: 'isView',\n\t\tvalue: function isView() {\n\t\t\treturn View;\n\t\t}\n\t}]);\n\n\treturn View;\n}();\n  })();\n});","\nrequire.register(\"curvature/base/ViewList.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.ViewList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Bindable = require('./Bindable');\n\nvar _View = require('./View');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ViewList = function () {\n\tfunction ViewList(template, subProperty, list, parent) {\n\t\tvar _this = this;\n\n\t\tvar keyProperty = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n\t\t_classCallCheck(this, ViewList);\n\n\t\tthis.args = _Bindable.Bindable.makeBindable({});\n\t\tthis.args.value = _Bindable.Bindable.makeBindable(list || {});\n\t\tthis.args.subArgs = _Bindable.Bindable.makeBindable({});\n\t\tthis.views = [];\n\t\tthis.cleanup = [];\n\t\tthis.template = template;\n\t\tthis.subProperty = subProperty;\n\t\tthis.keyProperty = keyProperty;\n\t\tthis.tag = null;\n\t\tthis.paused = false;\n\t\tthis.parent = parent;\n\n\t\tthis.args.value.___before___.push(function (t) {\n\t\t\tif (t.___executing___ == 'bindTo') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_this.paused = true;\n\t\t});\n\n\t\tthis.args.value.___after___.push(function (t) {\n\t\t\tif (t.___executing___ == 'bindTo') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_this.paused = t.___stack___.length > 1;\n\n\t\t\t_this.reRender();\n\t\t});\n\n\t\tvar debind = this.args.value.bindTo(function (v, k, t, d) {\n\n\t\t\tif (_this.paused) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (d) {\n\t\t\t\tif (_this.views[k]) {\n\t\t\t\t\t_this.views[k].remove();\n\t\t\t\t}\n\n\t\t\t\t_this.views.splice(k, 1);\n\n\t\t\t\tfor (var i in _this.views) {\n\t\t\t\t\t_this.views[i].args[_this.keyProperty] = i;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!_this.views[k]) {\n\t\t\t\t_this.reRender();\n\t\t\t}\n\t\t}, { wait: 0 });\n\n\t\tthis.cleanup.push(debind);\n\t}\n\n\t_createClass(ViewList, [{\n\t\tkey: 'render',\n\t\tvalue: function render(tag) {\n\t\t\tfor (var i in this.views) {\n\t\t\t\tthis.views[i].render(tag);\n\t\t\t}\n\n\t\t\tthis.tag = tag;\n\t\t}\n\t}, {\n\t\tkey: 'reRender',\n\t\tvalue: function reRender() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (this.paused || !this.tag) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar views = [];\n\n\t\t\tfor (var i in this.views) {\n\t\t\t\tviews[i] = this.views[i];\n\t\t\t}\n\n\t\t\tvar finalViews = [];\n\n\t\t\tfor (var _i in this.args.value) {\n\t\t\t\tvar found = false;\n\n\t\t\t\tfor (var j in views) {\n\t\t\t\t\tif (views[j] && this.args.value[_i] && this.args.value[_i] === views[j].args[this.subProperty]) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tfinalViews[_i] = views[j];\n\t\t\t\t\t\tfinalViews[_i].args[this.keyProperty] = _i;\n\t\t\t\t\t\tdelete views[j];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!found) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar viewArgs = {};\n\t\t\t\t\t\tvar view = finalViews[_i] = new _View.View(viewArgs);\n\n\t\t\t\t\t\tfinalViews[_i].template = _this2.template;\n\t\t\t\t\t\tfinalViews[_i].parent = _this2.parent;\n\t\t\t\t\t\tfinalViews[_i].viewList = _this2;\n\n\t\t\t\t\t\tfinalViews[_i].args[_this2.keyProperty] = _i;\n\t\t\t\t\t\tfinalViews[_i].args[_this2.subProperty] = _this2.args.value[_i];\n\n\t\t\t\t\t\t_this2.cleanup.push(_this2.args.value.bindTo(_i, function (v, k, t) {\n\t\t\t\t\t\t\t// viewArgs[ this.keyProperty ] = k;\n\t\t\t\t\t\t\t// viewArgs[ this.subProperty ] = v;\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t_this2.cleanup.push(viewArgs.bindTo(_this2.subProperty, function (v, k) {\n\t\t\t\t\t\t\tvar index = viewArgs[_this2.keyProperty];\n\t\t\t\t\t\t\t_this2.args.value[index] = v;\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t_this2.cleanup.push(_this2.args.subArgs.bindTo(function (v, k, t, d) {\n\t\t\t\t\t\t\tviewArgs[k] = v;\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tviewArgs[_this2.subProperty] = _this2.args.value[_i];\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var _i2 in views) {\n\t\t\t\tvar _found = false;\n\n\t\t\t\tfor (var _j in finalViews) {\n\t\t\t\t\tif (views[_i2] === finalViews[_j]) {\n\t\t\t\t\t\t_found = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!_found) {\n\t\t\t\t\tviews[_i2].remove();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar appendOnly = true;\n\n\t\t\tfor (var _i3 in this.views) {\n\t\t\t\tif (this.views[_i3] !== finalViews[_i3]) {\n\t\t\t\t\tappendOnly = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var _i4 in finalViews) {\n\t\t\t\tif (finalViews[_i4] === this.views[_i4]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tviews.splice(_i4 + 1, 0, finalViews[_i4]);\n\n\t\t\t\tfinalViews[_i4].render(this.tag);\n\t\t\t}\n\n\t\t\tfor (var _i5 in finalViews) {\n\t\t\t\tfinalViews[_i5].args[this.keyProperty] = _i5;\n\t\t\t}\n\n\t\t\tthis.views = finalViews;\n\t\t}\n\t}, {\n\t\tkey: 'pause',\n\t\tvalue: function pause() {\n\t\t\tvar _pause = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n\t\t\tfor (var i in this.views) {\n\t\t\t\tthis.views[i].pause(_pause);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'remove',\n\t\tvalue: function remove() {\n\t\t\tfor (var i in this.views) {\n\t\t\t\tthis.views[i].remove();\n\t\t\t}\n\n\t\t\tvar cleanup = void 0;\n\n\t\t\twhile (this.cleanup.length) {\n\t\t\t\tcleanup = this.cleanup.pop();\n\t\t\t\tcleanup();\n\t\t\t}\n\n\t\t\tthis.views = [];\n\n\t\t\twhile (this.tag && this.tag.firstChild) {\n\t\t\t\tthis.tag.removeChild(this.tag.firstChild);\n\t\t\t}\n\n\t\t\t_Bindable.Bindable.clearBindings(this.args.subArgs);\n\t\t\t_Bindable.Bindable.clearBindings(this.args);\n\n\t\t\tif (!this.args.value.isBound()) {\n\t\t\t\t_Bindable.Bindable.clearBindings(this.args.value);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn ViewList;\n}();\n\nexports.ViewList = ViewList;\n  })();\n});","\nrequire.register(\"curvature/input/Keyboard.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Keyboard = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Bindable = require('../base/Bindable');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Keyboard = exports.Keyboard = function () {\n\tfunction Keyboard() {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, Keyboard);\n\n\t\tthis.maxDecay = 120;\n\n\t\tthis.listening = true;\n\n\t\tthis.keys = _Bindable.Bindable.makeBindable({});\n\t\tthis.codes = _Bindable.Bindable.makeBindable({});\n\n\t\tdocument.addEventListener('keyup', function (event) {\n\t\t\t_this.keys[event.key] = -1;\n\t\t\t_this.codes[event.code] = -1;\n\t\t});\n\n\t\tdocument.addEventListener('keydown', function (event) {\n\t\t\tif (_this.keys[event.key] > 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_this.keys[event.key] = 1;\n\t\t\t_this.codes[event.code] = 1;\n\t\t});\n\n\t\twindow.addEventListener('blur', function (event) {\n\t\t\tfor (var i in _this.keys) {\n\t\t\t\t_this.keys[i] = -1;\n\t\t\t}\n\t\t\tfor (var _i in _this.codes) {\n\t\t\t\t_this.codes[_i] = -1;\n\t\t\t}\n\t\t});\n\t}\n\n\t_createClass(Keyboard, [{\n\t\tkey: 'getKey',\n\t\tvalue: function getKey(key) {\n\t\t\tif (!this.keys[key]) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn this.keys[key];\n\t\t}\n\t}, {\n\t\tkey: 'getKeyCode',\n\t\tvalue: function getKeyCode(code) {\n\t\t\tif (!this.codes[code]) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn this.codes[code];\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {\n\t\t\tfor (var i in this.keys) {\n\t\t\t\tif (this.keys[i] > 0) {\n\t\t\t\t\tthis.keys[i]++;\n\t\t\t\t} else {\n\t\t\t\t\tthis.keys[i]--;\n\n\t\t\t\t\tif (this.keys[i] < -this.maxDecay) {\n\t\t\t\t\t\tdelete this.keys[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i in this.codes) {\n\t\t\t\tif (this.codes[i] > 0) {\n\t\t\t\t\tthis.codes[i]++;\n\t\t\t\t} else {\n\t\t\t\t\tthis.codes[i]--;\n\n\t\t\t\t\tif (this.codes[i] < -this.maxDecay) {\n\t\t\t\t\t\tdelete this.keys[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Keyboard;\n}();\n  })();\n});","\nrequire.register(\"subspace-client/Channel.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-client\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Channel = exports.Channel = function () {\n\tfunction Channel() {\n\t\t_classCallCheck(this, Channel);\n\t}\n\n\t_createClass(Channel, null, [{\n\t\tkey: 'scalar',\n\t\tvalue: function scalar(data, type) {\n\t\t\tvar buffer = new Uint8Array(data).buffer;\n\n\t\t\tif (type == 'float') {\n\t\t\t\treturn new Float64Array(buffer)[0];\n\t\t\t} else if (type == 'Int32') {\n\t\t\t\treturn new Int32Array(buffer)[0];\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'namePart',\n\t\tvalue: function namePart(name, part) {\n\t\t\treturn name.split(':')[part] || null;\n\t\t}\n\t}, {\n\t\tkey: 'isWildcard',\n\t\tvalue: function isWildcard(name) {\n\t\t\treturn (/\\*/.exec(name)\n\t\t\t);\n\t\t}\n\t}, {\n\t\tkey: 'isRange',\n\t\tvalue: function isRange(name) {\n\t\t\t// return /\\*/.exec(name);\n\t\t}\n\t}, {\n\t\tkey: 'containsRange',\n\t\tvalue: function containsRange(name) {\n\t\t\t// return /\\*/.exec(name);\n\t\t}\n\t}, {\n\t\tkey: 'compareNames',\n\t\tvalue: function compareNames(a, b) {\n\t\t\tvar rangeForm = /^(\\d+)\\-?(\\d+)?$/;\n\n\t\t\tvar result = [];\n\t\t\tvar splitA = a.toString().split(':');\n\t\t\tvar splitB = b.toString().split(':');\n\t\t\tvar nodes = splitA.length;\n\t\t\tvar cmpA = void 0;\n\t\t\tvar cmpB = void 0;\n\n\t\t\tif (nodes < splitB.length) {\n\t\t\t\tnodes = splitB.length;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < nodes; i++) {\n\t\t\t\tif (splitA.length > i) {\n\t\t\t\t\tcmpA = splitA[i];\n\t\t\t\t} else if (splitA[splitA.length - 1] == '*') {\n\t\t\t\t\tcmpA = splitA[splitA.length - 1];\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (splitB.length > i) {\n\t\t\t\t\tcmpB = splitB[i];\n\t\t\t\t} else if (splitB[splitB.length - 1] == '*') {\n\t\t\t\t\tcmpB = splitB[splitB.length - 1];\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar returnNode = cmpA !== '*' ? cmpA : cmpB;\n\n\t\t\t\tif (cmpA !== cmpB) {\n\t\t\t\t\tif (cmpA !== '*' && cmpB !== '*') {\n\t\t\t\t\t\tvar mA = rangeForm.exec(cmpA);\n\t\t\t\t\t\tvar mB = rangeForm.exec(cmpB);\n\n\t\t\t\t\t\tif (mA && mB) {\n\t\t\t\t\t\t\tvar a1 = mA[1];\n\t\t\t\t\t\t\tvar a2 = mA[1];\n\t\t\t\t\t\t\tvar b1 = mB[1];\n\t\t\t\t\t\t\tvar b2 = mB[1];\n\n\t\t\t\t\t\t\tif (mA[2]) {\n\t\t\t\t\t\t\t\ta2 = mA[2];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (mB[2]) {\n\t\t\t\t\t\t\t\tb2 = mB[2];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (a1 >= b1 && a2 <= b2) {\n\t\t\t\t\t\t\t\treturnNode = a1 + '-' + a2;\n\t\t\t\t\t\t\t} else if (a1 <= b1 && a2 > b2) {\n\t\t\t\t\t\t\t\treturnNode = b1 + '-' + b2;\n\t\t\t\t\t\t\t} else if (a2 <= b2 && a2 >= b1) {\n\t\t\t\t\t\t\t\treturnNode = b1 + '-' + a2;\n\t\t\t\t\t\t\t} else if (a1 <= b2 && a1 >= b1) {\n\t\t\t\t\t\t\t\treturnNode = a1 + '-' + b2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (b2 <= a2 && b2 >= a1) {\n\t\t\t\t\t\t\t\treturnNode = a1 + '-' + b2;\n\t\t\t\t\t\t\t} else if (b1 <= a2 && b1 >= a1) {\n\t\t\t\t\t\t\t\treturnNode = b1 + '-' + a2;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult.push(returnNode);\n\t\t\t}\n\n\t\t\treturn result.join(':');\n\t\t}\n\t}]);\n\n\treturn Channel;\n}();\n  })();\n});","\nrequire.register(\"subspace-client/Socket.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"subspace-client\");\n  (function() {\n    'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Socket = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Channel = require('./Channel');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Socket = exports.Socket = function () {\n\t_createClass(Socket, null, [{\n\t\tkey: 'get',\n\t\tvalue: function get(url) {\n\t\t\tvar refresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\t\t\tif (!this.sockets) {\n\t\t\t\tthis.sockets = {};\n\t\t\t}\n\n\t\t\tif (refresh || !this.sockets[url]) {\n\t\t\t\tthis.sockets[url] = new this(new WebSocket(url));\n\t\t\t}\n\n\t\t\treturn this.sockets[url];\n\t\t}\n\t}]);\n\n\tfunction Socket(socket) {\n\t\t_classCallCheck(this, Socket);\n\n\t\tthis.socket = socket;\n\t\tsocket.binaryType = 'arraybuffer';\n\t\tthis.data = {};\n\t\tthis.listenerCount = {};\n\t\tthis.openQueue = [];\n\t\tthis._onSend = [];\n\t}\n\n\t_createClass(Socket, [{\n\t\tkey: 'subscribe',\n\t\tvalue: function subscribe(type, wildType, callback) {\n\t\t\tvar splitType = type.split(':');\n\t\t\tvar mainType = splitType.shift();\n\t\t\tvar channel = splitType.join(':');\n\n\t\t\tif (wildType instanceof Function) {\n\t\t\t\tcallback = wildType;\n\t\t\t\twildType = channel;\n\t\t\t}\n\n\t\t\tif (channel) {\n\t\t\t\tif (!(channel in this.listenerCount)) {\n\t\t\t\t\tthis.listenerCount[channel] = 0;\n\t\t\t\t}\n\n\t\t\t\tthis.listenerCount[channel]++;\n\n\t\t\t\tthis.send('sub ' + channel);\n\t\t\t}\n\n\t\t\tvar finalCallback = function (mainType, wildType, channel, callback) {\n\t\t\t\treturn function (event) {\n\n\t\t\t\t\tvar packet = {};\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (typeof event.data == 'string') {\n\t\t\t\t\t\t\tpacket = JSON.parse(event.data);\n\t\t\t\t\t\t} else if (event.data instanceof ArrayBuffer) {\n\t\t\t\t\t\t\tvar channelNumber = new Uint16Array(event.data, 4, 1)[0];\n\n\t\t\t\t\t\t\tif (!wildType || _Channel.Channel.compareNames(wildType, channelNumber)) {\n\t\t\t\t\t\t\t\tcallback(event, event.data.slice(6), channelNumber, new Uint16Array(event.data, 0, 1)[0] ? 'user' : 'server', new Uint16Array(event.data, 2, 1)[0], null, {});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (mainType !== 'message') {\n\t\t\t\t\t\t\tcallback(event);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (mainType !== 'message') {\n\t\t\t\t\t\t\tcallback(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((typeof packet === 'undefined' ? 'undefined' : _typeof(packet)) !== 'object') {\n\t\t\t\t\t\tif (channel === '') {\n\t\t\t\t\t\t\tcallback(event, event.data, null, 'server', 0, null, packet);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!wildType) {\n\t\t\t\t\t\tcallback(event, packet.message, null, packet.origin, packet.originId, null, packet);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (wildType && 'channel' in packet) {\n\t\t\t\t\t\tif (_Channel.Channel.compareNames(wildType, packet.channel)) {\n\t\t\t\t\t\t\tcallback(event, packet.message, packet.channel, packet.origin, packet.originId, packet.originalChannel, packet);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}(mainType, wildType, channel, callback);\n\n\t\t\tthis.socket.addEventListener(mainType, finalCallback);\n\n\t\t\treturn finalCallback;\n\t\t}\n\t}, {\n\t\tkey: 'unsubscribe',\n\t\tvalue: function unsubscribe(type, callback) {\n\t\t\tvar splitType = type.split(':');\n\t\t\tvar mainType = splitType.shift();\n\t\t\tvar channel = splitType.join(':');\n\n\t\t\tif (!channel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.listenerCount[channel]--;\n\n\t\t\tif (channel in this.listenerCount && this.listenerCount[channel] > 0) {} else {\n\t\t\t\tthis.socket.removeEventListener(mainType, callback);\n\t\t\t\tthis.send('unsub ' + channel);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'publish',\n\t\tvalue: function publish(channel, message) {\n\t\t\tif (channel == parseInt(channel)) {\n\t\t\t\tif (message instanceof ArrayBuffer) {\n\t\t\t\t\tmessage = new Uint8Array(message);\n\t\t\t\t} else if (message.byteLength) {\n\t\t\t\t\tmessage = new Uint8Array(message.buffer);\n\t\t\t\t} else if (!Array.isArray(message)) {\n\t\t\t\t\tmessage = [message];\n\t\t\t\t}\n\n\t\t\t\tvar channelBytes = new Uint8Array(new Uint16Array([channel]).buffer);\n\n\t\t\t\tvar sendBuffer = new Uint8Array(channelBytes.byteLength + message.byteLength);\n\n\t\t\t\tsendBuffer.set(channelBytes, 0);\n\t\t\t\tsendBuffer.set(message, channelBytes.byteLength);\n\n\t\t\t\tthis.send(sendBuffer);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.send('pub ' + channel + ' ' + message);\n\t\t}\n\t}, {\n\t\tkey: 'send',\n\t\tvalue: function send(message) {\n\t\t\tvar _this = this;\n\n\t\t\tif (this.socket.readyState !== this.socket.OPEN) {\n\t\t\t\treturn new Promise(function (accept, reject) {\n\t\t\t\t\tvar connectionOpened = function (c) {\n\t\t\t\t\t\treturn function (event) {\n\n\t\t\t\t\t\t\twhile (_this.openQueue.length) {\n\t\t\t\t\t\t\t\tvar _message = _this.openQueue.shift();\n\n\t\t\t\t\t\t\t\t_this.send(_message);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_this.socket.removeEventListener('open', c);\n\n\t\t\t\t\t\t\taccept();\n\t\t\t\t\t\t};\n\t\t\t\t\t}(connectionOpened);\n\n\t\t\t\t\t_this.socket.addEventListener('open', connectionOpened);\n\n\t\t\t\t\t_this.openQueue.unshift(message);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (var i in this._onSend) {\n\t\t\t\tthis._onSend[i](message);\n\t\t\t}\n\n\t\t\tthis.socket.send(message);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}, {\n\t\tkey: 'onSend',\n\t\tvalue: function onSend(callback) {\n\t\t\tthis._onSend.push(callback);\n\t\t}\n\t}, {\n\t\tkey: 'close',\n\t\tvalue: function close(message) {\n\t\t\tthis.socket.close();\n\t\t}\n\t}, {\n\t\tkey: 'ping',\n\t\tvalue: function ping() {\n\t\t\t// this.socket.ping();\n\t\t}\n\t}, {\n\t\tkey: 'pong',\n\t\tvalue: function pong() {\n\t\t\t// this.socket.pong();\n\t\t}\n\t}]);\n\n\treturn Socket;\n}();\n  })();\n});","import { View } from 'curvature/base/View';\n\nexport class BinaryMessageView extends View\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = `<span>&gt;&gt;&nbsp;0x</span>[[header]]&nbsp;[[message]]`;\n\t}\n}\n","import { View } from 'curvature/base/View';\n\nexport class ByteView extends View\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.args.separator = this.args.separator || '';\n\n\t\tthis.template = `<span\n\t\t\tcv-each = \"bytes:byte:b\"\n\t\t\tcv-carry = \"separator\"\n\t\t\tstyle = \"display: block;\"\n\t\t\t\"><span\n\t\t\t\tcv-on = \"cvDomAttached:color(event, byte, $view)\"\n\t\t\t\tcv-ref = \"byte:curvature/base/Tag\"\n\t\t\t\t\n\t\t\t>[[byte]][[separator]]</span></span>`;\n\t}\n\n\tcolor(event, byte, $view)\n\t{\n\t\tlet hue = parseInt(byte, 16);\n\n\t\t// let color = '#' + [\n\t\t// \t(Math.pow(Math.cos(Math.PI * hue + 5), 2) * 192)\n\t\t// \t, (Math.pow(Math.cos(Math.PI * hue + 10), 2) * 192)\n\t\t// \t, (Math.pow(Math.cos(Math.PI * hue + 0), 2) * 192)\n\t\t// ].map((x)=>Math.floor(x).toString(16).padStart(2, '0')).join('');\n\n\t\tif(!hue)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet color = \"hsl(\" + (\n\t\t\t(360 * hue) / 0xFF\n\t\t) + \",70%,70%)\";\n\n\t\t$view.tags.byte.element.style.color = color;\n\n\t\t$view.tags.byte.element.style['text-shadow'] = `2px 0px 5px ${color}, -2px 0px 5px ${color}`\n\t}\n}\n","export class Config{}\n\nConfig.title      = 'SubSpace 0.2.0a';\n// Config.socketHost = `ws://${location.hostname}:9998`;\nConfig.socketHost = `ws://${location.hostname}:9998`;","export class Cornfield\n{\n\tconstructor(terminal)\n\t{\n\t\tterminal.args.output.push(':: Welcome to Cornfield');\n\t\tterminal.args.output.push(':: You are in a cornfield.');\n\t\tterminal.args.output.push(':: You see corn.');\n\t\tterminal.args.output.push(':: Move? [north south east west]');\n\t\tterminal.args.output.push(':: Look?');\n\n\t\tterminal.localEcho = false;\n\n\t\tthis.socket = terminal.socket;\n\n\t\tthis.socket.subscribe('message:cornfield:game',(e,m,o,i)=>{\n\n\t\t});\n\n\t\tthis.socket.subscribe('message:cornfield:chat', (e,m,c,o,i)=>{\n\t\t\tterminal.args.output.push(`!! <${i}> ${m}`);\n\t\t});\n\n\t\tthis.socket.subscribe('message:cornfield:users:ping', (e,m,o,i)=>{\n\t\t\tthis.socket.publish('cornfield:users:pong', 'pong!');\n\t\t});\n\n\t\tthis.socket.subscribe('message:cornfield:users:pong', (e,m,o,i)=>{\n\t\t});\n\t}\n\n\tpass(input, terminal)\n\t{\n\t\tlet args    = input.split(' ');\n\t\tlet command = args.shift();\n\t\tconsole.log(command);\n\n\t\tswitch(command.toLowerCase())\n\t\t{\n\t\t\tcase 'ping':\n\t\t\t\tthis.socket.publish('cornfield:users:ping', 'ping!');\n\t\t\t\tbreak;\n\n\t\t\tcase 'look':\n\t\t\t\tterminal.args.output.push(':: You found an ear of corn.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'l');\n\t\t\t\tbreak;\n\n\t\t\tcase 'n':\n\t\t\tcase 'north':\n\t\t\t\tterminal.args.output.push(':: You moved north.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'n');\n\t\t\t\tbreak;\n\n\t\t\tcase 's':\n\t\t\tcase 'south':\n\t\t\t\tterminal.args.output.push(':: You moved south.');\n\t\t\t\tthis.socket.publish('cornfield:game', 's');\n\t\t\t\tbreak;\n\n\t\t\tcase 'e':\n\t\t\tcase 'east':\n\t\t\t\tterminal.args.output.push(':: You moved east.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'e');\n\t\t\t\tbreak;\n\n\t\t\tcase 'w':\n\t\t\tcase 'west':\n\t\t\t\tterminal.args.output.push(':: You moved west.');\n\t\t\t\tthis.socket.publish('cornfield:game', 'w');\n\t\t\t\tbreak;\n\n\t\t\tcase 't':\n\t\t\tcase 'talk':\n\t\t\tcase 'say':\n\t\t\t\t// let chatMessage = 'ok';\n\t\t\t\tlet chatMessage = args.join(' ');\n\t\t\t\tterminal.args.output.push(`!! <you> ${chatMessage}`);\n\t\t\t\tthis.socket.publish('cornfield:chat', chatMessage);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tterminal.args.input = '';\n\t}\n}\n","import { View } from 'curvature/base/View';\n\nexport class Image\n{\n\tconstructor(terminal, args)\n\t{\n\t\tterminal.localEcho = false;\n\n\t\tthis.socket = terminal.socket;\n\n\t\tlet channel = 0;\n\n\t\tif(args.length)\n\t\t{\n\t\t\tchannel = args[0];\n\t\t}\n\n\t\tthis.socket.subscribe(`message:${channel}`,(e,m,o,i)=>{\n\t\t\tconsole.log(m,o,i);\n\t\t\tterminal.args.output.push(`Got one.`);\n\t\t\tlet blob = new Blob([new Uint8Array(m)]);\n\t\t\tlet url  = URL.createObjectURL(blob);\n\n\t\t\tlet view = new View;\n\n\t\t\tview.template   = '<img cv-attr = \"src:img\" cv-ref = \"img:curvature/base/Tag\" />';\n\n\t\t\tview.postRender = () => {\n\t\t\t\tlet img       = view.tags.img.element;\n\t\t\t\tlet imageLoad = (event) => {\n\t\t\t\t\timg.removeEventListener('load', imageLoad);\n\t\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t\t};\n\t\t\t\timg.addEventListener('load', imageLoad);\n\t\t\t};\n\n\t\t\tterminal.args.output.push(view);\n\n\t\t\tview.args.img = url;\n\t\t});\n\n\t\tterminal.args.output.push(`:: Listening for images on channel ${channel}`);\n\t}\n\n\tpass(input, terminal)\n\t{\n\t\tlet args    = input.split(' ');\n\t\tlet command = args.shift();\n\t\tconsole.log(command);\n\n\t\tswitch(command.toLowerCase())\n\t\t{\n\t\t\tcase 'ping':\n\t\t\t\tthis.socket.publish('cornfield:users:ping', 'ping!');\n\t\t\t\tbreak;\n\t\t}\n\n\t\tterminal.args.input = '';\n\t}\n}\n","export class Login\n{\n\tinit(terminal)\n\t{\n\t\tterminal.args.output.push(':: Please type your username');\n\t}\n\n\tpass(command, terminal)\n\t{\n\t\tterminal.args.passwordMode = false;\n\n\t\tif(!this.stack)\n\t\t{\n\t\t\tthis.stack = [];\n\t\t}\n\n\t\tthis.stack.push(command);\n\n\t\tif(this.stack.length == 1)\n\t\t{\n\t\t\tterminal.args.passwordMode = true;\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your password [censored]');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 2)\n\t\t{\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.localLock = false;\n\t\t\tterminal.args.prompt = '<<';\n\n\t\t\tterminal.args.output.push(`<< login ${this.stack[0]} [password censored]`);\t\n\t\t\tterminal.socket.send(`login ${this.stack[0]} ${this.stack[1]}`);\n\t\t\tterminal.args.output.push(':: Checking...');\n\t\t}\n\t}\n}","import { View as BaseView } from 'curvature/base/View';\n\nexport class MeltingText extends BaseView\n{\n\tconstructor(args)\n\t{\t\t\n\t\tsuper(args);\n\n\t\tthis.charUp   = [\n\t\t\t'\\u030d', /*          */\t\t'\\u030e', /*          */\t\t'\\u0304', /*          */\t\t'\\u0305', /*          */\n\t\t\t'\\u033f', /*          */\t\t'\\u0311', /*          */\t\t'\\u0306', /*          */\t\t'\\u0310', /*          */\n\t\t\t'\\u0352', /*          */\t\t'\\u0357', /*          */\t\t'\\u0351', /*          */\t\t'\\u0307', /*          */\n\t\t\t'\\u0308', /*          */\t\t'\\u030a', /*          */\t\t'\\u0342', /*          */\t\t'\\u0343', /*          */\n\t\t\t'\\u0344', /*          */\t\t'\\u034a', /*          */\t\t'\\u034b', /*          */\t\t'\\u034c', /*          */\n\t\t\t// '\\u0303', /*          */\t\t'\\u0302', /*          */\t\t'\\u030c', /*          */\t\t'\\u0350', /*          */\n\t\t\t'\\u0300', /*          */\t\t'\\u0301', /*          */\t\t'\\u030b', /*          */\t\t'\\u030f', /*          */\n\t\t\t'\\u0312', /*          */\t\t'\\u0313', /*          */\t\t'\\u0314', /*          */\t\t'\\u033d', /*          */\n\t\t\t// '\\u0309', /*          */\t\t'\\u0363', /*          */\t\t'\\u0364', /*          */\t\t'\\u0365', /*          */\n\t\t\t// '\\u0366', /*          */\t\t'\\u0367', /*          */\t\t'\\u0368', /*          */\t\t'\\u0369', /*          */\n\t\t\t// '\\u036a', /*          */\t\t'\\u036b', /*          */\t\t'\\u036c', /*          */\t\t'\\u036d', /*          */\n\t\t\t// '\\u036e', /*          */\t\t'\\u036f', /*          */\t\t'\\u033e', /*          */\t\t'\\u035b', /*          */\n\t\t\t\n\t\t];\n\n\t\tthis.charMid  = [\n\t\t\t'\\u0315', /*          */\t\t'\\u031b', /*          */\t\t'\\u0340', /*          */\t\t'\\u0341', /*          */\n\t\t\t'\\u0358', /*          */\t\t'\\u0321', /*          */\t\t'\\u0322', /*          */\t\t'\\u0327', /*          */\n\t\t\t'\\u0328', /*          */\t\t'\\u0334', /*          */\t\t'\\u0335', /*          */\t\t'\\u0336', /*          */\n\t\t\t'\\u034f', /*          */\t\t'\\u035c', /*          */\t\t'\\u035d', /*          */\t\t'\\u035e', /*          */\n\t\t\t'\\u035f', /*          */\t\t'\\u0360', /*          */\t\t/*'\\u0362',           */\t\t'\\u0338', /*          */\n\t\t\t'\\u0337', /*          */\t\t'\\u0361', /*          */\t\t/*'\\u0489'     _     */\t\t\n\t\t];\n\n\t\tthis.charDown = [\n\t\t\t'\\u0316', /*          */\t\t'\\u0317', /*          */\t\t'\\u0318', /*          */\t\t'\\u0319', /*          */\n\t\t\t'\\u0316', /*          */\t\t'\\u0317', /*          */\t\t'\\u0318', /*          */\t\t'\\u0319', /*          */\n\t\t\t'\\u0320', /*          */\t\t'\\u0324', /*          */\t\t'\\u0325', /*          */\t\t'\\u0326', /*          */\n\t\t\t'\\u0329', /*          */\t\t'\\u032a', /*          */\t\t'\\u032b', /*          */\t\t'\\u032c', /*          */\n\t\t\t'\\u032d', /*          */\t\t'\\u032e', /*          */\t\t'\\u032f', /*          */\t\t'\\u0330', /*          */\n\t\t\t// '\\u0331', /*          */\t\t'\\u0332', /*          */\t\t'\\u0333', /*          */\t\t'\\u0339', /*          */\n\t\t\t// '\\u033a', /*          */\t\t'\\u033b', /*          */\t\t'\\u033c', /*          */\t\t'\\u0345', /*          */\n\t\t\t// '\\u0347', /*          */\t\t'\\u0348', /*          */\t\t'\\u0349', /*          */\t\t'\\u034d', /*          */\n\t\t\t// '\\u034e', /*          */\t\t'\\u0353', /*          */\t\t'\\u0354', /*          */\t\t'\\u0355', /*          */\n\t\t\t// '\\u0356', /*          */\t\t'\\u0359', /*          */\t\t'\\u035a', /*          */\t\t'\\u0323' /*          */\n\t\t];\n\n\t\tthis.template = `\n\t\t\t<div cv-bind = \"output\" class = \"melting\"></div>\n\t\t`;\n\t\tthis.args.input      = `Magic is no more than the art of employing consciously invisible means to produce visible effects. Will, love, and imagination are magic powers that everyone possesses; and whoever knows how to develop them to their fullest extent is a magician. Magic has but one dogma, namely, that the seen is the measure of the unseen\n`; \n\t\t// this.args.input      = 'anything'; \n\t\tthis.args.output     = 'uh.'\n\t\tthis.corruptors = {};\n\t\tthis.maxCorrupt = 20;\n\t\tthis.type       = '';\n\n\t\tthis.args.bindTo('type', (v) => {\n\t\t\tthis.output = this.corrupt(this.type);\n\t\t});\n\n\t\tsetInterval(\n\t\t\t() => {\n\t\t\t\tthis.typewriter(this.args.input);\n\t\t\t}\n\t\t\t, 25\n\t\t);\n\t\tsetInterval(\n\t\t\t() => {\n\t\t\t\tlet selection = window.getSelection();\n\n\t\t\t\tif(selection.anchorOffset !== selection.focusOffset)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(selection.anchorNode !== selection.focusNode)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.args.output = this.corrupt(this.type);\n\t\t\t\t// this.args.output = this.type;\n\t\t\t}\n\t\t\t, 35\n\t\t);\n\n\t\tthis.args.bindTo(\n\t\t\t'input'\n\t\t\t, (v) => { this.type = ''; this.corruptors = [] }\n\t\t);\n\t}\n\tcorrupt(v) {\n\t\tlet chars = v.split('');\n\t\tlet rand  = (x) => parseInt(Math.random()*x);\n\t\tfor(var i in chars) {\n\t\t\tif(!this.corruptors[i]) {\n\t\t\t\tthis.corruptors[i] = [];\n\t\t\t}\n\t\t\tif(chars[i].match(/\\W/)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet charSets = [\n\t\t\t\t// this.charDown, this.charDown, this.charUp, \n\t\t\t\tthis.charDown,\n\t\t\t\tthis.charDown,\n\t\t\t\tthis.charUp,\n\t\t\t\tthis.charMid,\n\t\t\t];\n\t\t\tlet charSet  = charSets[ rand(charSets.length) ];\n\t\t\twhile(this.corruptors[i].length < this.maxCorrupt) {\n\t\t\t\tif(rand(5) < 1) {\n\t\t\t\t\tthis.corruptors[i].unshift(this.corruptors[i].pop());\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(charSet === this.charMid) {\n\t\t\t\t\tif(rand(15) > 9) {\n\t\t\t\t\t\tthis.corruptors[i].shift();\n\t\t\t\t\t\t// continue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.corruptors[i].unshift(charSet[ rand(charSet.length) ]);\n\t\t\t}\n\t\t\tif(this.corruptors[i].length >= this.maxCorrupt) {\n\t\t\t\tthis.corruptors[i].pop();\n\t\t\t}\n\t\t\t\n\t\t\tchars[i] += this.corruptors[i].join('');\n\t\t}\n\t\treturn chars.join('');\n\t}\n\ttypewriter(v) {\n\t\tthis.type = this.type || '';\n\n\t\tif(this.type !== v) {\n\t\t\tthis.type += v.substr(this.type.length, 1);\n\n\t\t\tthis.onTimeout(150, () => {\n\t\t\t\tif(document.body.scrollHeight > window.scrollY + window.innerHeight)\n\t\t\t\t{\n\t\t\t\t\twindow.scrollTo({\n\t\t\t\t\t\ttop: document.body.scrollHeight\n\t\t\t\t\t\t, left: 0\n\t\t\t\t\t\t, behavior: 'smooth'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\telse {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}","export class Register\n{\n\tinit(terminal)\n\t{\n\t\tterminal.args.output.push(':: Please type your username');\n\t}\n\n\tpass(command, terminal)\n\t{\n\t\tterminal.args.passwordMode = false;\n\n\t\tif(!this.stack)\n\t\t{\n\t\t\tthis.stack = [];\n\t\t}\n\n\t\tthis.stack.push(command);\n\n\t\tif(this.stack.length == 1)\n\t\t{\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your email address');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 2)\n\t\t{\n\t\t\tterminal.args.passwordMode = true;\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your password');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 3)\n\t\t{\n\t\t\tterminal.args.passwordMode = true;\n\t\t\tterminal.args.input = '';\n\t\t\tterminal.args.output.push(':: Please type your password again.');\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.stack.length == 4)\n\t\t{\n\t\t\tterminal.args.input = '';\n\t\t\t\n\t\t\tif(this.stack[2] !== this.stack[3])\n\t\t\t{\n\t\t\t\tterminal.args.output.push(':: Password verification failed.');\n\t\t\t\tterminal.args.output.push(':: Please type your password');\n\t\t\t\tterminal.args.passwordMode = true;\n\t\t\t\tthis.stack.pop();\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tterminal.args.output.push(`:: Trying to register ${this.stack[0]} <${this.stack[1]}>...`);\n\n\t\t\tterminal.args.output.push(`<< register ${this.stack[0]} [password censored] ${this.stack[1]}`);\t\n\t\t\tterminal.socket.send(`register ${this.stack[0]} ${this.stack[2]} ${this.stack[1]}`);\n\n\t\t\tterminal.localLock = false;\n\t\t\tterminal.args.prompt = '<<';\n\n\t\t\t// terminal.socket.send(`login ${this.stack[0]} ${this.stack[1]}`);\n\t\t}\n\t}\n}","import { Config } from 'Config';\nimport { View } from 'curvature/base/View';\nimport { Keyboard } from 'curvature/input/Keyboard';\n\nimport { Socket } from 'subspace-client/Socket';\n\nimport { BinaryMessageView } from 'BinaryMessageView';\nimport { TextMessageView } from 'TextMessageView';\nimport { ByteView } from 'ByteView';\nimport { MeltingText } from 'MeltingText';\n\nimport { Login } from 'Login';\nimport { Register } from 'Register';\nimport { Cornfield } from 'Cornfield';\nimport { Chat } from 'chat/Chat';\nimport { Image } from 'Image';\n\nexport class RootView extends View {\n\tconstructor(args = {}) {\n\t\tsuper(args);\n\n\t\tthis.routes = {};\n\t\tthis.template = require('./root.tmp');\n\t\tthis.args.input = '';\n\t\tthis.args.output = [];\n\t\tthis.args.inverted = '';\n\t\tthis.args.passwordMode = false;\n\t\tthis.localEcho = true;\n\n\t\tthis.localLock = null;\n\t\tthis.args.prompt = '<<';\n\n\t\tthis.max = 1024;\n\n\t\tthis.history = [];\n\t\tthis.historyCursor = -1;\n\n\t\targs.output.___after___.push((t, k, o, a) => {\n\t\t\tif (k === 'push') {\n\t\t\t\tthis.onTimeout(16, () => {\n\t\t\t\t\twindow.scrollTo({\n\t\t\t\t\t\ttop: document.body.scrollHeight,\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tthis.onTimeout(48, () => {\n\t\t\t\t\twindow.scrollTo({\n\t\t\t\t\t\ttop: document.body.scrollHeight,\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.runScript('/init_rc');\n\n\t\t// this.auth().then(()=>{\n\t\t// \tthis.onTimeout(10, ()=>{\n\t\t// \t\tthis.socket.send('motd');\n\t\t// \t\tthis.args.output.push(`<< motd`);\n\t\t// \t});\n\t\t// });\n\n\n\n\t\tlet keyboard = new Keyboard;\n\n\t\tkeyboard.keys.bindTo((v, k) => {\n\t\t\tif (v == 1) {\n\t\t\t\t// alert(k);\n\t\t\t}\n\t\t}, { wait: 1 });\n\n\t\tkeyboard.keys.bindTo('Escape', (v) => {\n\t\t\tif (v == 1) {\n\t\t\t\tif (this.localLock) {\n\t\t\t\t\tthis.args.output.push(`:: Killed.`);\n\t\t\t\t}\n\t\t\t\tthis.localLock = false;\n\t\t\t\tthis.args.prompt = '<<';\n\t\t\t\tthis.args.passwordMode = false;\n\t\t\t}\n\t\t}, { wait: 1 });\n\n\t\tkeyboard.keys.bindTo('ArrowUp', (v) => {\n\t\t\tif (v == 1) {\n\t\t\t\tthis.historyCursor++;\n\n\t\t\t\tif (this.historyCursor >= this.history.length) {\n\t\t\t\t\tthis.historyCursor--;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.args.input = this.history[this.historyCursor];\n\t\t\t}\n\t\t}, { wait: 1 });\n\n\t\tkeyboard.keys.bindTo('ArrowDown', (v) => {\n\t\t\tif (v == 1) {\n\t\t\t\tthis.historyCursor--;\n\n\t\t\t\tif (this.historyCursor <= -1) {\n\t\t\t\t\tthis.historyCursor++;\n\t\t\t\t\tthis.args.input = '';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.args.input = this.history[this.historyCursor];\n\t\t\t}\n\t\t}, { wait: 1 });\n\n\t\tconst rtcConfig = {iceServers: [{urls: 'stun:stun.callwithus.com'}]};\n\n\t\tthis.peerClient = new RTCPeerConnection(rtcConfig);\n\t\tthis.peerServer = new RTCPeerConnection(rtcConfig);\n\n\t\tthis.peerClient.addEventListener('icecandidate', () => {\n\t\t\tlet localDescription = JSON.stringify(\n\t\t\t\tthis.peerClient.localDescription, null, 4\n\t\t\t);\n\n\t\t\tthis.args.output.push(':: Client description');\n\n\t\t\tthis.args.output.push(localDescription);\n\t\t});\n\n\t\tthis.peerServer.addEventListener('icecandidate', () => {\n\t\t\tlet localDescription = JSON.stringify(\n\t\t\t\tthis.peerServer.localDescription, null, 4\n\t\t\t);\n\n\t\t\tthis.args.output.push(':: Server description');\n\n\t\t\tthis.args.output.push(localDescription);\n\t\t});\n\n\t\tthis.peerClient.addEventListener('iceconnectionstatechange', () => {\n\t\t\tlet state = this.peerClient.iceConnectionState;\n\n\t\t\tthis.args.output.push(':: Peer client state ' + state + '.');\n\t\t});\n\n\t\tthis.peerServer.addEventListener('iceconnectionstatechange', () => {\n\t\t\tlet state = this.peerClient.iceConnectionState;\n\n\t\t\tthis.args.output.push(':: Peer server state ' + state + '.');\n\t\t});\n\n\t\tthis.peerServer.addEventListener('datachannel', () => {\n\t\t\tlet state = this.peerClient.iceConnectionState;\n\n\t\t\tthis.args.output.push(':: Peer server state ' + state + '.');\n\n\t\t\tthis.peerServerChannel = e.channel;\n\n\t\t\tthis.peerClientChannel.addEventListener('open', () => {\n\t\t\t\tconsole.log('Remote peer server accepted!');\n\t\t\t});\n\n\t\t\tthis.peerClientChannel.addEventListener('message', (event) => {\n\t\t\t\tconsole.log('Remote peer server sent message!');\n\t\t\t\tconsole.log(event);\n\t\t\t});\n\n\t\t});\n\t}\n\n\trunScript(url) {\n\t\tfetch(url + '?api=txt').then((response) => {\n\t\t\treturn response.text();\n\t\t}).then((init) => {\n\t\t\tlet lines = init.split(\"\\n\");\n\n\t\t\tfor (let i in lines) {\n\t\t\t\tlet line = lines[i];\n\n\t\t\t\tif (line[0] == '!') {\n\t\t\t\t\tthis.args.output.push(line.substring(1));\n\t\t\t\t} else {\n\t\t\t\t\tif (!line) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis.interpret(line);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpostRender() {\n\t\tthis.args.bindTo('passwordMode', (v) => {\n\t\t\tif (v) {\n\t\t\t\tthis.tags.input.element.style.display = 'none';\n\t\t\t\tthis.tags.password.element.style.display = 'unset';\n\t\t\t} else {\n\t\t\t\tthis.tags.input.element.style.display = 'unset';\n\t\t\t\tthis.tags.password.element.style.display = 'none';\n\t\t\t}\n\n\t\t\tthis.focus();\n\t\t}, { wait: 0 });\n\t}\n\n\tfileLoaded(event) {\n\t\tif (this.fileChannel === false) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet fileReader = new FileReader();\n\t\tlet field = event.target;\n\t\tlet file = event.target.files[0];\n\n\t\tfileReader.addEventListener('load', (event) => {\n\t\t\tthis.args.output.push(\n\t\t\t\t`:: Sending ${file.name}...`\n\t\t\t);\n\n\t\t\tif (this.fileChannel == parseInt(this.fileChannel)) {\n\t\t\t\tthis.socket.publish(\n\t\t\t\t\tthis.fileChannel, event.target.result\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconsole.log(event.target);\n\t\t\t\tthis.socket.publish(\n\t\t\t\t\tthis.fileChannel, (new TextDecoder(\"utf-8\")).decode(\n\t\t\t\t\t\tevent.target.result\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.fileChannel = false;\n\t\t\tfield.value = '';\n\t\t});\n\n\t\tfileReader.readAsArrayBuffer(file)\n\t}\n\n\tfocus(event) {\n\t\tif (event && event.target.name == 'INPUT') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (window.getSelection().toString()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.args.passwordMode) {\n\t\t\tthis.tags.password.element.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tags.input.element.focus();\n\t}\n\n\tsubmit(event) {\n\t\tthis.interpret(this.args.input);\n\t}\n\n\tinterpret(command) {\n\t\tif (this.localLock) {\n\t\t\tif (command == '/quit') {\n\t\t\t\tthis.localLock = false;\n\t\t\t\tthis.args.prompt = '<<';\n\t\t\t\tthis.args.output.push(`:: Killed.`);\n\t\t\t\tthis.args.input = '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.localLock) {\n\t\t\t\tconsole.log(this.localLock);\n\t\t\t\tthis.localLock.pass(command, this);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.history.unshift(command);\n\t\tthis.historyCursor = -1;\n\n\t\tif (command.substring(0, 1) !== '/') {\n\t\t\tthis.socket.send(command);\n\n\t\t\tthis.args.output.push(`<< ${command}`);\n\n\t\t\twhile (this.args.output.length > this.max) {\n\t\t\t\tthis.args.output.shift();\n\t\t\t}\n\n\t\t\tthis.args.input = '';\n\n\t\t\treturn;\n\t\t}\n\n\t\t// let original = command;\n\t\tthis.args.output.push(`:: ${command}`);\n\n\t\tcommand = command.substring(1);\n\t\tlet args = command.split(' ');\n\t\tcommand = args.shift();\n\n\t\tswitch (command) {\n\t\t\tcase 'pub':\n\t\t\t\tlet channel = parseInt(args.shift(), 16);\n\t\t\t\tlet data = [];\n\n\t\t\t\twhile (args.length) {\n\t\t\t\t\tdata.push(args.shift());\n\t\t\t\t}\n\n\t\t\t\tlet channelBytes = new Uint8Array(\n\t\t\t\t\tnew Uint16Array([channel]).buffer\n\t\t\t\t);\n\n\t\t\t\tlet bytes = [];\n\n\t\t\t\tfor (let i in channelBytes) {\n\t\t\t\t\tbytes[i] = channelBytes[i];\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t\t\tbytes[i + 2] = parseInt(data[i], 16);\n\t\t\t\t}\n\n\t\t\t\tthis.socket.send(new Uint8Array(bytes));\n\t\t\t\tbreak;\n\n\t\t\tcase 'login':\n\t\t\t\tthis.args.output.push(':: Escape to cancel');\n\t\t\t\tthis.localLock = new Login;\n\t\t\t\tthis.args.prompt = '::';\n\t\t\t\tthis.localLock.init(this);\n\t\t\t\tthis.args.prompt = '::';\n\t\t\t\tbreak;\n\n\t\t\tcase 'register':\n\t\t\t\tthis.args.output.push(':: Escape to cancel');\n\t\t\t\tthis.localLock = new Register;\n\t\t\t\tthis.args.prompt = '::';\n\t\t\t\tthis.localLock.init(this);\n\t\t\t\tbreak;\n\n\t\t\tcase 'auth':\n\t\t\t\tthis.auth();\n\t\t\t\tbreak;\n\n\t\t\tcase 'clear':\n\t\t\t\twhile (this.args.output.length) {\n\t\t\t\t\tthis.args.output.pop();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'echo':\n\t\t\t\tif (args.length) {\n\t\t\t\t\tthis.localEcho = parseInt(args[0]);\n\t\t\t\t}\n\t\t\t\tthis.args.output.push(`Echo is ${this.localEcho?'on':'off'}`);\n\t\t\t\tbreak;\n\n\t\t\tcase 'cornfield':\n\t\t\t\tthis.localLock = new Cornfield(this);\n\t\t\t\tthis.args.prompt = '::';\n\t\t\t\tbreak;\n\n\t\t\t\t// case 'chat':\n\t\t\t\t// \tthis.localLock = new Chat(this);\n\t\t\t\t// \tthis.args.prompt = '::';\n\t\t\t\t// \tbreak;\n\n\t\t\tcase 'image':\n\t\t\t\tthis.localLock = new Image(this, args);\n\t\t\t\tthis.args.prompt = '::';\n\t\t\t\tbreak;\n\n\t\t\tcase 'light':\n\t\t\t\tthis.args.inverted = 'inverted';\n\t\t\t\tbreak;\n\n\t\t\tcase 'dark':\n\t\t\t\tthis.args.inverted = '';\n\t\t\t\tbreak;\n\n\n\t\t\tcase 'file':\n\t\t\t\tif (!args.length) {\n\t\t\t\t\tthis.args.output.push(\n\t\t\t\t\t\t`:: Error: Please supply a channel to publish file.`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.fileChannel = args[0];\n\t\t\t\tthis.tags.file.element.click();\n\t\t\t\tbreak;\n\n\t\t\tcase 'z':\n\t\t\t\tthis.args.output.push(\n\t\t\t\t\tnew MeltingText({ input: 'lmao!' })\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase 'commands':\n\t\t\t\tthis.args.output.push(JSON.stringify({\n\t\t\t\t\t'/pub': 'CHAN BYTES... Publish raw bytes to a channel (hexadecimal)',\n\t\t\t\t\t'/auth': 'Run the auth procedure.',\n\t\t\t\t\t'/login': 'Run the login procedure.',\n\t\t\t\t\t'/register': 'Run the registration procedure.',\n\t\t\t\t\t'/clear': 'Clear the terminal.',\n\t\t\t\t\t'/echo': '[1|0] Enable/Disable/Check localEcho.',\n\t\t\t\t\t'/light': 'Light theme.',\n\t\t\t\t\t'/dark': 'Dark theme.',\n\t\t\t\t\t'/cornfield': 'Play Cornfield.'\n\t\t\t\t}, null, 4));\n\t\t\t\tbreak;\n\n\t\t\tcase 'offer':\n\t\t\t\tthis.peerClient.createDataChannel('chat');\n\n\t\t\t\tthis.peerClientChannel = this.peerClient.createDataChannel(\"chat\")\n\n\t\t\t\tthis.peerClientChannel.addEventListener('open', () => {\n\t\t\t\t\tconsole.log('Remote peer server accepted!');\n\t\t\t\t});\n\n\t\t\t\tthis.peerClientChannel.addEventListener('message', (event) => {\n\t\t\t\t\tconsole.log('Remote peer server sent message!');\n\t\t\t\t\tconsole.log(event);\n\t\t\t\t});\n\n\t\t\t\tthis.peerClient.createOffer().then((offer) => {\n\t\t\t\t\tthis.peerClient.setLocalDescription(offer);\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'answer':\n\t\t\t\tif (!args.length) {\n\t\t\t\t\tthis.args.output.push(\n\t\t\t\t\t\t`:: Error: Please supply SDP offer string.`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlet offer = new RTCSessionDescription(\n\t\t\t\t\tJSON.parse(args.join(' '))\n\t\t\t\t);\n\n\t\t\t\tthis.peerServer.setRemoteDescription(offer);\n\n\t\t\t\tthis.peerServer.createAnswer(\n\t\t\t\t\t(answer) => {\n\t\t\t\t\t\tconsole.log(answer);\n\t\t\t\t\t\tlet answerString = JSON.stringify(\n\t\t\t\t\t\t\tanswer, null, 4\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// this.args.output.push(answerString);\n\n\t\t\t\t\t\tthis.peerServer.setLocalDescription(answer);\n\t\t\t\t\t}, (error) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tthis.args.output.push(\n\t\t\t\t\t\t\t`:: Error: Unexpected exception.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'accept':\n\t\t\t\tif (!args.length) {\n\t\t\t\t\tthis.args.output.push(\n\t\t\t\t\t\t`:: Error: Please supply SDP offer string.`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlet answer = new RTCSessionDescription(\n\t\t\t\t\tJSON.parse(args.join(' '))\n\t\t\t\t);\n\n\t\t\t\tthis.peerClient.setRemoteDescription(answer);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'connect':\n\t\t\t\tthis.socket = Socket.get(Config.socketHost, true);\n\n\t\t\t\tthis.socket.subscribe('close', (event) => {\n\t\t\t\t\tconsole.log('Disconnected!');\n\t\t\t\t\tthis.args.output.push(`:: Disconnected!`);\n\t\t\t\t\tthis.args.output.push(`:: Reinitializing in 5s...`);\n\n\t\t\t\t\tif (this.recon) {\n\t\t\t\t\t\tthis.clearTimeout(this.recon);\n\n\t\t\t\t\t\tthis.recon = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.recon = this.onTimeout(5000, () => {\n\t\t\t\t\t\t\tthis.recon = false;\n\t\t\t\t\t\t\tthis.runScript('/bounce_rc');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tthis.socket.subscribe('open', () => {\n\t\t\t\t\tthis.runScript('/open_rc');\n\t\t\t\t});\n\n\t\t\t\tthis.socket.subscribe('message', (event, message, channel, origin, originId, originalChannel, packet) => {\n\t\t\t\t\tif (typeof event.data == 'string') {\n\t\t\t\t\t\tlet received = JSON.parse(event.data);\n\n\t\t\t\t\t\tif (typeof received == 'object') {\n\t\t\t\t\t\t\treceived = JSON.stringify(received, null, 4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.localEcho) {\n\t\t\t\t\t\t\tthis.args.output.push(new TextMessageView({\n\t\t\t\t\t\t\t\tmessage: received\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (event.data instanceof ArrayBuffer) {\n\t\t\t\t\t\tlet bytesArray = new Uint8Array(event.data);\n\n\t\t\t\t\t\tlet user = originId.toString(16)\n\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t.padStart(4, '0');\n\n\t\t\t\t\t\tlet channelName = channel.toString(16)\n\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t.padStart(4, '0');\n\n\t\t\t\t\t\tlet header = `0x${user}${channelName}`;\n\n\t\t\t\t\t\tlet headerBytes = [\n\t\t\t\t\t\t\toriginId.toString(16)\n\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t.padStart(4, '0'), channel.toString(16)\n\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t.padStart(4, '0')\n\t\t\t\t\t\t].join('').match(/.{1,2}/g);\n\n\t\t\t\t\t\tlet messageIndex = 6;\n\n\t\t\t\t\t\tif (origin == 'server') {\n\t\t\t\t\t\t\theaderBytes = [channel.toString(16).padStart(4, '0')];\n\t\t\t\t\t\t\theader = `0x${channel.toString(16).padStart(4, '0')}`;\n\n\t\t\t\t\t\t\tlet messageIndex = 4;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet bytes = Array.from(bytesArray).map(x => {\n\t\t\t\t\t\t\treturn x.toString(16)\n\t\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.localEcho) {\n\t\t\t\t\t\t\tthis.args.output.push(new BinaryMessageView({\n\t\t\t\t\t\t\t\theader: new ByteView({\n\t\t\t\t\t\t\t\t\tseparator: '',\n\t\t\t\t\t\t\t\t\tbytes: headerBytes\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tmessage: new ByteView({\n\t\t\t\t\t\t\t\t\tseparator: ' ',\n\t\t\t\t\t\t\t\t\tbytes: bytes.slice(messageIndex)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\twhile (this.args.output.length > this.max) {\n\t\t\t\t\t\t\tthis.args.output.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.args.input = '';\n\t}\n\n\tauth() {\n\t\treturn fetch('/auth?api').then((response) => {\n\t\t\treturn response.text();\n\t\t}).then((token) => {\n\t\t\t// this.args.output.push(`:: /auth`);\n\t\t\tthis.args.output.push('<< auth [token censored]');\n\t\t\tthis.socket.send(`auth ${token}`);\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\ttest(event) {\n\t\tif (event.key == 'Enter') {\n\t\t\tlet command = this.args.input;\n\t\t\tthis.args.input = '';\n\t\t\tthis.onTimeout(0, () => {\n\t\t\t\tthis.interpret(command);\n\t\t\t});\n\n\t\t\tconsole.log(command);\n\t\t}\n\t}\n\n\tcancel(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n}","import { View } from 'curvature/base/View';\n\nexport class TextMessageView extends View\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = `<span>&gt;&gt;&nbsp;</span><span class = \"text\">[[message]]</span>`;\n\t}\n}\n","import { View } from './View.js';\n\nexport class Chat\n{\n\tconstructor(terminal, args)\n\t{\n\t\tterminal.args.output.push(new View);\n\t}\n\n\tpass(command)\n\t{\n\n\t}\n}","import { View as BaseView } from 'curvature/base/View';\n\nexport class View extends BaseView\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = require('./view.tmp');\n\t}\n}","module.exports = \"<div class = \\\"nynex window\\\">\\n\\t<div class = \\\"titlebar\\\">\\n\\t\\t<div class = \\\"title\\\"> Chat App</div>\\n\\t\\t<div class = \\\"button\\\"></div>\\n\\t\\t<div class = \\\"button\\\"></div>\\n\\t</div>\\n\\t<select multiple height = \\\"5\\\">\\n\\t\\t<option>Buddy</option>\\n\\t\\t<option>Guy</option>\\n\\t\\t<option>Friend</option>\\n\\t</select>\\n</div>\"","import { Tag      } from 'curvature/base/Tag';\nimport { RuleSet  } from 'curvature/base/RuleSet';\nimport { Router   } from 'curvature/base/Router';\nimport { RootView } from './RootView';\n\nlet view = new RootView;\n\nRuleSet.add('body', view);\n\nRuleSet.wait();\n\nRouter.wait(view);\n","module.exports = \"<div class = \\\"main [[inverted]]\\\" cv-on = \\\"click:focus(event)\\\">\\n\\t<div class = \\\"top\\\">\\n\\t\\t<div class = \\\"menu\\\"></div>\\n\\t\\t<div class = \\\"terminal\\\">\\n\\t\\t\\t<div class = \\\"output\\\" cv-each = \\\"output:line:l\\\" cv-ref = \\\"output:curvature/base/Tag\\\">\\n\\t\\t\\t\\t<p>[[line]]</p>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class = \\\"bottom\\\">\\n\\t\\t\\t\\t<div>[[prompt]]&nbsp;</div>\\n\\t\\t\\t\\t<div>\\n\\n\\t\\t\\t\\t\\t<form cv-on = \\\"submit:cancel(event)\\\">\\n\\t\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\t\\tcv-on        = \\\"keydown:test(event)\\\"\\n\\t\\t\\t\\t\\t\\t\\tcv-bind      = \\\"input\\\"\\n\\t\\t\\t\\t\\t\\t\\tautocomplete = \\\"off\\\"\\n\\t\\t\\t\\t\\t\\t\\tcv-ref       = \\\"input:curvature/base/Tag\\\"/>\\n\\t\\t\\t\\t\\t</form>\\n\\n\\t\\t\\t\\t\\t<form cv-on = \\\"submit:cancel(event)\\\">\\n\\t\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\t\\tname         = \\\"pw-input\\\"\\n\\t\\t\\t\\t\\t\\t\\ttype         = \\\"password\\\"\\n\\t\\t\\t\\t\\t\\t\\tcv-on        = \\\"keydown:test(event)\\\"\\n\\t\\t\\t\\t\\t\\t\\tcv-bind      = \\\"input\\\"\\n\\t\\t\\t\\t\\t\\t\\tautocomplete = \\\"one-time-code\\\"\\n\\t\\t\\t\\t\\t\\t\\tcv-ref       = \\\"password:curvature/base/Tag\\\"/>\\n\\t\\t\\t\\t\\t</form>\\n\\n\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\tname  = \\\"file-input\\\"\\n\\t\\t\\t\\t\\t\\ttype  = \\\"file\\\"\\n\\t\\t\\t\\t\\t\\tstyle = \\\"display: none\\\"\\n\\t\\t\\t\\t\\t\\tcv-on = \\\"input:fileLoaded(event)\\\"\\n\\t\\t\\t\\t\\t\\tcv-ref = \\\"file:curvature/base/Tag\\\"/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\\n\\t<div class = \\\"scanlines\\\"></div>\\n</div>\\n\"","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}